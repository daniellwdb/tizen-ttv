!function(){"use strict";function n(n,t,e,r,o,i,a){try{var c=n[i](a),u=c.value}catch(n){return void e(n)}c.done?t(u):Promise.resolve(u).then(r,o)}function t(t){return function(){var e=this,r=arguments;return new Promise((function(o,i){var a=t.apply(e,r);function c(t){n(a,o,i,c,u,"next",t)}function u(t){n(a,o,i,c,u,"throw",t)}c(void 0)}))}}function e(n,t,e){return(t=function(n){var t=function(n,t){if("object"!=typeof n||!n)return n;var e=n[Symbol.toPrimitive];if(void 0!==e){var r=e.call(n,t);if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(n)}(n,"string");return"symbol"==typeof t?t:t+""}(t))in n?Object.defineProperty(n,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):n[t]=e,n}function r(n,t){var e=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),e.push.apply(e,r)}return e}function o(n){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?r(Object(o),!0).forEach((function(t){e(n,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(o)):r(Object(o)).forEach((function(t){Object.defineProperty(n,t,Object.getOwnPropertyDescriptor(o,t))}))}return n}function i(){
/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */
var n,t,e="function"==typeof Symbol?Symbol:{},r=e.iterator||"@@iterator",o=e.toStringTag||"@@toStringTag";function c(e,r,o,i){var c=r&&r.prototype instanceof s?r:s,l=Object.create(c.prototype);return a(l,"_invoke",function(e,r,o){var i,a,c,s=0,l=o||[],f=!1,p={p:0,n:0,v:n,a:v,f:v.bind(n,4),d:function(t,e){return i=t,a=0,c=n,p.n=e,u}};function v(e,r){for(a=e,c=r,t=0;!f&&s&&!o&&t<l.length;t++){var o,i=l[t],v=p.p,d=i[2];e>3?(o=d===r)&&(c=i[(a=i[4])?5:(a=3,3)],i[4]=i[5]=n):i[0]<=v&&((o=e<2&&v<i[1])?(a=0,p.v=r,p.n=i[1]):v<d&&(o=e<3||i[0]>r||r>d)&&(i[4]=e,i[5]=r,p.n=d,a=0))}if(o||e>1)return u;throw f=!0,r}return function(o,l,d){if(s>1)throw TypeError("Generator is already running");for(f&&1===l&&v(l,d),a=l,c=d;(t=a<2?n:c)||!f;){i||(a?a<3?(a>1&&(p.n=-1),v(a,c)):p.n=c:p.v=c);try{if(s=2,i){if(a||(o="next"),t=i[o]){if(!(t=t.call(i,c)))throw TypeError("iterator result is not an object");if(!t.done)return t;c=t.value,a<2&&(a=0)}else 1===a&&(t=i.return)&&t.call(i),a<2&&(c=TypeError("The iterator does not provide a '"+o+"' method"),a=1);i=n}else if((t=(f=p.n<0)?c:e.call(r,p))!==u)break}catch(t){i=n,a=1,c=t}finally{s=1}}return{value:t,done:f}}}(e,o,i),!0),l}var u={};function s(){}function l(){}function f(){}t=Object.getPrototypeOf;var p=[][r]?t(t([][r]())):(a(t={},r,(function(){return this})),t),v=f.prototype=s.prototype=Object.create(p);function d(n){return Object.setPrototypeOf?Object.setPrototypeOf(n,f):(n.__proto__=f,a(n,o,"GeneratorFunction")),n.prototype=Object.create(v),n}return l.prototype=f,a(v,"constructor",f),a(f,"constructor",l),l.displayName="GeneratorFunction",a(f,o,"GeneratorFunction"),a(v),a(v,o,"Generator"),a(v,r,(function(){return this})),a(v,"toString",(function(){return"[object Generator]"})),(i=function(){return{w:c,m:d}})()}function a(n,t,e,r){var o=Object.defineProperty;try{o({},"",{})}catch(n){o=0}a=function(n,t,e,r){if(t)o?o(n,t,{value:e,enumerable:!r,configurable:!r,writable:!r}):n[t]=e;else{function i(t,e){a(n,t,(function(n){return this._invoke(t,e,n)}))}i("next",0),i("throw",1),i("return",2)}},a(n,t,e,r)}var c,u,s,l="https://api.betterttv.net/3",f=function(){var n=t(i().m((function n(t){var e,r;return i().w((function(n){for(;;)switch(n.n){case 0:if(t){n.n=1;break}return n.a(2,[]);case 1:return n.p=1,n.n=2,fetch(`${l}/cached/users/twitch/${t}`);case 2:if((e=n.v).ok){n.n=3;break}throw Error();case 3:return n.n=4,e.json();case 4:return r=n.v,n.a(2,[...r.channelEmotes,...r.sharedEmotes].map((n=>({id:n.id,code:n.code,channelId:t}))));case 5:return n.p=5,n.v,n.a(2,[])}}),n,null,[[1,5]])})));return function(t){return n.apply(this,arguments)}}(),p=function(){var n=t(i().m((function n(){var t;return i().w((function(n){for(;;)switch(n.n){case 0:return n.p=0,n.n=1,fetch(`${l}/cached/emotes/global`);case 1:if((t=n.v).ok){n.n=2;break}throw Error();case 2:return n.n=3,t.json();case 3:return n.a(2,n.v.map((n=>({id:n.id,code:n.code,channelId:null}))));case 4:return n.p=4,n.v,n.a(2,[])}}),n,null,[[0,4]])})));return function(){return n.apply(this,arguments)}}(),v="https://api.frankerfacez.com/v1",d=function(){var n=t(i().m((function n(t){var e,r;return i().w((function(n){for(;;)switch(n.n){case 0:if(t){n.n=1;break}return n.a(2,[]);case 1:return n.p=1,n.n=2,fetch(`${v}/room/id/${t}`);case 2:if((e=n.v).ok){n.n=3;break}throw Error();case 3:return n.n=4,e.json();case 4:return r=n.v,n.a(2,Object.values(r.sets).map((n=>n.emoticons.map((n=>({id:`${n.id}`,code:n.name,channelId:t}))))).flat());case 5:return n.p=5,n.v,n.a(2,[])}}),n,null,[[1,5]])})));return function(t){return n.apply(this,arguments)}}(),h=function(){var n=t(i().m((function n(){var t,e;return i().w((function(n){for(;;)switch(n.n){case 0:return n.p=0,n.n=1,fetch(`${v}/set/global`);case 1:if((t=n.v).ok){n.n=2;break}throw Error();case 2:return n.n=3,t.json();case 3:return e=n.v,n.a(2,Object.values(e.sets).map((n=>n.emoticons.map((n=>({id:`${n.id}`,code:n.name,channelId:null}))))).flat());case 4:return n.p=4,n.v,n.a(2,[])}}),n,null,[[0,4]])})));return function(){return n.apply(this,arguments)}}(),m=n=>o(o({channelId:null},n),{},{providers:o({twitch:!0,bttv:!0,ffz:!0,seventv:!0},null==n?void 0:n.providers)}),b=function(){var n=t(i().m((function n(t){var e,r=arguments;return i().w((function(n){for(;;)if(0===n.n)return e=r.length>1&&void 0!==r[1]?r[1]:{},n.a(2,t.map((n=>{var t=Object.values(e).findIndex((t=>t.includes(n.position)));if(t>=0&&!n.emote){var r=Object.keys(e)[t];return o(o({},n),{},{emote:{images:["1.0","2.0","3.0"].map((n=>`https://static-cdn.jtvnw.net/emoticons/v2/${r}/default/dark/${n}`))}})}return n})))}),n)})));return function(t){return n.apply(this,arguments)}}(),y={provider:"twitch",parse:b,load:(s=t(i().m((function n(){return i().w((function(n){for(;;)if(0===n.n)return n.a(2)}),n)}))),function(){return s.apply(this,arguments)})},w=(n,e,r)=>{var a,c=[],u=function(){var n=t(i().m((function n(t){var r,o,a,u=arguments;return i().w((function(n){for(;;)switch(n.n){case 0:if(r=u.length>1&&void 0!==u[1]&&u[1],c.find((n=>n.channelId===t))&&!r){n.n=2;break}return o=c,n.n=1,Promise.all(e.map((n=>n(t))));case 1:a=n.v.flat(),c=[...o,...a];case 2:return n.a(2)}}),n)})));return function(t){return n.apply(this,arguments)}}();return{provider:n,parse:(a=t(i().m((function n(t,e,a){return i().w((function(n){for(;;)switch(n.n){case 0:return n.n=1,u(a.channelId,!1);case 1:return n.a(2,t.map((n=>{var t=c.find((t=>t.code==n.content&&(t.channelId==a.channelId||null==t.channelId)));return t?o(o({},n),{},{emote:{images:r(t.id),isZeroWidth:t.isZeroWidth}}):n})))}}),n)}))),function(n,t,e){return a.apply(this,arguments)}),load:u}},g=w("bttv",[f,p],(n=>["1x","2x","3x"].map((t=>`https://cdn.betterttv.net/emote/${n}/${t}`)))),j=w("ffz",[d,h],(n=>["1","2","4"].map((t=>`https://cdn.frankerfacez.com/emote/${n}/${t}`)))),O="https://7tv.io/v3",$=function(){var n=t(i().m((function n(t){var e;return i().w((function(n){for(;;)switch(n.n){case 0:if(t){n.n=1;break}return n.a(2,[]);case 1:return n.p=1,n.n=2,fetch(`${O}/users/twitch/${t}`);case 2:if((e=n.v).ok){n.n=3;break}throw Error();case 3:return n.n=4,e.json();case 4:return n.a(2,n.v.emote_set.emotes.map((n=>({id:n.id,code:n.name,isZeroWidth:0!==(n.flags||0),channelId:t}))));case 5:return n.p=5,n.v,n.a(2,[])}}),n,null,[[1,5]])})));return function(t){return n.apply(this,arguments)}}(),k=function(){var n=t(i().m((function n(){var t;return i().w((function(n){for(;;)switch(n.n){case 0:return n.p=0,n.n=1,fetch(`${O}/emote-sets/global`);case 1:if((t=n.v).ok){n.n=2;break}throw Error();case 2:return n.n=3,t.json();case 3:return n.a(2,n.v.emotes.map((n=>({id:n.id,code:n.name,isZeroWidth:0!==(n.flags||0),channelId:null}))));case 4:return n.p=4,n.v,n.a(2,[])}}),n,null,[[0,4]])})));return function(){return n.apply(this,arguments)}}(),P=w("seventv",[$,k],(n=>["1x","2x","3x","4x"].map((t=>`https://cdn.7tv.app/emote/${n}/${t}.webp`)))),S={provider:"seventv",parse:(u=t(i().m((function n(e){return i().w((function(n){for(;;)if(0===n.n)return n.a(2,e.reduce(function(){var n=t(i().m((function n(t,e,r,o){var a;return i().w((function(n){for(;;)switch(n.n){case 0:return n.n=1,t;case 1:return a=n.v,n.a(2,(e.emote&&!e.emote.isZeroWidth&&(e.emote.overlays||(e.emote.overlays=[]),o.slice(r+1).some((n=>{var t,i;if(!n.emote||!n.emote.isZeroWidth)return!0;null==(i=null==(t=null==e?void 0:e.emote)?void 0:t.overlays)||i.push({images:n.emote.images,alt:n.content}),o.splice(r+1,1)}))),a))}}),n)})));return function(t,e,r,o){return n.apply(this,arguments)}}(),Promise.resolve(e)))}),n)}))),function(n){return u.apply(this,arguments)}),load:(c=t(i().m((function n(){return i().w((function(n){for(;;)if(0===n.n)return n.a(2)}),n)}))),function(){return c.apply(this,arguments)})},E={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&apos;"},x=n=>(Object.keys(E).map((t=>{var e=E[t];n=n.replaceAll(t,e)})),n),I=[y,g,j,P,S],_=function(){var n=t(i().m((function n(e){var r,o,a,c=arguments;return i().w((function(n){for(;;)switch(n.n){case 0:return r=(c.length>1&&void 0!==c[1]?c[1]:null)||{},o=m(c.length>2&&void 0!==c[2]?c[2]:null),n.n=1,I.reduce(function(){var n=t(i().m((function n(t,e){var a,c;return i().w((function(n){for(;;)switch(n.n){case 0:return n.n=1,t;case 1:return c=n.v,n.a(2,null!=(a=o.providers)&&a[e.provider]?e.parse(c,r,o):c)}}),n)})));return function(t,e){return n.apply(this,arguments)}}(),T(e));case 1:return a=n.v,n.a(2,{toArray:()=>a,toHTML:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],e=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return a.map((r=>{var o,i;if(!r.emote)return e?x(r.content):r.content;var a=(null==(o=r.emote.images)?void 0:o[n])||r.emote.images[0],c=[24,28,32,48][n],u=-1*[6,8,10,20][n],s=((null==(i=r.emote)?void 0:i.overlays)||[]).map((e=>{var r;return`<img class="emotettv-overlay" ${t?`style="position:absolute;top:0;left:0;height:${c}px"`:""} src="${(null==(r=e.images)?void 0:r[n])||e.images[0]}" alt="${e.alt}" />`})).join("");return`<figure class="emotettv-emote" ${t?'style="position:relative;display:inline-block;margin:0"':""}><img class="emotettv-img" src="${a}" alt="${r.content}" ${t?`style="height:${c}px;margin-bottom:${u}px"`:""} />${s}</figure>`})).join(" ")}})}}),n)})));return function(t){return n.apply(this,arguments)}}(),T=function(){var n=t(i().m((function n(t){var e;return i().w((function(n){for(;;)if(0===n.n)return e=0,n.a(2,t.split(" ").map((n=>{var t=`${e}-${e+n.length-1}`;return e+=n.length+1,{content:n,position:t}})))}),n)})));return function(t){return n.apply(this,arguments)}}();const L="ue6666qo983tsx6so1t0vnawi233wa",q="https://gql.twitch.tv/gql";function N(){let n=document.location.href;const t=document.querySelector("body");new MutationObserver((()=>{n!==document.location.href&&(n=document.location.href,async function(){const n=document.querySelector(".css-175oi2r"),t="\n    query useChannelSubscriptionPolling_SubscriptionQuery(\n      $login: String\n    ) {\n      user(login: $login) {\n        ...useChannelSubscriptionPolling_subscription\n        id\n        __typename\n      }\n    }\n\n    fragment useChannelSubscriptionPolling_subscription on User {\n      login\n      self {\n        subscriptionBenefit {\n          id\n          __typename\n        }\n      }\n    }\n  ",e=await fetch(q,{method:"POST",headers:{"content-type":"application/json","Client-Id":L},body:JSON.stringify({query:t,variables:{login:new URL(document.URL).pathname.replace("/","")}})}),{data:r}=await e.json(),o=new MutationObserver((n=>{for(const t of n)t.addedNodes.forEach((async n=>{const t=n.childNodes[0];if(!t)return;const e=t.childNodes[t.childNodes.length-1];if(e instanceof HTMLSpanElement){const n=await _(e.textContent,void 0,{channelId:r.user.id,providers:{twitch:!0,bttv:!0,ffz:!1,seventv:!0}});e.innerHTML=n.toHTML()}}))}));o.observe(n,{childList:!0,subtree:!0})}())})).observe(t,{childList:!0,subtree:!0})}window.addEventListener("load",(()=>N()))}();
