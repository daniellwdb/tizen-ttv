"use strict";(()=>{var uw=Object.create;var $a=Object.defineProperty;var cw=Object.getOwnPropertyDescriptor;var dw=Object.getOwnPropertyNames;var hw=Object.getPrototypeOf,pw=Object.prototype.hasOwnProperty;var mw=(i,e)=>()=>(i&&(e=i(i=0)),e);var l=(i,e)=>()=>(e||i((e={exports:{}}).exports,e),e.exports),_w=(i,e)=>{for(var t in e)$a(i,t,{get:e[t],enumerable:!0})},Qm=(i,e,t,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let n of dw(e))!pw.call(i,n)&&n!==t&&$a(i,n,{get:()=>e[n],enumerable:!(r=cw(e,n))||r.enumerable});return i};var yw=(i,e,t)=>(t=i!=null?uw(hw(i)):{},Qm(e||!i||!i.__esModule?$a(t,"default",{value:i,enumerable:!0}):t,i)),g=i=>Qm($a({},"__esModule",{value:!0}),i);var yr=l((YR,Gm)=>{var Ru=class i{constructor(e,t,r){if(new.target.name===i.name)throw new Error("Base Emote class cannot be used");this.fetcher=e.fetcher,this.channel=e,this.id=t,this.type=null,this._setup(r)}_setup(e){this.code=e.code}toLink(){return null}toString(){return this.code}toObject(){return{code:this.code,id:this.id,channel_id:this.channel.channel_id}}};Gm.exports=Ru});var Ct=l((eU,Wm)=>{Wm.exports={Twitch:{CDN:(i,e)=>`https://static-cdn.jtvnw.net/emoticons/v2/${i}/default/dark/${e+1}.0`},BTTV:{Global:"https://api.betterttv.net/3/cached/emotes/global",Channel:i=>`https://api.betterttv.net/3/cached/users/twitch/${i}`,CDN:(i,e)=>`https://cdn.betterttv.net/emote/${i}/${e+1}x.webp`},SevenTV:{Global:"https://7tv.io/v3/emote-sets/global",Channel:i=>`https://7tv.io/v3/users/twitch/${i}`,CDN:(i,e)=>`https://cdn.7tv.app/emote/${i}/${e}`},FFZ:{sets:{Global:3,Modifiers:1532818},Set:i=>`https://api.frankerfacez.com/v1/set/${i}`,Channel:i=>`https://api.frankerfacez.com/v1/room/id/${i}`,CDN:(i,e)=>`https://cdn.frankerfacez.com/emote/${i}/${e}`,CDNAnimated:(i,e)=>`https://cdn.frankerfacez.com/emote/${i}/animated/${e}.webp`},Templates:{html:'<img alt="{name}" title="{name}" class="twitch-emote twitch-emote-{size}" src="{link}">',markdown:'![{name}]({link} "{name}")',bbcode:"[img]{link}[/img]",plain:"{link}"}}});var Bu=l((tU,Vm)=>{var fw=yr(),gw=Ct(),Uu=class i extends fw{constructor(e,t,r){super(e,t,r),this.type="bttv"}get owner(){return this.fetcher.channels.get(this.ownerName)}_setup(e){super._setup(e),this.ownerName="user"in e?e.user.name:null,this.animated=e.animated,this.imageType="webp"}toLink(e=0){return gw.BTTV.CDN(this.id,e)}toObject(){return Object.assign({},super.toObject(),{animated:this.animated,ownerName:this.ownerName,type:this.type})}static fromObject(e,t=null){return new i(t,e.id,{code:e.code,animated:e.animated,user:{name:e.ownerName}})}};Vm.exports=Uu});var za=l((rU,$m)=>{var Ou=class extends Map{find(e,t){if(typeof e=="string"){if(typeof t>"u")return null;for(let r of this.values())if(r[e]===t)return r;return null}if(typeof e=="function"){let r=0;for(let n of this.values()){if(e(n,r,this))return n;r++}return null}return null}filter(e,t){t&&(e=e.bind(t));let r=new this.constructor,n=0;for(let[a,s]of this)e(s,n,this)&&r.set(a,s),n++;return r}map(e,t){t&&(e=e.bind(t));let r=new Array(this.size),n=0;for(let a of this.values())r[n]=e(a,n,this),n++;return r}};$m.exports=Ou});var ku=l((iU,zm)=>{var bw=za(),ju=class{constructor(e,t){this.fetcher=e,this.channel_id=t,this.emotes=new bw}fetchBTTVEmotes(){return this.fetcher.fetchBTTVEmotes(this.id)}fetchFFZEmotes(){return this.fetcher.fetchFFZEmotes(this.id)}fetchSevenTVEmotes(){return this.fetcher.fetchSevenTVEmotes(this.id)}};zm.exports=ju});var Lu=l((nU,Jm)=>{var xw=yr(),Km=Ct(),Mu=class i extends xw{constructor(e,t,r){super(e,t,r),this.type="ffz"}get owner(){return this.fetcher.channels.get(this.ownerName)}_setup(e){super._setup(e),this.code=e.name,this.ownerName="owner"in e?e.owner.name:null,this.sizes="animated"in e?Object.keys(e.animated):Object.keys(e.urls),this.animated="animated"in e,this.imageType="animated"in e?"webp":"png",this.modifier=e.modifier&&(e.modifier_flags&1)!==0}toLink(e=0){return e=this.sizes[e],this.animated?Km.FFZ.CDNAnimated(this.id,e):Km.FFZ.CDN(this.id,e)}toObject(){return Object.assign({},super.toObject(),{animated:this.animated,sizes:this.sizes,ownerName:this.ownerName,type:this.type,modifier:this.modifier})}static fromObject(e,t=null){let r=e.sizes.reduce((n,a)=>(n[a]=a,n),{});return new i(t,e.id,{code:e.code,name:e.code,urls:r,...e.animated?{animated:r}:{},owner:{name:e.ownerName},modifier:e.modifier,modifier_flags:e.modifier})}};Jm.exports=Mu});var Nu=l((aU,Zm)=>{var ww=yr(),vw=Ct(),Fu=class i extends ww{constructor(e,t,r){super(e,t,r),this.type="7tv"}get owner(){return this.fetcher.channels.get(this.ownerName)}_setup(e){super._setup(e),this.code=e.name,this.ownerName="owner"in e.data?e.data.owner.display_name:null,this.sizes=e.data.host.files.filter(t=>t.format===this.channel.format.toUpperCase()).map(t=>t.name),this.animated=e.data.animated,this.imageType=this.channel.format}toLink(e=0){return e=this.sizes[e],vw.SevenTV.CDN(this.id,e)}toObject(){return Object.assign({},super.toObject(),{animated:this.animated,sizes:this.sizes,ownerName:this.ownerName,type:this.type,imageType:this.imageType})}static fromObject(e,t){let r=e.sizes.map(n=>({format:t.format.toUpperCase(),name:n}));return new i(t,e.id,{code:e.code,name:e.code,data:{animated:e.animated,owner:{display_name:e.ownerName},host:{files:r}}})}};Zm.exports=Fu});var Gu=l((sU,Xm)=>{var Sw=yr(),Hw=Ct(),Qu=class i extends Sw{constructor(e,t,r){super(e,t,r),this.type="twitch"}get owner(){return this.channel}_setup(e){super._setup(e),this.set=e.emoticon_set,this.animated="animated"in e.formats,this.imageType="animated"in e.formats?"gif":"png"}toLink(e=0){return Hw.Twitch.CDN(this.id,e)}toObject(){return Object.assign({},super.toObject(),{animated:this.animated,set:this.set,type:this.type})}static fromObject(e,t=null){return new i(t,e.id,{code:e.code,animated:e.animated,emoticon_set:e.set,formats:e.animated?{animated:e.animated}:{}})}};Xm.exports=Qu});var j_=l((oU,O_)=>{"use strict";function h_(i,e){return function(){return i.apply(e,arguments)}}var{toString:Cw}=Object.prototype,{getPrototypeOf:rc}=Object,{iterator:ts,toStringTag:p_}=Symbol,rs=(i=>e=>{let t=Cw.call(e);return i[t]||(i[t]=t.slice(8,-1).toLowerCase())})(Object.create(null)),ze=i=>(i=i.toLowerCase(),e=>rs(e)===i),is=i=>e=>typeof e===i,{isArray:br}=Array,oi=is("undefined");function qw(i){return i!==null&&!oi(i)&&i.constructor!==null&&!oi(i.constructor)&&He(i.constructor.isBuffer)&&i.constructor.isBuffer(i)}var m_=ze("ArrayBuffer");function Ew(i){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(i):e=i&&i.buffer&&m_(i.buffer),e}var Pw=is("string"),He=is("function"),__=is("number"),ns=i=>i!==null&&typeof i=="object",Aw=i=>i===!0||i===!1,Ka=i=>{if(rs(i)!=="object")return!1;let e=rc(i);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(p_ in i)&&!(ts in i)},Dw=ze("Date"),Iw=ze("File"),Tw=ze("Blob"),Rw=ze("FileList"),Uw=i=>ns(i)&&He(i.pipe),Bw=i=>{let e;return i&&(typeof FormData=="function"&&i instanceof FormData||He(i.append)&&((e=rs(i))==="formdata"||e==="object"&&He(i.toString)&&i.toString()==="[object FormData]"))},Ow=ze("URLSearchParams"),[jw,kw,Mw,Lw]=["ReadableStream","Request","Response","Headers"].map(ze),Fw=i=>i.trim?i.trim():i.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function li(i,e,{allOwnKeys:t=!1}={}){if(i===null||typeof i>"u")return;let r,n;if(typeof i!="object"&&(i=[i]),br(i))for(r=0,n=i.length;r<n;r++)e.call(null,i[r],r,i);else{let a=t?Object.getOwnPropertyNames(i):Object.keys(i),s=a.length,o;for(r=0;r<s;r++)o=a[r],e.call(null,i[o],o,i)}}function y_(i,e){e=e.toLowerCase();let t=Object.keys(i),r=t.length,n;for(;r-- >0;)if(n=t[r],e===n.toLowerCase())return n;return null}var zt=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,f_=i=>!oi(i)&&i!==zt;function zu(){let{caseless:i}=f_(this)&&this||{},e={},t=(r,n)=>{let a=i&&y_(e,n)||n;Ka(e[a])&&Ka(r)?e[a]=zu(e[a],r):Ka(r)?e[a]=zu({},r):br(r)?e[a]=r.slice():e[a]=r};for(let r=0,n=arguments.length;r<n;r++)arguments[r]&&li(arguments[r],t);return e}var Nw=(i,e,t,{allOwnKeys:r}={})=>(li(e,(n,a)=>{t&&He(n)?i[a]=h_(n,t):i[a]=n},{allOwnKeys:r}),i),Qw=i=>(i.charCodeAt(0)===65279&&(i=i.slice(1)),i),Gw=(i,e,t,r)=>{i.prototype=Object.create(e.prototype,r),i.prototype.constructor=i,Object.defineProperty(i,"super",{value:e.prototype}),t&&Object.assign(i.prototype,t)},Ww=(i,e,t,r)=>{let n,a,s,o={};if(e=e||{},i==null)return e;do{for(n=Object.getOwnPropertyNames(i),a=n.length;a-- >0;)s=n[a],(!r||r(s,i,e))&&!o[s]&&(e[s]=i[s],o[s]=!0);i=t!==!1&&rc(i)}while(i&&(!t||t(i,e))&&i!==Object.prototype);return e},Vw=(i,e,t)=>{i=String(i),(t===void 0||t>i.length)&&(t=i.length),t-=e.length;let r=i.indexOf(e,t);return r!==-1&&r===t},$w=i=>{if(!i)return null;if(br(i))return i;let e=i.length;if(!__(e))return null;let t=new Array(e);for(;e-- >0;)t[e]=i[e];return t},zw=(i=>e=>i&&e instanceof i)(typeof Uint8Array<"u"&&rc(Uint8Array)),Kw=(i,e)=>{let r=(i&&i[ts]).call(i),n;for(;(n=r.next())&&!n.done;){let a=n.value;e.call(i,a[0],a[1])}},Jw=(i,e)=>{let t,r=[];for(;(t=i.exec(e))!==null;)r.push(t);return r},Zw=ze("HTMLFormElement"),Xw=i=>i.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(t,r,n){return r.toUpperCase()+n}),Ym=(({hasOwnProperty:i})=>(e,t)=>i.call(e,t))(Object.prototype),Yw=ze("RegExp"),g_=(i,e)=>{let t=Object.getOwnPropertyDescriptors(i),r={};li(t,(n,a)=>{let s;(s=e(n,a,i))!==!1&&(r[a]=s||n)}),Object.defineProperties(i,r)},ev=i=>{g_(i,(e,t)=>{if(He(i)&&["arguments","caller","callee"].indexOf(t)!==-1)return!1;let r=i[t];if(He(r)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+t+"'")})}})},tv=(i,e)=>{let t={},r=n=>{n.forEach(a=>{t[a]=!0})};return br(i)?r(i):r(String(i).split(e)),t},rv=()=>{},iv=(i,e)=>i!=null&&Number.isFinite(i=+i)?i:e;function nv(i){return!!(i&&He(i.append)&&i[p_]==="FormData"&&i[ts])}var av=i=>{let e=new Array(10),t=(r,n)=>{if(ns(r)){if(e.indexOf(r)>=0)return;if(!("toJSON"in r)){e[n]=r;let a=br(r)?[]:{};return li(r,(s,o)=>{let c=t(s,n+1);!oi(c)&&(a[o]=c)}),e[n]=void 0,a}}return r};return t(i,0)},sv=ze("AsyncFunction"),ov=i=>i&&(ns(i)||He(i))&&He(i.then)&&He(i.catch),b_=((i,e)=>i?setImmediate:e?((t,r)=>(zt.addEventListener("message",({source:n,data:a})=>{n===zt&&a===t&&r.length&&r.shift()()},!1),n=>{r.push(n),zt.postMessage(t,"*")}))(`axios@${Math.random()}`,[]):t=>setTimeout(t))(typeof setImmediate=="function",He(zt.postMessage)),lv=typeof queueMicrotask<"u"?queueMicrotask.bind(zt):typeof process<"u"&&process.nextTick||b_,uv=i=>i!=null&&He(i[ts]),m={isArray:br,isArrayBuffer:m_,isBuffer:qw,isFormData:Bw,isArrayBufferView:Ew,isString:Pw,isNumber:__,isBoolean:Aw,isObject:ns,isPlainObject:Ka,isReadableStream:jw,isRequest:kw,isResponse:Mw,isHeaders:Lw,isUndefined:oi,isDate:Dw,isFile:Iw,isBlob:Tw,isRegExp:Yw,isFunction:He,isStream:Uw,isURLSearchParams:Ow,isTypedArray:zw,isFileList:Rw,forEach:li,merge:zu,extend:Nw,trim:Fw,stripBOM:Qw,inherits:Gw,toFlatObject:Ww,kindOf:rs,kindOfTest:ze,endsWith:Vw,toArray:$w,forEachEntry:Kw,matchAll:Jw,isHTMLForm:Zw,hasOwnProperty:Ym,hasOwnProp:Ym,reduceDescriptors:g_,freezeMethods:ev,toObjectSet:tv,toCamelCase:Xw,noop:rv,toFiniteNumber:iv,findKey:y_,global:zt,isContextDefined:f_,isSpecCompliantForm:nv,toJSONObject:av,isAsyncFn:sv,isThenable:ov,setImmediate:b_,asap:lv,isIterable:uv};function D(i,e,t,r,n){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=i,this.name="AxiosError",e&&(this.code=e),t&&(this.config=t),r&&(this.request=r),n&&(this.response=n,this.status=n.status?n.status:null)}m.inherits(D,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:m.toJSONObject(this.config),code:this.code,status:this.status}}});var x_=D.prototype,w_={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(i=>{w_[i]={value:i}});Object.defineProperties(D,w_);Object.defineProperty(x_,"isAxiosError",{value:!0});D.from=(i,e,t,r,n,a)=>{let s=Object.create(x_);return m.toFlatObject(i,s,function(c){return c!==Error.prototype},o=>o!=="isAxiosError"),D.call(s,i.message,e,t,r,n),s.cause=i,s.name=i.name,a&&Object.assign(s,a),s};var cv=null;function Ku(i){return m.isPlainObject(i)||m.isArray(i)}function v_(i){return m.endsWith(i,"[]")?i.slice(0,-2):i}function e_(i,e,t){return i?i.concat(e).map(function(n,a){return n=v_(n),!t&&a?"["+n+"]":n}).join(t?".":""):e}function dv(i){return m.isArray(i)&&!i.some(Ku)}var hv=m.toFlatObject(m,{},null,function(e){return/^is[A-Z]/.test(e)});function as(i,e,t){if(!m.isObject(i))throw new TypeError("target must be an object");e=e||new FormData,t=m.toFlatObject(t,{metaTokens:!0,dots:!1,indexes:!1},!1,function(E,w){return!m.isUndefined(w[E])});let r=t.metaTokens,n=t.visitor||h,a=t.dots,s=t.indexes,c=(t.Blob||typeof Blob<"u"&&Blob)&&m.isSpecCompliantForm(e);if(!m.isFunction(n))throw new TypeError("visitor must be a function");function d(x){if(x===null)return"";if(m.isDate(x))return x.toISOString();if(!c&&m.isBlob(x))throw new D("Blob is not supported. Use a Buffer instead.");return m.isArrayBuffer(x)||m.isTypedArray(x)?c&&typeof Blob=="function"?new Blob([x]):Buffer.from(x):x}function h(x,E,w){let U=x;if(x&&!w&&typeof x=="object"){if(m.endsWith(E,"{}"))E=r?E:E.slice(0,-2),x=JSON.stringify(x);else if(m.isArray(x)&&dv(x)||(m.isFileList(x)||m.endsWith(E,"[]"))&&(U=m.toArray(x)))return E=v_(E),U.forEach(function(V,$){!(m.isUndefined(V)||V===null)&&e.append(s===!0?e_([E],$,a):s===null?E:E+"[]",d(V))}),!1}return Ku(x)?!0:(e.append(e_(w,E,a),d(x)),!1)}let b=[],q=Object.assign(hv,{defaultVisitor:h,convertValue:d,isVisitable:Ku});function C(x,E){if(!m.isUndefined(x)){if(b.indexOf(x)!==-1)throw Error("Circular reference detected in "+E.join("."));b.push(x),m.forEach(x,function(U,W){(!(m.isUndefined(U)||U===null)&&n.call(e,U,m.isString(W)?W.trim():W,E,q))===!0&&C(U,E?E.concat(W):[W])}),b.pop()}}if(!m.isObject(i))throw new TypeError("data must be an object");return C(i),e}function t_(i){let e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(i).replace(/[!'()~]|%20|%00/g,function(r){return e[r]})}function ic(i,e){this._pairs=[],i&&as(i,this,e)}var S_=ic.prototype;S_.append=function(e,t){this._pairs.push([e,t])};S_.toString=function(e){let t=e?function(r){return e.call(this,r,t_)}:t_;return this._pairs.map(function(n){return t(n[0])+"="+t(n[1])},"").join("&")};function pv(i){return encodeURIComponent(i).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function H_(i,e,t){if(!e)return i;let r=t&&t.encode||pv;m.isFunction(t)&&(t={serialize:t});let n=t&&t.serialize,a;if(n?a=n(e,t):a=m.isURLSearchParams(e)?e.toString():new ic(e,t).toString(r),a){let s=i.indexOf("#");s!==-1&&(i=i.slice(0,s)),i+=(i.indexOf("?")===-1?"?":"&")+a}return i}var Ju=class{constructor(){this.handlers=[]}use(e,t,r){return this.handlers.push({fulfilled:e,rejected:t,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){m.forEach(this.handlers,function(r){r!==null&&e(r)})}},r_=Ju,C_={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},mv=typeof URLSearchParams<"u"?URLSearchParams:ic,_v=typeof FormData<"u"?FormData:null,yv=typeof Blob<"u"?Blob:null,fv={isBrowser:!0,classes:{URLSearchParams:mv,FormData:_v,Blob:yv},protocols:["http","https","file","blob","url","data"]},nc=typeof window<"u"&&typeof document<"u",Zu=typeof navigator=="object"&&navigator||void 0,gv=nc&&(!Zu||["ReactNative","NativeScript","NS"].indexOf(Zu.product)<0),bv=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",xv=nc&&window.location.href||"http://localhost",wv=Object.freeze({__proto__:null,hasBrowserEnv:nc,hasStandardBrowserWebWorkerEnv:bv,hasStandardBrowserEnv:gv,navigator:Zu,origin:xv}),we={...wv,...fv};function vv(i,e){return as(i,new we.classes.URLSearchParams,Object.assign({visitor:function(t,r,n,a){return we.isNode&&m.isBuffer(t)?(this.append(r,t.toString("base64")),!1):a.defaultVisitor.apply(this,arguments)}},e))}function Sv(i){return m.matchAll(/\w+|\[(\w*)]/g,i).map(e=>e[0]==="[]"?"":e[1]||e[0])}function Hv(i){let e={},t=Object.keys(i),r,n=t.length,a;for(r=0;r<n;r++)a=t[r],e[a]=i[a];return e}function q_(i){function e(t,r,n,a){let s=t[a++];if(s==="__proto__")return!0;let o=Number.isFinite(+s),c=a>=t.length;return s=!s&&m.isArray(n)?n.length:s,c?(m.hasOwnProp(n,s)?n[s]=[n[s],r]:n[s]=r,!o):((!n[s]||!m.isObject(n[s]))&&(n[s]=[]),e(t,r,n[s],a)&&m.isArray(n[s])&&(n[s]=Hv(n[s])),!o)}if(m.isFormData(i)&&m.isFunction(i.entries)){let t={};return m.forEachEntry(i,(r,n)=>{e(Sv(r),n,t,0)}),t}return null}function Cv(i,e,t){if(m.isString(i))try{return(e||JSON.parse)(i),m.trim(i)}catch(r){if(r.name!=="SyntaxError")throw r}return(t||JSON.stringify)(i)}var ac={transitional:C_,adapter:["xhr","http","fetch"],transformRequest:[function(e,t){let r=t.getContentType()||"",n=r.indexOf("application/json")>-1,a=m.isObject(e);if(a&&m.isHTMLForm(e)&&(e=new FormData(e)),m.isFormData(e))return n?JSON.stringify(q_(e)):e;if(m.isArrayBuffer(e)||m.isBuffer(e)||m.isStream(e)||m.isFile(e)||m.isBlob(e)||m.isReadableStream(e))return e;if(m.isArrayBufferView(e))return e.buffer;if(m.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let o;if(a){if(r.indexOf("application/x-www-form-urlencoded")>-1)return vv(e,this.formSerializer).toString();if((o=m.isFileList(e))||r.indexOf("multipart/form-data")>-1){let c=this.env&&this.env.FormData;return as(o?{"files[]":e}:e,c&&new c,this.formSerializer)}}return a||n?(t.setContentType("application/json",!1),Cv(e)):e}],transformResponse:[function(e){let t=this.transitional||ac.transitional,r=t&&t.forcedJSONParsing,n=this.responseType==="json";if(m.isResponse(e)||m.isReadableStream(e))return e;if(e&&m.isString(e)&&(r&&!this.responseType||n)){let s=!(t&&t.silentJSONParsing)&&n;try{return JSON.parse(e)}catch(o){if(s)throw o.name==="SyntaxError"?D.from(o,D.ERR_BAD_RESPONSE,this,null,this.response):o}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:we.classes.FormData,Blob:we.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};m.forEach(["delete","get","head","post","put","patch"],i=>{ac.headers[i]={}});var sc=ac,qv=m.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),Ev=i=>{let e={},t,r,n;return i&&i.split(`
`).forEach(function(s){n=s.indexOf(":"),t=s.substring(0,n).trim().toLowerCase(),r=s.substring(n+1).trim(),!(!t||e[t]&&qv[t])&&(t==="set-cookie"?e[t]?e[t].push(r):e[t]=[r]:e[t]=e[t]?e[t]+", "+r:r)}),e},i_=Symbol("internals");function si(i){return i&&String(i).trim().toLowerCase()}function Ja(i){return i===!1||i==null?i:m.isArray(i)?i.map(Ja):String(i)}function Pv(i){let e=Object.create(null),t=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g,r;for(;r=t.exec(i);)e[r[1]]=r[2];return e}var Av=i=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(i.trim());function Wu(i,e,t,r,n){if(m.isFunction(r))return r.call(this,e,t);if(n&&(e=t),!!m.isString(e)){if(m.isString(r))return e.indexOf(r)!==-1;if(m.isRegExp(r))return r.test(e)}}function Dv(i){return i.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,t,r)=>t.toUpperCase()+r)}function Iv(i,e){let t=m.toCamelCase(" "+e);["get","set","has"].forEach(r=>{Object.defineProperty(i,r+t,{value:function(n,a,s){return this[r].call(this,e,n,a,s)},configurable:!0})})}var fr=class{constructor(e){e&&this.set(e)}set(e,t,r){let n=this;function a(o,c,d){let h=si(c);if(!h)throw new Error("header name must be a non-empty string");let b=m.findKey(n,h);(!b||n[b]===void 0||d===!0||d===void 0&&n[b]!==!1)&&(n[b||c]=Ja(o))}let s=(o,c)=>m.forEach(o,(d,h)=>a(d,h,c));if(m.isPlainObject(e)||e instanceof this.constructor)s(e,t);else if(m.isString(e)&&(e=e.trim())&&!Av(e))s(Ev(e),t);else if(m.isObject(e)&&m.isIterable(e)){let o={},c,d;for(let h of e){if(!m.isArray(h))throw TypeError("Object iterator must return a key-value pair");o[d=h[0]]=(c=o[d])?m.isArray(c)?[...c,h[1]]:[c,h[1]]:h[1]}s(o,t)}else e!=null&&a(t,e,r);return this}get(e,t){if(e=si(e),e){let r=m.findKey(this,e);if(r){let n=this[r];if(!t)return n;if(t===!0)return Pv(n);if(m.isFunction(t))return t.call(this,n,r);if(m.isRegExp(t))return t.exec(n);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=si(e),e){let r=m.findKey(this,e);return!!(r&&this[r]!==void 0&&(!t||Wu(this,this[r],r,t)))}return!1}delete(e,t){let r=this,n=!1;function a(s){if(s=si(s),s){let o=m.findKey(r,s);o&&(!t||Wu(r,r[o],o,t))&&(delete r[o],n=!0)}}return m.isArray(e)?e.forEach(a):a(e),n}clear(e){let t=Object.keys(this),r=t.length,n=!1;for(;r--;){let a=t[r];(!e||Wu(this,this[a],a,e,!0))&&(delete this[a],n=!0)}return n}normalize(e){let t=this,r={};return m.forEach(this,(n,a)=>{let s=m.findKey(r,a);if(s){t[s]=Ja(n),delete t[a];return}let o=e?Dv(a):String(a).trim();o!==a&&delete t[a],t[o]=Ja(n),r[o]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){let t=Object.create(null);return m.forEach(this,(r,n)=>{r!=null&&r!==!1&&(t[n]=e&&m.isArray(r)?r.join(", "):r)}),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,t])=>e+": "+t).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...t){let r=new this(e);return t.forEach(n=>r.set(n)),r}static accessor(e){let r=(this[i_]=this[i_]={accessors:{}}).accessors,n=this.prototype;function a(s){let o=si(s);r[o]||(Iv(n,s),r[o]=!0)}return m.isArray(e)?e.forEach(a):a(e),this}};fr.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);m.reduceDescriptors(fr.prototype,({value:i},e)=>{let t=e[0].toUpperCase()+e.slice(1);return{get:()=>i,set(r){this[t]=r}}});m.freezeMethods(fr);var $e=fr;function Vu(i,e){let t=this||sc,r=e||t,n=$e.from(r.headers),a=r.data;return m.forEach(i,function(o){a=o.call(t,a,n.normalize(),e?e.status:void 0)}),n.normalize(),a}function E_(i){return!!(i&&i.__CANCEL__)}function xr(i,e,t){D.call(this,i??"canceled",D.ERR_CANCELED,e,t),this.name="CanceledError"}m.inherits(xr,D,{__CANCEL__:!0});function P_(i,e,t){let r=t.config.validateStatus;!t.status||!r||r(t.status)?i(t):e(new D("Request failed with status code "+t.status,[D.ERR_BAD_REQUEST,D.ERR_BAD_RESPONSE][Math.floor(t.status/100)-4],t.config,t.request,t))}function Tv(i){let e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(i);return e&&e[1]||""}function Rv(i,e){i=i||10;let t=new Array(i),r=new Array(i),n=0,a=0,s;return e=e!==void 0?e:1e3,function(c){let d=Date.now(),h=r[a];s||(s=d),t[n]=c,r[n]=d;let b=a,q=0;for(;b!==n;)q+=t[b++],b=b%i;if(n=(n+1)%i,n===a&&(a=(a+1)%i),d-s<e)return;let C=h&&d-h;return C?Math.round(q*1e3/C):void 0}}function Uv(i,e){let t=0,r=1e3/e,n,a,s=(d,h=Date.now())=>{t=h,n=null,a&&(clearTimeout(a),a=null),i.apply(null,d)};return[(...d)=>{let h=Date.now(),b=h-t;b>=r?s(d,h):(n=d,a||(a=setTimeout(()=>{a=null,s(n)},r-b)))},()=>n&&s(n)]}var Ya=(i,e,t=3)=>{let r=0,n=Rv(50,250);return Uv(a=>{let s=a.loaded,o=a.lengthComputable?a.total:void 0,c=s-r,d=n(c),h=s<=o;r=s;let b={loaded:s,total:o,progress:o?s/o:void 0,bytes:c,rate:d||void 0,estimated:d&&o&&h?(o-s)/d:void 0,event:a,lengthComputable:o!=null,[e?"download":"upload"]:!0};i(b)},t)},n_=(i,e)=>{let t=i!=null;return[r=>e[0]({lengthComputable:t,total:i,loaded:r}),e[1]]},a_=i=>(...e)=>m.asap(()=>i(...e)),Bv=we.hasStandardBrowserEnv?((i,e)=>t=>(t=new URL(t,we.origin),i.protocol===t.protocol&&i.host===t.host&&(e||i.port===t.port)))(new URL(we.origin),we.navigator&&/(msie|trident)/i.test(we.navigator.userAgent)):()=>!0,Ov=we.hasStandardBrowserEnv?{write(i,e,t,r,n,a){let s=[i+"="+encodeURIComponent(e)];m.isNumber(t)&&s.push("expires="+new Date(t).toGMTString()),m.isString(r)&&s.push("path="+r),m.isString(n)&&s.push("domain="+n),a===!0&&s.push("secure"),document.cookie=s.join("; ")},read(i){let e=document.cookie.match(new RegExp("(^|;\\s*)("+i+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove(i){this.write(i,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function jv(i){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(i)}function kv(i,e){return e?i.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):i}function A_(i,e,t){let r=!jv(e);return i&&(r||t==!1)?kv(i,e):e}var s_=i=>i instanceof $e?{...i}:i;function Kt(i,e){e=e||{};let t={};function r(d,h,b,q){return m.isPlainObject(d)&&m.isPlainObject(h)?m.merge.call({caseless:q},d,h):m.isPlainObject(h)?m.merge({},h):m.isArray(h)?h.slice():h}function n(d,h,b,q){if(m.isUndefined(h)){if(!m.isUndefined(d))return r(void 0,d,b,q)}else return r(d,h,b,q)}function a(d,h){if(!m.isUndefined(h))return r(void 0,h)}function s(d,h){if(m.isUndefined(h)){if(!m.isUndefined(d))return r(void 0,d)}else return r(void 0,h)}function o(d,h,b){if(b in e)return r(d,h);if(b in i)return r(void 0,d)}let c={url:a,method:a,data:a,baseURL:s,transformRequest:s,transformResponse:s,paramsSerializer:s,timeout:s,timeoutMessage:s,withCredentials:s,withXSRFToken:s,adapter:s,responseType:s,xsrfCookieName:s,xsrfHeaderName:s,onUploadProgress:s,onDownloadProgress:s,decompress:s,maxContentLength:s,maxBodyLength:s,beforeRedirect:s,transport:s,httpAgent:s,httpsAgent:s,cancelToken:s,socketPath:s,responseEncoding:s,validateStatus:o,headers:(d,h,b)=>n(s_(d),s_(h),b,!0)};return m.forEach(Object.keys(Object.assign({},i,e)),function(h){let b=c[h]||n,q=b(i[h],e[h],h);m.isUndefined(q)&&b!==o||(t[h]=q)}),t}var D_=i=>{let e=Kt({},i),{data:t,withXSRFToken:r,xsrfHeaderName:n,xsrfCookieName:a,headers:s,auth:o}=e;e.headers=s=$e.from(s),e.url=H_(A_(e.baseURL,e.url,e.allowAbsoluteUrls),i.params,i.paramsSerializer),o&&s.set("Authorization","Basic "+btoa((o.username||"")+":"+(o.password?unescape(encodeURIComponent(o.password)):"")));let c;if(m.isFormData(t)){if(we.hasStandardBrowserEnv||we.hasStandardBrowserWebWorkerEnv)s.setContentType(void 0);else if((c=s.getContentType())!==!1){let[d,...h]=c?c.split(";").map(b=>b.trim()).filter(Boolean):[];s.setContentType([d||"multipart/form-data",...h].join("; "))}}if(we.hasStandardBrowserEnv&&(r&&m.isFunction(r)&&(r=r(e)),r||r!==!1&&Bv(e.url))){let d=n&&a&&Ov.read(a);d&&s.set(n,d)}return e},Mv=typeof XMLHttpRequest<"u",Lv=Mv&&function(i){return new Promise(function(t,r){let n=D_(i),a=n.data,s=$e.from(n.headers).normalize(),{responseType:o,onUploadProgress:c,onDownloadProgress:d}=n,h,b,q,C,x;function E(){C&&C(),x&&x(),n.cancelToken&&n.cancelToken.unsubscribe(h),n.signal&&n.signal.removeEventListener("abort",h)}let w=new XMLHttpRequest;w.open(n.method.toUpperCase(),n.url,!0),w.timeout=n.timeout;function U(){if(!w)return;let V=$e.from("getAllResponseHeaders"in w&&w.getAllResponseHeaders()),be={data:!o||o==="text"||o==="json"?w.responseText:w.response,status:w.status,statusText:w.statusText,headers:V,config:i,request:w};P_(function(de){t(de),E()},function(de){r(de),E()},be),w=null}"onloadend"in w?w.onloadend=U:w.onreadystatechange=function(){!w||w.readyState!==4||w.status===0&&!(w.responseURL&&w.responseURL.indexOf("file:")===0)||setTimeout(U)},w.onabort=function(){w&&(r(new D("Request aborted",D.ECONNABORTED,i,w)),w=null)},w.onerror=function(){r(new D("Network Error",D.ERR_NETWORK,i,w)),w=null},w.ontimeout=function(){let $=n.timeout?"timeout of "+n.timeout+"ms exceeded":"timeout exceeded",be=n.transitional||C_;n.timeoutErrorMessage&&($=n.timeoutErrorMessage),r(new D($,be.clarifyTimeoutError?D.ETIMEDOUT:D.ECONNABORTED,i,w)),w=null},a===void 0&&s.setContentType(null),"setRequestHeader"in w&&m.forEach(s.toJSON(),function($,be){w.setRequestHeader(be,$)}),m.isUndefined(n.withCredentials)||(w.withCredentials=!!n.withCredentials),o&&o!=="json"&&(w.responseType=n.responseType),d&&([q,x]=Ya(d,!0),w.addEventListener("progress",q)),c&&w.upload&&([b,C]=Ya(c),w.upload.addEventListener("progress",b),w.upload.addEventListener("loadend",C)),(n.cancelToken||n.signal)&&(h=V=>{w&&(r(!V||V.type?new xr(null,i,w):V),w.abort(),w=null)},n.cancelToken&&n.cancelToken.subscribe(h),n.signal&&(n.signal.aborted?h():n.signal.addEventListener("abort",h)));let W=Tv(n.url);if(W&&we.protocols.indexOf(W)===-1){r(new D("Unsupported protocol "+W+":",D.ERR_BAD_REQUEST,i));return}w.send(a||null)})},Fv=(i,e)=>{let{length:t}=i=i?i.filter(Boolean):[];if(e||t){let r=new AbortController,n,a=function(d){if(!n){n=!0,o();let h=d instanceof Error?d:this.reason;r.abort(h instanceof D?h:new xr(h instanceof Error?h.message:h))}},s=e&&setTimeout(()=>{s=null,a(new D(`timeout ${e} of ms exceeded`,D.ETIMEDOUT))},e),o=()=>{i&&(s&&clearTimeout(s),s=null,i.forEach(d=>{d.unsubscribe?d.unsubscribe(a):d.removeEventListener("abort",a)}),i=null)};i.forEach(d=>d.addEventListener("abort",a));let{signal:c}=r;return c.unsubscribe=()=>m.asap(o),c}},Nv=Fv,Qv=function*(i,e){let t=i.byteLength;if(!e||t<e){yield i;return}let r=0,n;for(;r<t;)n=r+e,yield i.slice(r,n),r=n},Gv=async function*(i,e){for await(let t of Wv(i))yield*Qv(t,e)},Wv=async function*(i){if(i[Symbol.asyncIterator]){yield*i;return}let e=i.getReader();try{for(;;){let{done:t,value:r}=await e.read();if(t)break;yield r}}finally{await e.cancel()}},o_=(i,e,t,r)=>{let n=Gv(i,e),a=0,s,o=c=>{s||(s=!0,r&&r(c))};return new ReadableStream({async pull(c){try{let{done:d,value:h}=await n.next();if(d){o(),c.close();return}let b=h.byteLength;if(t){let q=a+=b;t(q)}c.enqueue(new Uint8Array(h))}catch(d){throw o(d),d}},cancel(c){return o(c),n.return()}},{highWaterMark:2})},ss=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",I_=ss&&typeof ReadableStream=="function",Vv=ss&&(typeof TextEncoder=="function"?(i=>e=>i.encode(e))(new TextEncoder):async i=>new Uint8Array(await new Response(i).arrayBuffer())),T_=(i,...e)=>{try{return!!i(...e)}catch{return!1}},$v=I_&&T_(()=>{let i=!1,e=new Request(we.origin,{body:new ReadableStream,method:"POST",get duplex(){return i=!0,"half"}}).headers.has("Content-Type");return i&&!e}),l_=64*1024,Xu=I_&&T_(()=>m.isReadableStream(new Response("").body)),es={stream:Xu&&(i=>i.body)};ss&&(i=>{["text","arrayBuffer","blob","formData","stream"].forEach(e=>{!es[e]&&(es[e]=m.isFunction(i[e])?t=>t[e]():(t,r)=>{throw new D(`Response type '${e}' is not supported`,D.ERR_NOT_SUPPORT,r)})})})(new Response);var zv=async i=>{if(i==null)return 0;if(m.isBlob(i))return i.size;if(m.isSpecCompliantForm(i))return(await new Request(we.origin,{method:"POST",body:i}).arrayBuffer()).byteLength;if(m.isArrayBufferView(i)||m.isArrayBuffer(i))return i.byteLength;if(m.isURLSearchParams(i)&&(i=i+""),m.isString(i))return(await Vv(i)).byteLength},Kv=async(i,e)=>{let t=m.toFiniteNumber(i.getContentLength());return t??zv(e)},Jv=ss&&(async i=>{let{url:e,method:t,data:r,signal:n,cancelToken:a,timeout:s,onDownloadProgress:o,onUploadProgress:c,responseType:d,headers:h,withCredentials:b="same-origin",fetchOptions:q}=D_(i);d=d?(d+"").toLowerCase():"text";let C=Nv([n,a&&a.toAbortSignal()],s),x,E=C&&C.unsubscribe&&(()=>{C.unsubscribe()}),w;try{if(c&&$v&&t!=="get"&&t!=="head"&&(w=await Kv(h,r))!==0){let be=new Request(e,{method:"POST",body:r,duplex:"half"}),rt;if(m.isFormData(r)&&(rt=be.headers.get("content-type"))&&h.setContentType(rt),be.body){let[de,mr]=n_(w,Ya(a_(c)));r=o_(be.body,l_,de,mr)}}m.isString(b)||(b=b?"include":"omit");let U="credentials"in Request.prototype;x=new Request(e,{...q,signal:C,method:t.toUpperCase(),headers:h.normalize().toJSON(),body:r,duplex:"half",credentials:U?b:void 0});let W=await fetch(x),V=Xu&&(d==="stream"||d==="response");if(Xu&&(o||V&&E)){let be={};["status","statusText","headers"].forEach(_r=>{be[_r]=W[_r]});let rt=m.toFiniteNumber(W.headers.get("content-length")),[de,mr]=o&&n_(rt,Ya(a_(o),!0))||[];W=new Response(o_(W.body,l_,de,()=>{mr&&mr(),E&&E()}),be)}d=d||"text";let $=await es[m.findKey(es,d)||"text"](W,i);return!V&&E&&E(),await new Promise((be,rt)=>{P_(be,rt,{data:$,headers:$e.from(W.headers),status:W.status,statusText:W.statusText,config:i,request:x})})}catch(U){throw E&&E(),U&&U.name==="TypeError"&&/Load failed|fetch/i.test(U.message)?Object.assign(new D("Network Error",D.ERR_NETWORK,i,x),{cause:U.cause||U}):D.from(U,U&&U.code,i,x)}}),Yu={http:cv,xhr:Lv,fetch:Jv};m.forEach(Yu,(i,e)=>{if(i){try{Object.defineProperty(i,"name",{value:e})}catch{}Object.defineProperty(i,"adapterName",{value:e})}});var u_=i=>`- ${i}`,Zv=i=>m.isFunction(i)||i===null||i===!1,R_={getAdapter:i=>{i=m.isArray(i)?i:[i];let{length:e}=i,t,r,n={};for(let a=0;a<e;a++){t=i[a];let s;if(r=t,!Zv(t)&&(r=Yu[(s=String(t)).toLowerCase()],r===void 0))throw new D(`Unknown adapter '${s}'`);if(r)break;n[s||"#"+a]=r}if(!r){let a=Object.entries(n).map(([o,c])=>`adapter ${o} `+(c===!1?"is not supported by the environment":"is not available in the build")),s=e?a.length>1?`since :
`+a.map(u_).join(`
`):" "+u_(a[0]):"as no adapter specified";throw new D("There is no suitable adapter to dispatch the request "+s,"ERR_NOT_SUPPORT")}return r},adapters:Yu};function $u(i){if(i.cancelToken&&i.cancelToken.throwIfRequested(),i.signal&&i.signal.aborted)throw new xr(null,i)}function c_(i){return $u(i),i.headers=$e.from(i.headers),i.data=Vu.call(i,i.transformRequest),["post","put","patch"].indexOf(i.method)!==-1&&i.headers.setContentType("application/x-www-form-urlencoded",!1),R_.getAdapter(i.adapter||sc.adapter)(i).then(function(r){return $u(i),r.data=Vu.call(i,i.transformResponse,r),r.headers=$e.from(r.headers),r},function(r){return E_(r)||($u(i),r&&r.response&&(r.response.data=Vu.call(i,i.transformResponse,r.response),r.response.headers=$e.from(r.response.headers))),Promise.reject(r)})}var U_="1.9.0",os={};["object","boolean","number","function","string","symbol"].forEach((i,e)=>{os[i]=function(r){return typeof r===i||"a"+(e<1?"n ":" ")+i}});var d_={};os.transitional=function(e,t,r){function n(a,s){return"[Axios v"+U_+"] Transitional option '"+a+"'"+s+(r?". "+r:"")}return(a,s,o)=>{if(e===!1)throw new D(n(s," has been removed"+(t?" in "+t:"")),D.ERR_DEPRECATED);return t&&!d_[s]&&(d_[s]=!0,console.warn(n(s," has been deprecated since v"+t+" and will be removed in the near future"))),e?e(a,s,o):!0}};os.spelling=function(e){return(t,r)=>(console.warn(`${r} is likely a misspelling of ${e}`),!0)};function Xv(i,e,t){if(typeof i!="object")throw new D("options must be an object",D.ERR_BAD_OPTION_VALUE);let r=Object.keys(i),n=r.length;for(;n-- >0;){let a=r[n],s=e[a];if(s){let o=i[a],c=o===void 0||s(o,a,i);if(c!==!0)throw new D("option "+a+" must be "+c,D.ERR_BAD_OPTION_VALUE);continue}if(t!==!0)throw new D("Unknown option "+a,D.ERR_BAD_OPTION)}}var Za={assertOptions:Xv,validators:os},it=Za.validators,gr=class{constructor(e){this.defaults=e||{},this.interceptors={request:new r_,response:new r_}}async request(e,t){try{return await this._request(e,t)}catch(r){if(r instanceof Error){let n={};Error.captureStackTrace?Error.captureStackTrace(n):n=new Error;let a=n.stack?n.stack.replace(/^.+\n/,""):"";try{r.stack?a&&!String(r.stack).endsWith(a.replace(/^.+\n.+\n/,""))&&(r.stack+=`
`+a):r.stack=a}catch{}}throw r}}_request(e,t){typeof e=="string"?(t=t||{},t.url=e):t=e||{},t=Kt(this.defaults,t);let{transitional:r,paramsSerializer:n,headers:a}=t;r!==void 0&&Za.assertOptions(r,{silentJSONParsing:it.transitional(it.boolean),forcedJSONParsing:it.transitional(it.boolean),clarifyTimeoutError:it.transitional(it.boolean)},!1),n!=null&&(m.isFunction(n)?t.paramsSerializer={serialize:n}:Za.assertOptions(n,{encode:it.function,serialize:it.function},!0)),t.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?t.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:t.allowAbsoluteUrls=!0),Za.assertOptions(t,{baseUrl:it.spelling("baseURL"),withXsrfToken:it.spelling("withXSRFToken")},!0),t.method=(t.method||this.defaults.method||"get").toLowerCase();let s=a&&m.merge(a.common,a[t.method]);a&&m.forEach(["delete","get","head","post","put","patch","common"],x=>{delete a[x]}),t.headers=$e.concat(s,a);let o=[],c=!0;this.interceptors.request.forEach(function(E){typeof E.runWhen=="function"&&E.runWhen(t)===!1||(c=c&&E.synchronous,o.unshift(E.fulfilled,E.rejected))});let d=[];this.interceptors.response.forEach(function(E){d.push(E.fulfilled,E.rejected)});let h,b=0,q;if(!c){let x=[c_.bind(this),void 0];for(x.unshift.apply(x,o),x.push.apply(x,d),q=x.length,h=Promise.resolve(t);b<q;)h=h.then(x[b++],x[b++]);return h}q=o.length;let C=t;for(b=0;b<q;){let x=o[b++],E=o[b++];try{C=x(C)}catch(w){E.call(this,w);break}}try{h=c_.call(this,C)}catch(x){return Promise.reject(x)}for(b=0,q=d.length;b<q;)h=h.then(d[b++],d[b++]);return h}getUri(e){e=Kt(this.defaults,e);let t=A_(e.baseURL,e.url,e.allowAbsoluteUrls);return H_(t,e.params,e.paramsSerializer)}};m.forEach(["delete","get","head","options"],function(e){gr.prototype[e]=function(t,r){return this.request(Kt(r||{},{method:e,url:t,data:(r||{}).data}))}});m.forEach(["post","put","patch"],function(e){function t(r){return function(a,s,o){return this.request(Kt(o||{},{method:e,headers:r?{"Content-Type":"multipart/form-data"}:{},url:a,data:s}))}}gr.prototype[e]=t(),gr.prototype[e+"Form"]=t(!0)});var Xa=gr,ec=class i{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let t;this.promise=new Promise(function(a){t=a});let r=this;this.promise.then(n=>{if(!r._listeners)return;let a=r._listeners.length;for(;a-- >0;)r._listeners[a](n);r._listeners=null}),this.promise.then=n=>{let a,s=new Promise(o=>{r.subscribe(o),a=o}).then(n);return s.cancel=function(){r.unsubscribe(a)},s},e(function(a,s,o){r.reason||(r.reason=new xr(a,s,o),t(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;let t=this._listeners.indexOf(e);t!==-1&&this._listeners.splice(t,1)}toAbortSignal(){let e=new AbortController,t=r=>{e.abort(r)};return this.subscribe(t),e.signal.unsubscribe=()=>this.unsubscribe(t),e.signal}static source(){let e;return{token:new i(function(n){e=n}),cancel:e}}},Yv=ec;function eS(i){return function(t){return i.apply(null,t)}}function tS(i){return m.isObject(i)&&i.isAxiosError===!0}var tc={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(tc).forEach(([i,e])=>{tc[e]=i});var rS=tc;function B_(i){let e=new Xa(i),t=h_(Xa.prototype.request,e);return m.extend(t,Xa.prototype,e,{allOwnKeys:!0}),m.extend(t,e,null,{allOwnKeys:!0}),t.create=function(n){return B_(Kt(i,n))},t}var re=B_(sc);re.Axios=Xa;re.CanceledError=xr;re.CancelToken=Yv;re.isCancel=E_;re.VERSION=U_;re.toFormData=as;re.AxiosError=D;re.Cancel=re.CanceledError;re.all=function(e){return Promise.all(e)};re.spread=eS;re.isAxiosError=tS;re.mergeConfig=Kt;re.AxiosHeaders=$e;re.formToJSON=i=>q_(m.isHTMLForm(i)?new FormData(i):i);re.getAdapter=R_.getAdapter;re.HttpStatusCode=rS;re.default=re;O_.exports=re});var _={};_w(_,{__addDisposableResource:()=>ly,__assign:()=>ls,__asyncDelegator:()=>ey,__asyncGenerator:()=>Y_,__asyncValues:()=>ty,__await:()=>wr,__awaiter:()=>$_,__classPrivateFieldGet:()=>ay,__classPrivateFieldIn:()=>oy,__classPrivateFieldSet:()=>sy,__createBinding:()=>cs,__decorate:()=>L_,__disposeResources:()=>uy,__esDecorate:()=>N_,__exportStar:()=>K_,__extends:()=>k_,__generator:()=>z_,__importDefault:()=>ny,__importStar:()=>iy,__makeTemplateObject:()=>ry,__metadata:()=>V_,__param:()=>F_,__propKey:()=>G_,__read:()=>uc,__rest:()=>M_,__rewriteRelativeImportExtension:()=>cy,__runInitializers:()=>Q_,__setFunctionName:()=>W_,__spread:()=>J_,__spreadArray:()=>X_,__spreadArrays:()=>Z_,__values:()=>us,default:()=>aS});function k_(i,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");oc(i,e);function t(){this.constructor=i}i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}function M_(i,e){var t={};for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&e.indexOf(r)<0&&(t[r]=i[r]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,r=Object.getOwnPropertySymbols(i);n<r.length;n++)e.indexOf(r[n])<0&&Object.prototype.propertyIsEnumerable.call(i,r[n])&&(t[r[n]]=i[r[n]]);return t}function L_(i,e,t,r){var n=arguments.length,a=n<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(i,e,t,r);else for(var o=i.length-1;o>=0;o--)(s=i[o])&&(a=(n<3?s(a):n>3?s(e,t,a):s(e,t))||a);return n>3&&a&&Object.defineProperty(e,t,a),a}function F_(i,e){return function(t,r){e(t,r,i)}}function N_(i,e,t,r,n,a){function s(U){if(U!==void 0&&typeof U!="function")throw new TypeError("Function expected");return U}for(var o=r.kind,c=o==="getter"?"get":o==="setter"?"set":"value",d=!e&&i?r.static?i:i.prototype:null,h=e||(d?Object.getOwnPropertyDescriptor(d,r.name):{}),b,q=!1,C=t.length-1;C>=0;C--){var x={};for(var E in r)x[E]=E==="access"?{}:r[E];for(var E in r.access)x.access[E]=r.access[E];x.addInitializer=function(U){if(q)throw new TypeError("Cannot add initializers after decoration has completed");a.push(s(U||null))};var w=(0,t[C])(o==="accessor"?{get:h.get,set:h.set}:h[c],x);if(o==="accessor"){if(w===void 0)continue;if(w===null||typeof w!="object")throw new TypeError("Object expected");(b=s(w.get))&&(h.get=b),(b=s(w.set))&&(h.set=b),(b=s(w.init))&&n.unshift(b)}else(b=s(w))&&(o==="field"?n.unshift(b):h[c]=b)}d&&Object.defineProperty(d,r.name,h),q=!0}function Q_(i,e,t){for(var r=arguments.length>2,n=0;n<e.length;n++)t=r?e[n].call(i,t):e[n].call(i);return r?t:void 0}function G_(i){return typeof i=="symbol"?i:"".concat(i)}function W_(i,e,t){return typeof e=="symbol"&&(e=e.description?"[".concat(e.description,"]"):""),Object.defineProperty(i,"name",{configurable:!0,value:t?"".concat(t," ",e):e})}function V_(i,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(i,e)}function $_(i,e,t,r){function n(a){return a instanceof t?a:new t(function(s){s(a)})}return new(t||(t=Promise))(function(a,s){function o(h){try{d(r.next(h))}catch(b){s(b)}}function c(h){try{d(r.throw(h))}catch(b){s(b)}}function d(h){h.done?a(h.value):n(h.value).then(o,c)}d((r=r.apply(i,e||[])).next())})}function z_(i,e){var t={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},r,n,a,s=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return s.next=o(0),s.throw=o(1),s.return=o(2),typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function o(d){return function(h){return c([d,h])}}function c(d){if(r)throw new TypeError("Generator is already executing.");for(;s&&(s=0,d[0]&&(t=0)),t;)try{if(r=1,n&&(a=d[0]&2?n.return:d[0]?n.throw||((a=n.return)&&a.call(n),0):n.next)&&!(a=a.call(n,d[1])).done)return a;switch(n=0,a&&(d=[d[0]&2,a.value]),d[0]){case 0:case 1:a=d;break;case 4:return t.label++,{value:d[1],done:!1};case 5:t.label++,n=d[1],d=[0];continue;case 7:d=t.ops.pop(),t.trys.pop();continue;default:if(a=t.trys,!(a=a.length>0&&a[a.length-1])&&(d[0]===6||d[0]===2)){t=0;continue}if(d[0]===3&&(!a||d[1]>a[0]&&d[1]<a[3])){t.label=d[1];break}if(d[0]===6&&t.label<a[1]){t.label=a[1],a=d;break}if(a&&t.label<a[2]){t.label=a[2],t.ops.push(d);break}a[2]&&t.ops.pop(),t.trys.pop();continue}d=e.call(i,t)}catch(h){d=[6,h],n=0}finally{r=a=0}if(d[0]&5)throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}}function K_(i,e){for(var t in i)t!=="default"&&!Object.prototype.hasOwnProperty.call(e,t)&&cs(e,i,t)}function us(i){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&i[e],r=0;if(t)return t.call(i);if(i&&typeof i.length=="number")return{next:function(){return i&&r>=i.length&&(i=void 0),{value:i&&i[r++],done:!i}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function uc(i,e){var t=typeof Symbol=="function"&&i[Symbol.iterator];if(!t)return i;var r=t.call(i),n,a=[],s;try{for(;(e===void 0||e-- >0)&&!(n=r.next()).done;)a.push(n.value)}catch(o){s={error:o}}finally{try{n&&!n.done&&(t=r.return)&&t.call(r)}finally{if(s)throw s.error}}return a}function J_(){for(var i=[],e=0;e<arguments.length;e++)i=i.concat(uc(arguments[e]));return i}function Z_(){for(var i=0,e=0,t=arguments.length;e<t;e++)i+=arguments[e].length;for(var r=Array(i),n=0,e=0;e<t;e++)for(var a=arguments[e],s=0,o=a.length;s<o;s++,n++)r[n]=a[s];return r}function X_(i,e,t){if(t||arguments.length===2)for(var r=0,n=e.length,a;r<n;r++)(a||!(r in e))&&(a||(a=Array.prototype.slice.call(e,0,r)),a[r]=e[r]);return i.concat(a||Array.prototype.slice.call(e))}function wr(i){return this instanceof wr?(this.v=i,this):new wr(i)}function Y_(i,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=t.apply(i,e||[]),n,a=[];return n=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),o("next"),o("throw"),o("return",s),n[Symbol.asyncIterator]=function(){return this},n;function s(C){return function(x){return Promise.resolve(x).then(C,b)}}function o(C,x){r[C]&&(n[C]=function(E){return new Promise(function(w,U){a.push([C,E,w,U])>1||c(C,E)})},x&&(n[C]=x(n[C])))}function c(C,x){try{d(r[C](x))}catch(E){q(a[0][3],E)}}function d(C){C.value instanceof wr?Promise.resolve(C.value.v).then(h,b):q(a[0][2],C)}function h(C){c("next",C)}function b(C){c("throw",C)}function q(C,x){C(x),a.shift(),a.length&&c(a[0][0],a[0][1])}}function ey(i){var e,t;return e={},r("next"),r("throw",function(n){throw n}),r("return"),e[Symbol.iterator]=function(){return this},e;function r(n,a){e[n]=i[n]?function(s){return(t=!t)?{value:wr(i[n](s)),done:!1}:a?a(s):s}:a}}function ty(i){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=i[Symbol.asyncIterator],t;return e?e.call(i):(i=typeof us=="function"?us(i):i[Symbol.iterator](),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(a){t[a]=i[a]&&function(s){return new Promise(function(o,c){s=i[a](s),n(o,c,s.done,s.value)})}}function n(a,s,o,c){Promise.resolve(c).then(function(d){a({value:d,done:o})},s)}}function ry(i,e){return Object.defineProperty?Object.defineProperty(i,"raw",{value:e}):i.raw=e,i}function iy(i){if(i&&i.__esModule)return i;var e={};if(i!=null)for(var t=lc(i),r=0;r<t.length;r++)t[r]!=="default"&&cs(e,i,t[r]);return iS(e,i),e}function ny(i){return i&&i.__esModule?i:{default:i}}function ay(i,e,t,r){if(t==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?i!==e||!r:!e.has(i))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?r:t==="a"?r.call(i):r?r.value:e.get(i)}function sy(i,e,t,r,n){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?i!==e||!n:!e.has(i))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?n.call(i,t):n?n.value=t:e.set(i,t),t}function oy(i,e){if(e===null||typeof e!="object"&&typeof e!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof i=="function"?e===i:i.has(e)}function ly(i,e,t){if(e!=null){if(typeof e!="object"&&typeof e!="function")throw new TypeError("Object expected.");var r,n;if(t){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");r=e[Symbol.asyncDispose]}if(r===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");r=e[Symbol.dispose],t&&(n=r)}if(typeof r!="function")throw new TypeError("Object not disposable.");n&&(r=function(){try{n.call(this)}catch(a){return Promise.reject(a)}}),i.stack.push({value:e,dispose:r,async:t})}else t&&i.stack.push({async:!0});return e}function uy(i){function e(a){i.error=i.hasError?new nS(a,i.error,"An error was suppressed during disposal."):a,i.hasError=!0}var t,r=0;function n(){for(;t=i.stack.pop();)try{if(!t.async&&r===1)return r=0,i.stack.push(t),Promise.resolve().then(n);if(t.dispose){var a=t.dispose.call(t.value);if(t.async)return r|=2,Promise.resolve(a).then(n,function(s){return e(s),n()})}else r|=1}catch(s){e(s)}if(r===1)return i.hasError?Promise.reject(i.error):Promise.resolve();if(i.hasError)throw i.error}return n()}function cy(i,e){return typeof i=="string"&&/^\.\.?\//.test(i)?i.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(t,r,n,a,s){return r?e?".jsx":".js":n&&(!a||!s)?t:n+a+"."+s.toLowerCase()+"js"}):i}var oc,ls,cs,iS,lc,nS,aS,y=mw(()=>{oc=function(i,e){return oc=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])},oc(i,e)};ls=function(){return ls=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e},ls.apply(this,arguments)};cs=Object.create?function(i,e,t,r){r===void 0&&(r=t);var n=Object.getOwnPropertyDescriptor(e,t);(!n||("get"in n?!e.__esModule:n.writable||n.configurable))&&(n={enumerable:!0,get:function(){return e[t]}}),Object.defineProperty(i,r,n)}:function(i,e,t,r){r===void 0&&(r=t),i[r]=e[t]};iS=Object.create?function(i,e){Object.defineProperty(i,"default",{enumerable:!0,value:e})}:function(i,e){i.default=e},lc=function(i){return lc=Object.getOwnPropertyNames||function(e){var t=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[t.length]=r);return t},lc(i)};nS=typeof SuppressedError=="function"?SuppressedError:function(i,e,t){var r=new Error(t);return r.name="SuppressedError",r.error=i,r.suppressed=e,r};aS={__extends:k_,__assign:ls,__rest:M_,__decorate:L_,__param:F_,__esDecorate:N_,__runInitializers:Q_,__propKey:G_,__setFunctionName:W_,__metadata:V_,__awaiter:$_,__generator:z_,__createBinding:cs,__exportStar:K_,__values:us,__read:uc,__spread:J_,__spreadArrays:Z_,__spreadArray:X_,__await:wr,__asyncGenerator:Y_,__asyncDelegator:ey,__asyncValues:ty,__makeTemplateObject:ry,__importStar:iy,__importDefault:ny,__classPrivateFieldGet:ay,__classPrivateFieldSet:sy,__classPrivateFieldIn:oy,__addDisposableResource:ly,__disposeResources:uy,__rewriteRelativeImportExtension:cy}});var ui=l((lU,dy)=>{dy.exports.isNode=!1});var Jt=l(Et=>{"use strict";var qt;Object.defineProperty(Et,"__esModule",{value:!0});Et.LogLevelToConsoleFunction=Et.resolveLogLevel=Et.LogLevel=void 0;var sS=ui(),Ce;(function(i){i[i.CRITICAL=0]="CRITICAL",i[i.ERROR=1]="ERROR",i[i.WARNING=2]="WARNING",i[i.INFO=3]="INFO",i[i.DEBUG=4]="DEBUG",i[i.TRACE=7]="TRACE"})(Ce||(Ce={}));Et.LogLevel=Ce;function oS(i){if(typeof i=="number"){if(Object.prototype.hasOwnProperty.call(Ce,i))return i;var e=Object.keys(Ce).map(function(r){return parseInt(r,10)}).filter(function(r){return!isNaN(r)&&r<i});return e.length?Math.max.apply(Math,e):Ce.WARNING}var t=i.replace(/\d+$/,"").toUpperCase();if(!Object.prototype.hasOwnProperty.call(Ce,t))throw new Error("Unknown log level string: ".concat(i));return Ce[t]}Et.resolveLogLevel=oS;var lS=sS.isNode?console.log.bind(console):console.debug.bind(console);Et.LogLevelToConsoleFunction=(qt={},qt[Ce.CRITICAL]=console.error.bind(console),qt[Ce.ERROR]=console.error.bind(console),qt[Ce.WARNING]=console.warn.bind(console),qt[Ce.INFO]=console.info.bind(console),qt[Ce.DEBUG]=lS.bind(console),qt[Ce.TRACE]=console.trace.bind(console),qt)});var hy=l(ds=>{"use strict";Object.defineProperty(ds,"__esModule",{value:!0});ds.Enumerable=void 0;function uS(i){return i===void 0&&(i=!0),function(e,t){Object.defineProperty(e,t,{get:function(){},set:function(r){Object.defineProperty(this,t,{value:r,writable:!0,enumerable:i})},enumerable:i})}}ds.Enumerable=uS});var my=l(hs=>{"use strict";Object.defineProperty(hs,"__esModule",{value:!0});hs.flatten=void 0;var py=(y(),g(_));function cS(i){var e;return(e=[]).concat.apply(e,py.__spreadArray([],py.__read(i),!1))}hs.flatten=cS});var _y=l(ps=>{"use strict";Object.defineProperty(ps,"__esModule",{value:!0});ps.immutableSplice=void 0;var vr=(y(),g(_));function dS(i,e,t){for(var r=[],n=3;n<arguments.length;n++)r[n-3]=arguments[n];return vr.__spreadArray(vr.__spreadArray(vr.__spreadArray([],vr.__read(i.slice(0,e)),!1),vr.__read(r),!1),vr.__read(i.slice(e+t)),!1)}ps.immutableSplice=dS});var yy=l(ms=>{"use strict";Object.defineProperty(ms,"__esModule",{value:!0});ms.partitionedFlatMap=void 0;var cc=(y(),g(_));function hS(i,e,t){var r,n,a,s={};try{for(var o=cc.__values(i),c=o.next();!c.done;c=o.next()){var d=c.value,h=e(d),b=t(d);Array.isArray(b)||(b=[b]),Object.prototype.hasOwnProperty.call(s,h)?(a=s[h]).push.apply(a,cc.__spreadArray([],cc.__read(b),!1)):s[h]=b}}catch(q){r={error:q}}finally{try{c&&!c.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}return s}ms.partitionedFlatMap=hS});var gy=l(Sr=>{"use strict";Object.defineProperty(Sr,"__esModule",{value:!0});Sr.resolveConfigValueSync=Sr.resolveConfigValue=void 0;var fy=(y(),g(_));function pS(i){return fy.__awaiter(this,void 0,void 0,function(){return fy.__generator(this,function(e){switch(e.label){case 0:return typeof i!="function"?[3,2]:[4,i()];case 1:return[2,e.sent()];case 2:return[2,i]}})})}Sr.resolveConfigValue=pS;function mS(i){return typeof i=="function"?i():i}Sr.resolveConfigValueSync=mS});var by=l(_s=>{"use strict";Object.defineProperty(_s,"__esModule",{value:!0});_s.deprecateClass=void 0;var dc=(y(),g(_));function _S(i,e){var t=!1;return function(r){dc.__extends(n,r);function n(){for(var a=[],s=0;s<arguments.length;s++)a[s]=arguments[s];return t||(console.warn(e),t=!0),r.apply(this,dc.__spreadArray([],dc.__read(a),!1))||this}return n}(i)}_s.deprecateClass=_S});var wy=l(Zt=>{"use strict";Object.defineProperty(Zt,"__esModule",{value:!0});Zt.match=Zt.eq=void 0;var xy=function(i){return{otherwise:function(){return i},on:function(){return xy(i)}}},hc=function(i){return{on:function(e,t){return e(i)?xy(t(i)):hc(i)},otherwise:function(e){return e(i)}}};Zt.match=hc;var yS=function(i){return function(e){return i===e}};Zt.eq=yS;hc.eq=Zt.eq});var Sy=l(ys=>{"use strict";Object.defineProperty(ys,"__esModule",{value:!0});ys.fibWithLimit=void 0;var vy=(y(),g(_));function fS(i){var e,t,r;return vy.__generator(this,function(n){switch(n.label){case 0:e=0,t=1,n.label=1;case 1:return e<i?[4,e]:[3,3];case 2:return n.sent(),r=vy.__read([t,e+t],2),e=r[0],t=r[1],[3,1];case 3:return[4,i];case 4:return n.sent(),[3,3];case 5:return[2]}})}ys.fibWithLimit=fS});var gs=l(fs=>{"use strict";Object.defineProperty(fs,"__esModule",{value:!0});fs.arrayToObject=void 0;var Hy=(y(),g(_));function gS(i,e){return Object.assign.apply(Object,Hy.__spreadArray([{}],Hy.__read(i.map(e)),!1))}fs.arrayToObject=gS});var Cy=l(bs=>{"use strict";Object.defineProperty(bs,"__esModule",{value:!0});bs.entriesToObject=void 0;var bS=(y(),g(_)),xS=gs();function wS(i){return(0,xS.arrayToObject)(i,function(e){var t,r=bS.__read(e,2),n=r[0],a=r[1];return t={},t[n]=a,t})}bs.entriesToObject=wS});var qy=l(xs=>{"use strict";Object.defineProperty(xs,"__esModule",{value:!0});xs.forEachObjectEntry=void 0;var vS=(y(),g(_));function SS(i,e){Object.entries(i).forEach(function(t){var r=vS.__read(t,2),n=r[0],a=r[1];return e(a,n)})}xs.forEachObjectEntry=SS});var Ey=l(ws=>{"use strict";Object.defineProperty(ws,"__esModule",{value:!0});ws.groupBy=void 0;var HS=(y(),g(_));function CS(i,e){var t,r,n;if(typeof e!="function"){var a=e;e=function(b){return b[a].toString()}}var s={};try{for(var o=HS.__values(i),c=o.next();!c.done;c=o.next()){var d=c.value,h=e(d);((n=s[h])!==null&&n!==void 0?n:s[h]=[]).push(d)}}catch(b){t={error:b}}finally{try{c&&!c.done&&(r=o.return)&&r.call(o)}finally{if(t)throw t.error}}return s}ws.groupBy=CS});var Py=l(vs=>{"use strict";Object.defineProperty(vs,"__esModule",{value:!0});vs.indexBy=void 0;var qS=gs();function ES(i,e){if(typeof e!="function"){var t=e;e=function(r){return r[t].toString()}}return(0,qS.arrayToObject)(i,function(r){var n;return n={},n[e(r)]=r,n})}vs.indexBy=ES});var Ay=l(Ss=>{"use strict";Object.defineProperty(Ss,"__esModule",{value:!0});Ss.mapObject=void 0;var pc=(y(),g(_));function PS(i,e){var t=Object.entries(i).map(function(r){var n,a=pc.__read(r,2),s=a[0],o=a[1];return n={},n[s]=e(o,s),n});return Object.assign.apply(Object,pc.__spreadArray([{}],pc.__read(t),!1))}Ss.mapObject=PS});var mc=l(Cs=>{"use strict";Object.defineProperty(Cs,"__esModule",{value:!0});Cs.pick=void 0;var Hs=(y(),g(_));function AS(i,e){return Object.assign.apply(Object,Hs.__spreadArray([{}],Hs.__read(Object.entries(i).filter(function(t){var r=Hs.__read(t,1),n=r[0];return e.includes(n)}).map(function(t){var r,n=Hs.__read(t,2),a=n[0],s=n[1];return r={},r[a]=s,r})),!1))}Cs.pick=AS});var Dy=l(qs=>{"use strict";Object.defineProperty(qs,"__esModule",{value:!0});qs.omit=void 0;var DS=mc();function IS(i,e){return(0,DS.pick)(i,Object.keys(i).filter(function(t){return!e.includes(t)}))}qs.omit=IS});var Iy=l(Pt=>{"use strict";Object.defineProperty(Pt,"__esModule",{value:!0});Pt.mapOptional=Pt.mapNullable=Pt.isNullish=void 0;function _c(i){return i==null}Pt.isNullish=_c;function TS(i,e){return _c(i)?null:e(i)}Pt.mapNullable=TS;function RS(i,e){return _c(i)?void 0:e(i)}Pt.mapOptional=RS});var Ry=l(Es=>{"use strict";Object.defineProperty(Es,"__esModule",{value:!0});Es.delay=void 0;var Ty=(y(),g(_));function US(i){return Ty.__awaiter(this,void 0,void 0,function(){return Ty.__generator(this,function(e){switch(e.label){case 0:return[4,new Promise(function(t){return setTimeout(t,i)})];case 1:return e.sent(),[2]}})})}Es.delay=US});var Uy=l(Ps=>{"use strict";Object.defineProperty(Ps,"__esModule",{value:!0});Ps.promiseWithResolvers=void 0;function BS(){var i,e,t=new Promise(function(r,n){i=r,e=n});return{promise:t,resolve:i,reject:e}}Ps.promiseWithResolvers=BS});var By=l(As=>{"use strict";Object.defineProperty(As,"__esModule",{value:!0});As.padLeft=void 0;function OS(i,e,t){if(typeof i=="number"&&(i=i.toString()),e=e-i.length,e<=0)return i;t===void 0&&(t=" ");var r="";do(e&1)===1&&(r+=t),e>>=1,e&&(t+=t);while(e);return r+i}As.padLeft=OS});var Oy=l(Ds=>{"use strict";Object.defineProperty(Ds,"__esModule",{value:!0});Ds.splitWithLimit=void 0;var yc=(y(),g(_));function jS(i,e,t){var r=i.split(e);return r.length<=t?r:yc.__spreadArray(yc.__spreadArray([],yc.__read(r.slice(0,t-1)),!1),[r.slice(t-1).join(e)],!1)}Ds.splitWithLimit=jS});var jy=l(Hr=>{"use strict";Object.defineProperty(Hr,"__esModule",{value:!0});Hr.utf8Substring=Hr.utf8Length=void 0;var Is=(y(),g(_));function kS(i){return Is.__spreadArray([],Is.__read(i),!1).length}Hr.utf8Length=kS;function MS(i,e,t){return Is.__spreadArray([],Is.__read(i),!1).slice(e,t).join("")}Hr.utf8Substring=MS});var H=l(P=>{"use strict";Object.defineProperty(P,"__esModule",{value:!0});P.utf8Substring=P.utf8Length=P.splitWithLimit=P.padLeft=P.promiseWithResolvers=P.delay=P.mapOptional=P.mapNullable=P.isNullish=P.pick=P.omit=P.mapObject=P.indexBy=P.groupBy=P.forEachObjectEntry=P.entriesToObject=P.arrayToObject=P.fibWithLimit=P.eq=P.match=P.deprecateClass=P.resolveConfigValueSync=P.resolveConfigValue=P.partitionedFlatMap=P.immutableSplice=P.flatten=P.Enumerable=void 0;var LS=hy();Object.defineProperty(P,"Enumerable",{enumerable:!0,get:function(){return LS.Enumerable}});var FS=my();Object.defineProperty(P,"flatten",{enumerable:!0,get:function(){return FS.flatten}});var NS=_y();Object.defineProperty(P,"immutableSplice",{enumerable:!0,get:function(){return NS.immutableSplice}});var QS=yy();Object.defineProperty(P,"partitionedFlatMap",{enumerable:!0,get:function(){return QS.partitionedFlatMap}});var ky=gy();Object.defineProperty(P,"resolveConfigValue",{enumerable:!0,get:function(){return ky.resolveConfigValue}});Object.defineProperty(P,"resolveConfigValueSync",{enumerable:!0,get:function(){return ky.resolveConfigValueSync}});var GS=by();Object.defineProperty(P,"deprecateClass",{enumerable:!0,get:function(){return GS.deprecateClass}});var My=wy();Object.defineProperty(P,"match",{enumerable:!0,get:function(){return My.match}});Object.defineProperty(P,"eq",{enumerable:!0,get:function(){return My.eq}});var WS=Sy();Object.defineProperty(P,"fibWithLimit",{enumerable:!0,get:function(){return WS.fibWithLimit}});var VS=gs();Object.defineProperty(P,"arrayToObject",{enumerable:!0,get:function(){return VS.arrayToObject}});var $S=Cy();Object.defineProperty(P,"entriesToObject",{enumerable:!0,get:function(){return $S.entriesToObject}});var zS=qy();Object.defineProperty(P,"forEachObjectEntry",{enumerable:!0,get:function(){return zS.forEachObjectEntry}});var KS=Ey();Object.defineProperty(P,"groupBy",{enumerable:!0,get:function(){return KS.groupBy}});var JS=Py();Object.defineProperty(P,"indexBy",{enumerable:!0,get:function(){return JS.indexBy}});var ZS=Ay();Object.defineProperty(P,"mapObject",{enumerable:!0,get:function(){return ZS.mapObject}});var XS=Dy();Object.defineProperty(P,"omit",{enumerable:!0,get:function(){return XS.omit}});var YS=mc();Object.defineProperty(P,"pick",{enumerable:!0,get:function(){return YS.pick}});var fc=Iy();Object.defineProperty(P,"isNullish",{enumerable:!0,get:function(){return fc.isNullish}});Object.defineProperty(P,"mapNullable",{enumerable:!0,get:function(){return fc.mapNullable}});Object.defineProperty(P,"mapOptional",{enumerable:!0,get:function(){return fc.mapOptional}});var e0=Ry();Object.defineProperty(P,"delay",{enumerable:!0,get:function(){return e0.delay}});var t0=Uy();Object.defineProperty(P,"promiseWithResolvers",{enumerable:!0,get:function(){return t0.promiseWithResolvers}});var r0=By();Object.defineProperty(P,"padLeft",{enumerable:!0,get:function(){return r0.padLeft}});var i0=Oy();Object.defineProperty(P,"splitWithLimit",{enumerable:!0,get:function(){return i0.splitWithLimit}});var Ly=jy();Object.defineProperty(P,"utf8Length",{enumerable:!0,get:function(){return Ly.utf8Length}});Object.defineProperty(P,"utf8Substring",{enumerable:!0,get:function(){return Ly.utf8Substring}})});var wc=l(Rs=>{"use strict";var gc,bc;Object.defineProperty(Rs,"__esModule",{value:!0});Rs.getMinLogLevelFromEnv=void 0;var n0=Jt(),Ts=typeof process>"u"?[]:(bc=(gc=process.env.LOGGING)===null||gc===void 0?void 0:gc.split(";").map(function(i){var e=i.split("=",2),t=e[0],r=e[1];return r?[t==="default"?void 0:t.split(":"),(0,n0.resolveLogLevel)(r)]:null}).filter(function(i){return!!i}).sort(function(i,e){var t,r,n=i[0],a=e[0];return((t=a?.length)!==null&&t!==void 0?t:0)-((r=n?.length)!==null&&r!==void 0?r:0)}))!==null&&bc!==void 0?bc:[],xc=Ts.findIndex(function(i){var e=i[0];return!e}),Fy=void 0;xc!==-1&&(Fy=Ts[xc][1],Ts.splice(xc));function a0(i,e){return e.length<=i.length&&e.every(function(t,r){return t===i[r]})}function s0(i){for(var e=i.split(":"),t=0,r=Ts;t<r.length;t++){var n=r[t],a=n[0],s=n[1];if(a0(e,a))return s}return Fy}Rs.getMinLogLevelFromEnv=s0});var vc=l(Us=>{"use strict";Object.defineProperty(Us,"__esModule",{value:!0});Us.BaseLogger=void 0;var o0=H(),l0=ui(),u0=wc(),At=Jt(),c0=function(){function i(e){var t=e.name,r=e.minLevel,n=e.emoji,a=n===void 0?!1:n,s=e.colors,o=e.timestamps,c=o===void 0?l0.isNode:o,d,h;this._name=t,this._minLevel=(h=(d=(0,o0.mapOptional)(r,function(b){return(0,At.resolveLogLevel)(b)}))!==null&&d!==void 0?d:(0,u0.getMinLogLevelFromEnv)(t))!==null&&h!==void 0?h:At.LogLevel.WARNING,this._emoji=a,this._colors=s,this._timestamps=c}return i.prototype.crit=function(e){this.log(At.LogLevel.CRITICAL,e)},i.prototype.error=function(e){this.log(At.LogLevel.ERROR,e)},i.prototype.warn=function(e){this.log(At.LogLevel.WARNING,e)},i.prototype.info=function(e){this.log(At.LogLevel.INFO,e)},i.prototype.debug=function(e){this.log(At.LogLevel.DEBUG,e)},i.prototype.trace=function(e){this.log(At.LogLevel.TRACE,e)},i}();Us.BaseLogger=c0});var Ny=l(Bs=>{"use strict";Object.defineProperty(Bs,"__esModule",{value:!0});Bs.BrowserLogger=void 0;var d0=(y(),g(_)),h0=Jt(),p0=vc(),m0=function(i){d0.__extends(e,i);function e(){return i!==null&&i.apply(this,arguments)||this}return e.prototype.log=function(t,r){if(!(t>this._minLevel)){var n=h0.LogLevelToConsoleFunction[t],a="[".concat(this._name,"] ").concat(r);this._timestamps&&(a="[".concat(new Date().toISOString(),"] ").concat(r)),n(a)}},e}(p0.BaseLogger);Bs.BrowserLogger=m0});var Qy=l(Os=>{"use strict";Object.defineProperty(Os,"__esModule",{value:!0});Os.CustomLoggerWrapper=void 0;var _0=H(),y0=wc(),Te=Jt(),f0=function(){function i(e){var t=e.name,r=e.minLevel,n=e.custom,a;this._minLevel=(a=(0,_0.mapOptional)(r,function(s){return(0,Te.resolveLogLevel)(s)}))!==null&&a!==void 0?a:(0,y0.getMinLogLevelFromEnv)(t),this._override=typeof n=="function"?{log:n}:n}return i.prototype.log=function(e,t){this._shouldLog(e)&&this._override.log(e,t)},i.prototype.crit=function(e){this._override.crit?this._shouldLog(Te.LogLevel.CRITICAL)&&this._override.crit(e):this.log(Te.LogLevel.CRITICAL,e)},i.prototype.error=function(e){this._override.error?this._shouldLog(Te.LogLevel.ERROR)&&this._override.error(e):this.log(Te.LogLevel.ERROR,e)},i.prototype.warn=function(e){this._override.warn?this._shouldLog(Te.LogLevel.WARNING)&&this._override.warn(e):this.log(Te.LogLevel.WARNING,e)},i.prototype.info=function(e){this._override.info?this._shouldLog(Te.LogLevel.INFO)&&this._override.info(e):this.log(Te.LogLevel.INFO,e)},i.prototype.debug=function(e){this._override.debug?this._shouldLog(Te.LogLevel.DEBUG)&&this._override.debug(e):this.log(Te.LogLevel.DEBUG,e)},i.prototype.trace=function(e){this._override.trace?this._shouldLog(Te.LogLevel.TRACE)&&this._override.trace(e):this.log(Te.LogLevel.TRACE,e)},i.prototype._shouldLog=function(e){return this._minLevel===void 0||this._minLevel>=e},i}();Os.CustomLoggerWrapper=f0});var Gy=l(qe=>{"use strict";var Dt,It,Tt;Object.defineProperty(qe,"__esModule",{value:!0});qe.NodeLogger=qe.LogLevelToBackgroundColor=qe.LogLevelToColor=qe.LogLevelToEmoji=void 0;var g0=(y(),g(_)),te=Jt(),b0=vc();qe.LogLevelToEmoji=(Dt={},Dt[te.LogLevel.CRITICAL]="\u{1F6D1}",Dt[te.LogLevel.ERROR]="\u274C",Dt[te.LogLevel.WARNING]="\u26A0\uFE0F ",Dt[te.LogLevel.INFO]="\u2139\uFE0F ",Dt[te.LogLevel.DEBUG]="\u{1F41E}",Dt[te.LogLevel.TRACE]="\u{1F43E}",Dt);var x0={black:30,red:31,green:32,yellow:33,blue:34,magenta:35,cyan:36,white:37,blackBright:90,redBright:91,greenBright:92,yellowBright:93,blueBright:94,magentaBright:95,cyanBright:96,whiteBright:97},w0={bgBlack:40,bgRed:41,bgGreen:42,bgYellow:43,bgBlue:44,bgMagenta:45,bgCyan:46,bgWhite:47,bgBlackBright:100,bgRedBright:101,bgGreenBright:102,bgYellowBright:103,bgBlueBright:104,bgMagentaBright:105,bgCyanBright:106,bgWhiteBright:107};function js(i,e,t){return function(r){return"\x1B[".concat(i,"m").concat(t?t(r):r,"\x1B[").concat(e,"m")}}function nt(i){return js(x0[i],39)}function ci(i,e){return js(w0[i],49,e)}qe.LogLevelToColor=(It={},It[te.LogLevel.CRITICAL]=nt("red"),It[te.LogLevel.ERROR]=nt("redBright"),It[te.LogLevel.WARNING]=nt("yellow"),It[te.LogLevel.INFO]=nt("blue"),It[te.LogLevel.DEBUG]=nt("magenta"),It[te.LogLevel.TRACE]=js(0,0),It);qe.LogLevelToBackgroundColor=(Tt={},Tt[te.LogLevel.CRITICAL]=ci("bgRed",nt("white")),Tt[te.LogLevel.ERROR]=ci("bgRedBright",nt("white")),Tt[te.LogLevel.WARNING]=ci("bgYellow",nt("black")),Tt[te.LogLevel.INFO]=ci("bgBlue",nt("white")),Tt[te.LogLevel.DEBUG]=ci("bgMagenta",nt("black")),Tt[te.LogLevel.TRACE]=js(7,27),Tt);var v0=function(i){g0.__extends(e,i);function e(){return i!==null&&i.apply(this,arguments)||this}return e.prototype.log=function(t,r){var n,a,s;if(!(t>this._minLevel)){var o=te.LogLevelToConsoleFunction[t],c="";if(this._timestamps&&(c+="[".concat(new Date().toISOString(),"] ")),this._emoji){var d=qe.LogLevelToEmoji[t];c+="".concat(d," ")}var h=(s=(n=this._colors)!==null&&n!==void 0?n:(a=process.stdout)===null||a===void 0?void 0:a.isTTY)!==null&&s!==void 0?s:!0;h?c+="".concat(qe.LogLevelToBackgroundColor[t](this._name)," ").concat(qe.LogLevelToBackgroundColor[t](te.LogLevel[t])," ").concat(qe.LogLevelToColor[t](r)):c+="[".concat(this._name,":").concat(te.LogLevel[t].toLowerCase(),"] ").concat(r),o(c)}},e}(b0.BaseLogger);qe.NodeLogger=v0});var Wy=l(ks=>{"use strict";Object.defineProperty(ks,"__esModule",{value:!0});ks.createLogger=void 0;var S0=ui(),H0=Ny(),C0=Qy(),q0=Gy();function E0(i){return i.custom?new C0.CustomLoggerWrapper(i):S0.isNode?new q0.NodeLogger(i):new H0.BrowserLogger(i)}ks.createLogger=E0});var di=l(Cr=>{"use strict";Object.defineProperty(Cr,"__esModule",{value:!0});Cr.LogLevel=Cr.createLogger=void 0;var P0=Wy();Object.defineProperty(Cr,"createLogger",{enumerable:!0,get:function(){return P0.createLogger}});var A0=Jt();Object.defineProperty(Cr,"LogLevel",{enumerable:!0,get:function(){return A0.LogLevel}})});var Ls=l(Ms=>{"use strict";Object.defineProperty(Ms,"__esModule",{value:!0});Ms.CustomError=void 0;var Sc=class extends Error{constructor(...e){var t;super(...e),Object.setPrototypeOf(this,new.target.prototype),(t=Error.captureStackTrace)===null||t===void 0||t.call(Error,this,new.target.constructor)}get name(){return this.constructor.name}};Ms.CustomError=Sc});var Ns=l(Fs=>{"use strict";Object.defineProperty(Fs,"__esModule",{value:!0});Fs.RateLimiterDestroyedError=void 0;var D0=Ls(),Hc=class extends D0.CustomError{};Fs.RateLimiterDestroyedError=Hc});var hi=l(Qs=>{"use strict";Object.defineProperty(Qs,"__esModule",{value:!0});Qs.RateLimitReachedError=void 0;var I0=Ls(),Cc=class extends I0.CustomError{};Qs.RateLimitReachedError=Cc});var Ec=l(Gs=>{"use strict";Object.defineProperty(Gs,"__esModule",{value:!0});Gs.RetryAfterError=void 0;var T0=Ls(),qc=class extends T0.CustomError{constructor(e){super(`Need to retry after ${e} ms`),this._retryAt=Date.now()+e}get retryAt(){return this._retryAt}};Gs.RetryAfterError=qc});var Vy=l(Ws=>{"use strict";Object.defineProperty(Ws,"__esModule",{value:!0});Ws.NullRateLimiter=void 0;var Pc=class{constructor(e){this._callback=e}async request(e){return await this._callback(e)}clear(){}pause(){}resume(){}};Ws.NullRateLimiter=Pc});var Dc=l(Vs=>{"use strict";Object.defineProperty(Vs,"__esModule",{value:!0});Vs.ResponseBasedRateLimiter=void 0;var R0=di(),U0=H(),B0=hi(),$y=Ec(),Ac=class{constructor({logger:e}){this._queue=[],this._batchRunning=!1,this._paused=!1,this._logger=(0,R0.createLogger)({name:"rate-limiter",emoji:!0,...e})}async request(e,t){return this._logger.trace("request start"),await new Promise((r,n)=>{var a;let s={req:e,resolve:r,reject:n,limitReachedBehavior:(a=t?.limitReachedBehavior)!==null&&a!==void 0?a:"enqueue"};this._batchRunning||this._nextBatchTimer||this._paused?(this._logger.trace(`request queued batchRunning:${this._batchRunning.toString()} hasNextBatchTimer:${(!!this._nextBatchTimer).toString()} paused:${this._paused.toString()}`),this._queue.push(s)):this._runRequestBatch([s])})}clear(){this._queue=[]}pause(){this._paused=!0}resume(){this._paused=!1,this._runNextBatch()}get stats(){var e,t,r,n,a;return{lastKnownLimit:(t=(e=this._parameters)===null||e===void 0?void 0:e.limit)!==null&&t!==void 0?t:null,lastKnownRemainingRequests:(n=(r=this._parameters)===null||r===void 0?void 0:r.remaining)!==null&&n!==void 0?n:null,lastKnownResetDate:(0,U0.mapNullable)((a=this._parameters)===null||a===void 0?void 0:a.resetsAt,s=>new Date(s))}}async _runRequestBatch(e){this._logger.trace(`runRequestBatch start specs:${e.length}`),this._batchRunning=!0,this._parameters&&this._logger.debug(`Remaining requests: ${this._parameters.remaining}`),this._logger.debug(`Doing ${e.length} requests, new queue length is ${this._queue.length}`);let t=e.map(async s=>{let{req:o,resolve:c,reject:d}=s;try{let h=await this.doRequest(o),b=this.needsToRetryAfter(h);if(b!==null)throw this._queue.unshift(s),this._logger.info(`Retrying after ${b} ms`),new $y.RetryAfterError(b);let q=this.getParametersFromResponse(h);return c(h),q}catch(h){if(h instanceof $y.RetryAfterError)throw h;d(h);return}}),r=await Promise.allSettled(t),n=r.filter(s=>s.status==="rejected"),a=Date.now();if(n.length){this._logger.trace("runRequestBatch some rejected");let o=Math.max(a,...n.map(c=>c.reason.retryAt))-a;this._logger.warn(`Waiting for ${o} ms because the rate limit was exceeded`),this._nextBatchTimer=setTimeout(()=>{this._parameters=void 0,this._runNextBatch()},o)}else{this._logger.trace("runRequestBatch none rejected");let s=r.filter(o=>o.status==="fulfilled"&&o.value!==void 0).map(o=>o.value).reduce((o,c)=>o?c.remaining<o.remaining?c:o:c,void 0);if(this._batchRunning=!1,s)if(this._parameters=s,s.resetsAt<a||s.remaining>0)this._logger.trace("runRequestBatch canRunMore"),this._runNextBatch();else{let o=s.resetsAt-a;this._logger.trace(`runRequestBatch delay:${o}`),this._logger.warn(`Waiting for ${o} ms because the rate limit was reached`),this._queue=this._queue.filter(c=>{switch(c.limitReachedBehavior){case"enqueue":return!0;case"null":return c.resolve(null),!1;case"throw":return c.reject(new B0.RateLimitReachedError("Request removed from queue because the rate limit was reached")),!1;default:throw new Error("this should never happen")}}),this._nextBatchTimer=setTimeout(()=>{this._parameters=void 0,this._runNextBatch()},o)}}this._logger.trace("runRequestBatch end")}_runNextBatch(){if(this._paused)return;this._logger.trace("runNextBatch start"),this._nextBatchTimer&&(clearTimeout(this._nextBatchTimer),this._nextBatchTimer=void 0);let e=this._parameters?Math.min(this._parameters.remaining,this._parameters.limit/10):1,t=this._queue.splice(0,e);t.length&&this._runRequestBatch(t),this._logger.trace("runNextBatch end")}};Vs.ResponseBasedRateLimiter=Ac});var zy=l($s=>{"use strict";Object.defineProperty($s,"__esModule",{value:!0});$s.PartitionedRateLimiter=void 0;var O0=Dc(),Ic=class{constructor(e){this._children=new Map,this._paused=!1,this._partitionKeyCallback=e.getPartitionKey,this._createChildCallback=e.createChild}async request(e,t){let r=this._partitionKeyCallback(e);return await this._getChild(r).request(e,t)}clear(){for(let e of this._children.values())e.clear()}pause(){this._paused=!0;for(let e of this._children.values())e.pause()}resume(){this._paused=!1;for(let e of this._children.values())e.resume()}getChildStats(e){if(!this._children.has(e))return null;let t=this._children.get(e);return t instanceof O0.ResponseBasedRateLimiter?t.stats:null}_getChild(e){if(this._children.has(e))return this._children.get(e);let t=this._createChildCallback(e);return this._paused&&t.pause(),this._children.set(e,t),t}};$s.PartitionedRateLimiter=Ic});var Jy=l(zs=>{"use strict";Object.defineProperty(zs,"__esModule",{value:!0});zs.PartitionedTimeBasedRateLimiter=void 0;var j0=di(),k0=hi(),Ky=Ns(),Tc=class{constructor({logger:e,bucketSize:t,timeFrame:r,doRequest:n,getPartitionKey:a}){this._partitionedQueue=new Map,this._usedFromBucket=new Map,this._counterTimers=new Set,this._paused=!1,this._destroyed=!1,this._logger=(0,j0.createLogger)({name:"rate-limiter",emoji:!0,...e}),this._bucketSize=t,this._timeFrame=r,this._callback=n,this._partitionKeyCallback=a}async request(e,t){return await new Promise((r,n)=>{var a,s;if(this._destroyed){n(new Ky.RateLimiterDestroyedError("Rate limiter was destroyed"));return}let o={req:e,resolve:r,reject:n,limitReachedBehavior:(a=t?.limitReachedBehavior)!==null&&a!==void 0?a:"enqueue"},c=this._partitionKeyCallback(e),d=(s=this._usedFromBucket.get(c))!==null&&s!==void 0?s:0;if(d>=this._bucketSize||this._paused)switch(o.limitReachedBehavior){case"enqueue":{let h=this._getPartitionedQueue(c);h.push(o),d+h.length>=this._bucketSize?this._logger.warn(`Rate limit of ${this._bucketSize} for ${c?`partition ${c}`:"default partition"} was reached, waiting for ${this._paused?"the limiter to be unpaused":"a free bucket entry"}; queue size is ${h.length}`):this._logger.info(`Enqueueing request for ${c?`partition ${c}`:"default partition"} because the rate limiter is paused; queue size is ${h.length}`);break}case"null":{o.resolve(null),this._paused?this._logger.info(`Returning null for request for ${c?`partition ${c}`:"default partition"} because the rate limiter is paused`):this._logger.warn(`Rate limit of ${this._bucketSize} for ${c?`partition ${c}`:"default partition"} was reached, dropping request and returning null`);break}case"throw":{o.reject(new k0.RateLimitReachedError(`Request dropped because ${this._paused?"the rate limiter is paused":`the rate limit for ${c?`partition ${c}`:"default partition"} was reached`}`));break}default:throw new Error("this should never happen")}else this._runRequest(o,c)})}clear(){this._partitionedQueue.clear()}pause(){this._paused=!0}resume(){this._paused=!1;for(let e of this._partitionedQueue.keys())this._runNextRequest(e)}destroy(){this._paused=!1,this._destroyed=!0,this._counterTimers.forEach(e=>{clearTimeout(e)});for(let e of this._partitionedQueue.values())for(let t of e)t.reject(new Ky.RateLimiterDestroyedError("Rate limiter was destroyed"));this._partitionedQueue.clear()}_getPartitionedQueue(e){if(this._partitionedQueue.has(e))return this._partitionedQueue.get(e);let t=[];return this._partitionedQueue.set(e,t),t}async _runRequest(e,t){var r;let n=this._getPartitionedQueue(t);this._logger.debug(`doing a request for ${t?`partition ${t}`:"default partition"}, new queue length is ${n.length}`),this._usedFromBucket.set(t,((r=this._usedFromBucket.get(t))!==null&&r!==void 0?r:0)+1);let{req:a,resolve:s,reject:o}=e;try{s(await this._callback(a))}catch(c){o(c)}finally{let c=setTimeout(()=>{this._counterTimers.delete(c);let d=this._usedFromBucket.get(t)-1;this._usedFromBucket.set(t,d),n.length&&d<this._bucketSize&&this._runNextRequest(t)},this._timeFrame);this._counterTimers.add(c)}}_runNextRequest(e){if(this._paused)return;let r=this._getPartitionedQueue(e).shift();r&&this._runRequest(r,e)}};zs.PartitionedTimeBasedRateLimiter=Tc});var Uc=l(Ks=>{"use strict";Object.defineProperty(Ks,"__esModule",{value:!0});Ks.TimeBasedRateLimiter=void 0;var M0=di(),L0=hi(),Zy=Ns(),Rc=class{constructor({logger:e,bucketSize:t,timeFrame:r,doRequest:n}){this._queue=[],this._usedFromBucket=0,this._counterTimers=new Set,this._paused=!1,this._destroyed=!1,this._logger=(0,M0.createLogger)({name:"rate-limiter",emoji:!0,...e}),this._bucketSize=t,this._timeFrame=r,this._callback=n}async request(e,t){return await new Promise((r,n)=>{var a;if(this._destroyed){n(new Zy.RateLimiterDestroyedError("Rate limiter was destroyed"));return}let s={req:e,resolve:r,reject:n,limitReachedBehavior:(a=t?.limitReachedBehavior)!==null&&a!==void 0?a:"enqueue"};if(this._usedFromBucket>=this._bucketSize||this._paused)switch(s.limitReachedBehavior){case"enqueue":{this._queue.push(s),this._usedFromBucket+this._queue.length>=this._bucketSize?this._logger.warn(`Rate limit of ${this._bucketSize} was reached, waiting for ${this._paused?"the limiter to be unpaused":"a free bucket entry"}; queue size is ${this._queue.length}`):this._logger.info(`Enqueueing request because the rate limiter is paused; queue size is ${this._queue.length}`);break}case"null":{s.resolve(null),this._logger.warn(`Rate limit of ${this._bucketSize} was reached, dropping request and returning null`),this._paused?this._logger.info("Returning null for request because the rate limiter is paused"):this._logger.warn(`Rate limit of ${this._bucketSize} was reached, dropping request and returning null`);break}case"throw":{s.reject(new L0.RateLimitReachedError(`Request dropped because ${this._paused?"the rate limiter is paused":"the rate limit was reached"}`));break}default:throw new Error("this should never happen")}else this._runRequest(s)})}clear(){this._queue=[]}pause(){this._paused=!0}resume(){this._paused=!1,this._runNextRequest()}destroy(){this._paused=!1,this._destroyed=!0,this._counterTimers.forEach(e=>{clearTimeout(e)});for(let e of this._queue)e.reject(new Zy.RateLimiterDestroyedError("Rate limiter was destroyed"));this._queue=[]}async _runRequest(e){this._logger.debug(`doing a request, new queue length is ${this._queue.length}`),this._usedFromBucket+=1;let{req:t,resolve:r,reject:n}=e;try{r(await this._callback(t))}catch(a){n(a)}finally{let a=setTimeout(()=>{this._counterTimers.delete(a),this._usedFromBucket-=1,this._queue.length&&this._usedFromBucket<this._bucketSize&&this._runNextRequest()},this._timeFrame);this._counterTimers.add(a)}}_runNextRequest(){if(this._paused)return;let e=this._queue.shift();e&&this._runRequest(e)}};Ks.TimeBasedRateLimiter=Rc});var Xy=l(Js=>{"use strict";Object.defineProperty(Js,"__esModule",{value:!0});Js.TimedPassthruRateLimiter=void 0;var F0=Uc(),Bc=class extends F0.TimeBasedRateLimiter{constructor(e,t){super({...t,async doRequest(r,n){return await e.request(r,n)}})}};Js.TimedPassthruRateLimiter=Bc});var Zs=l(ie=>{"use strict";Object.defineProperty(ie,"__esModule",{value:!0});ie.TimedPassthruRateLimiter=ie.TimeBasedRateLimiter=ie.ResponseBasedRateLimiter=ie.PartitionedTimeBasedRateLimiter=ie.PartitionedRateLimiter=ie.NullRateLimiter=ie.RetryAfterError=ie.RateLimitReachedError=ie.RateLimiterDestroyedError=void 0;var N0=Ns();Object.defineProperty(ie,"RateLimiterDestroyedError",{enumerable:!0,get:function(){return N0.RateLimiterDestroyedError}});var Q0=hi();Object.defineProperty(ie,"RateLimitReachedError",{enumerable:!0,get:function(){return Q0.RateLimitReachedError}});var G0=Ec();Object.defineProperty(ie,"RetryAfterError",{enumerable:!0,get:function(){return G0.RetryAfterError}});var W0=Vy();Object.defineProperty(ie,"NullRateLimiter",{enumerable:!0,get:function(){return W0.NullRateLimiter}});var V0=zy();Object.defineProperty(ie,"PartitionedRateLimiter",{enumerable:!0,get:function(){return V0.PartitionedRateLimiter}});var $0=Jy();Object.defineProperty(ie,"PartitionedTimeBasedRateLimiter",{enumerable:!0,get:function(){return $0.PartitionedTimeBasedRateLimiter}});var z0=Dc();Object.defineProperty(ie,"ResponseBasedRateLimiter",{enumerable:!0,get:function(){return z0.ResponseBasedRateLimiter}});var K0=Uc();Object.defineProperty(ie,"TimeBasedRateLimiter",{enumerable:!0,get:function(){return K0.TimeBasedRateLimiter}});var J0=Xy();Object.defineProperty(ie,"TimedPassthruRateLimiter",{enumerable:!0,get:function(){return J0.TimedPassthruRateLimiter}})});var tf=l((mt,ef)=>{var Yy=typeof self<"u"?self:mt,Xs=function(){function i(){this.fetch=!1,this.DOMException=Yy.DOMException}return i.prototype=Yy,new i}();(function(i){var e=function(t){var r={searchParams:"URLSearchParams"in i,iterable:"Symbol"in i&&"iterator"in Symbol,blob:"FileReader"in i&&"Blob"in i&&function(){try{return new Blob,!0}catch{return!1}}(),formData:"FormData"in i,arrayBuffer:"ArrayBuffer"in i};function n(f){return f&&DataView.prototype.isPrototypeOf(f)}if(r.arrayBuffer)var a=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],s=ArrayBuffer.isView||function(f){return f&&a.indexOf(Object.prototype.toString.call(f))>-1};function o(f){if(typeof f!="string"&&(f=String(f)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(f))throw new TypeError("Invalid character in header field name");return f.toLowerCase()}function c(f){return typeof f!="string"&&(f=String(f)),f}function d(f){var v={next:function(){var T=f.shift();return{done:T===void 0,value:T}}};return r.iterable&&(v[Symbol.iterator]=function(){return v}),v}function h(f){this.map={},f instanceof h?f.forEach(function(v,T){this.append(T,v)},this):Array.isArray(f)?f.forEach(function(v){this.append(v[0],v[1])},this):f&&Object.getOwnPropertyNames(f).forEach(function(v){this.append(v,f[v])},this)}h.prototype.append=function(f,v){f=o(f),v=c(v);var T=this.map[f];this.map[f]=T?T+", "+v:v},h.prototype.delete=function(f){delete this.map[o(f)]},h.prototype.get=function(f){return f=o(f),this.has(f)?this.map[f]:null},h.prototype.has=function(f){return this.map.hasOwnProperty(o(f))},h.prototype.set=function(f,v){this.map[o(f)]=c(v)},h.prototype.forEach=function(f,v){for(var T in this.map)this.map.hasOwnProperty(T)&&f.call(v,this.map[T],T,this)},h.prototype.keys=function(){var f=[];return this.forEach(function(v,T){f.push(T)}),d(f)},h.prototype.values=function(){var f=[];return this.forEach(function(v){f.push(v)}),d(f)},h.prototype.entries=function(){var f=[];return this.forEach(function(v,T){f.push([T,v])}),d(f)},r.iterable&&(h.prototype[Symbol.iterator]=h.prototype.entries);function b(f){if(f.bodyUsed)return Promise.reject(new TypeError("Already read"));f.bodyUsed=!0}function q(f){return new Promise(function(v,T){f.onload=function(){v(f.result)},f.onerror=function(){T(f.error)}})}function C(f){var v=new FileReader,T=q(v);return v.readAsArrayBuffer(f),T}function x(f){var v=new FileReader,T=q(v);return v.readAsText(f),T}function E(f){for(var v=new Uint8Array(f),T=new Array(v.length),xe=0;xe<v.length;xe++)T[xe]=String.fromCharCode(v[xe]);return T.join("")}function w(f){if(f.slice)return f.slice(0);var v=new Uint8Array(f.byteLength);return v.set(new Uint8Array(f)),v.buffer}function U(){return this.bodyUsed=!1,this._initBody=function(f){this._bodyInit=f,f?typeof f=="string"?this._bodyText=f:r.blob&&Blob.prototype.isPrototypeOf(f)?this._bodyBlob=f:r.formData&&FormData.prototype.isPrototypeOf(f)?this._bodyFormData=f:r.searchParams&&URLSearchParams.prototype.isPrototypeOf(f)?this._bodyText=f.toString():r.arrayBuffer&&r.blob&&n(f)?(this._bodyArrayBuffer=w(f.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):r.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(f)||s(f))?this._bodyArrayBuffer=w(f):this._bodyText=f=Object.prototype.toString.call(f):this._bodyText="",this.headers.get("content-type")||(typeof f=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):r.searchParams&&URLSearchParams.prototype.isPrototypeOf(f)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},r.blob&&(this.blob=function(){var f=b(this);if(f)return f;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?b(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(C)}),this.text=function(){var f=b(this);if(f)return f;if(this._bodyBlob)return x(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(E(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},r.formData&&(this.formData=function(){return this.text().then(be)}),this.json=function(){return this.text().then(JSON.parse)},this}var W=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function V(f){var v=f.toUpperCase();return W.indexOf(v)>-1?v:f}function $(f,v){v=v||{};var T=v.body;if(f instanceof $){if(f.bodyUsed)throw new TypeError("Already read");this.url=f.url,this.credentials=f.credentials,v.headers||(this.headers=new h(f.headers)),this.method=f.method,this.mode=f.mode,this.signal=f.signal,!T&&f._bodyInit!=null&&(T=f._bodyInit,f.bodyUsed=!0)}else this.url=String(f);if(this.credentials=v.credentials||this.credentials||"same-origin",(v.headers||!this.headers)&&(this.headers=new h(v.headers)),this.method=V(v.method||this.method||"GET"),this.mode=v.mode||this.mode||null,this.signal=v.signal||this.signal,this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&T)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(T)}$.prototype.clone=function(){return new $(this,{body:this._bodyInit})};function be(f){var v=new FormData;return f.trim().split("&").forEach(function(T){if(T){var xe=T.split("="),ye=xe.shift().replace(/\+/g," "),L=xe.join("=").replace(/\+/g," ");v.append(decodeURIComponent(ye),decodeURIComponent(L))}}),v}function rt(f){var v=new h,T=f.replace(/\r?\n[\t ]+/g," ");return T.split(/\r?\n/).forEach(function(xe){var ye=xe.split(":"),L=ye.shift().trim();if(L){var Va=ye.join(":").trim();v.append(L,Va)}}),v}U.call($.prototype);function de(f,v){v||(v={}),this.type="default",this.status=v.status===void 0?200:v.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in v?v.statusText:"OK",this.headers=new h(v.headers),this.url=v.url||"",this._initBody(f)}U.call(de.prototype),de.prototype.clone=function(){return new de(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new h(this.headers),url:this.url})},de.error=function(){var f=new de(null,{status:0,statusText:""});return f.type="error",f};var mr=[301,302,303,307,308];de.redirect=function(f,v){if(mr.indexOf(v)===-1)throw new RangeError("Invalid status code");return new de(null,{status:v,headers:{location:f}})},t.DOMException=i.DOMException;try{new t.DOMException}catch{t.DOMException=function(v,T){this.message=v,this.name=T;var xe=Error(v);this.stack=xe.stack},t.DOMException.prototype=Object.create(Error.prototype),t.DOMException.prototype.constructor=t.DOMException}function _r(f,v){return new Promise(function(T,xe){var ye=new $(f,v);if(ye.signal&&ye.signal.aborted)return xe(new t.DOMException("Aborted","AbortError"));var L=new XMLHttpRequest;function Va(){L.abort()}L.onload=function(){var ai={status:L.status,statusText:L.statusText,headers:rt(L.getAllResponseHeaders()||"")};ai.url="responseURL"in L?L.responseURL:ai.headers.get("X-Request-URL");var Tu="response"in L?L.response:L.responseText;T(new de(Tu,ai))},L.onerror=function(){xe(new TypeError("Network request failed"))},L.ontimeout=function(){xe(new TypeError("Network request failed"))},L.onabort=function(){xe(new t.DOMException("Aborted","AbortError"))},L.open(ye.method,ye.url,!0),ye.credentials==="include"?L.withCredentials=!0:ye.credentials==="omit"&&(L.withCredentials=!1),"responseType"in L&&r.blob&&(L.responseType="blob"),ye.headers.forEach(function(ai,Tu){L.setRequestHeader(Tu,ai)}),ye.signal&&(ye.signal.addEventListener("abort",Va),L.onreadystatechange=function(){L.readyState===4&&ye.signal.removeEventListener("abort",Va)}),L.send(typeof ye._bodyInit>"u"?null:ye._bodyInit)})}return _r.polyfill=!0,i.fetch||(i.fetch=_r,i.Headers=h,i.Request=$,i.Response=de),t.Headers=h,t.Request=$,t.Response=de,t.fetch=_r,Object.defineProperty(t,"__esModule",{value:!0}),t}({})})(Xs);Xs.fetch.ponyfill=!0;delete Xs.fetch.polyfill;var qr=Xs;mt=qr.fetch;mt.default=qr.fetch;mt.fetch=qr.fetch;mt.Headers=qr.Headers;mt.Request=qr.Request;mt.Response=qr.Response;ef.exports=mt});var Ys=l((ZU,nf)=>{"use strict";var Oc=Object.prototype.hasOwnProperty,Er=Array.isArray,at=function(){for(var i=[],e=0;e<256;++e)i.push("%"+((e<16?"0":"")+e.toString(16)).toUpperCase());return i}(),Z0=function(e){for(;e.length>1;){var t=e.pop(),r=t.obj[t.prop];if(Er(r)){for(var n=[],a=0;a<r.length;++a)typeof r[a]<"u"&&n.push(r[a]);t.obj[t.prop]=n}}},rf=function(e,t){for(var r=t&&t.plainObjects?Object.create(null):{},n=0;n<e.length;++n)typeof e[n]<"u"&&(r[n]=e[n]);return r},X0=function i(e,t,r){if(!t)return e;if(typeof t!="object"){if(Er(e))e.push(t);else if(e&&typeof e=="object")(r&&(r.plainObjects||r.allowPrototypes)||!Oc.call(Object.prototype,t))&&(e[t]=!0);else return[e,t];return e}if(!e||typeof e!="object")return[e].concat(t);var n=e;return Er(e)&&!Er(t)&&(n=rf(e,r)),Er(e)&&Er(t)?(t.forEach(function(a,s){if(Oc.call(e,s)){var o=e[s];o&&typeof o=="object"&&a&&typeof a=="object"?e[s]=i(o,a,r):e.push(a)}else e[s]=a}),e):Object.keys(t).reduce(function(a,s){var o=t[s];return Oc.call(a,s)?a[s]=i(a[s],o,r):a[s]=o,a},n)},Y0=function(e,t){return Object.keys(t).reduce(function(r,n){return r[n]=t[n],r},e)},eH=function(i,e,t){var r=i.replace(/\+/g," ");if(t==="iso-8859-1")return r.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(r)}catch{return r}},tH=function(e,t,r){if(e.length===0)return e;var n=e;if(typeof e=="symbol"?n=Symbol.prototype.toString.call(e):typeof e!="string"&&(n=String(e)),r==="iso-8859-1")return escape(n).replace(/%u[0-9a-f]{4}/gi,function(c){return"%26%23"+parseInt(c.slice(2),16)+"%3B"});for(var a="",s=0;s<n.length;++s){var o=n.charCodeAt(s);if(o===45||o===46||o===95||o===126||o>=48&&o<=57||o>=65&&o<=90||o>=97&&o<=122){a+=n.charAt(s);continue}if(o<128){a=a+at[o];continue}if(o<2048){a=a+(at[192|o>>6]+at[128|o&63]);continue}if(o<55296||o>=57344){a=a+(at[224|o>>12]+at[128|o>>6&63]+at[128|o&63]);continue}s+=1,o=65536+((o&1023)<<10|n.charCodeAt(s)&1023),a+=at[240|o>>18]+at[128|o>>12&63]+at[128|o>>6&63]+at[128|o&63]}return a},rH=function(e){for(var t=[{obj:{o:e},prop:"o"}],r=[],n=0;n<t.length;++n)for(var a=t[n],s=a.obj[a.prop],o=Object.keys(s),c=0;c<o.length;++c){var d=o[c],h=s[d];typeof h=="object"&&h!==null&&r.indexOf(h)===-1&&(t.push({obj:s,prop:d}),r.push(h))}return Z0(t),e},iH=function(e){return Object.prototype.toString.call(e)==="[object RegExp]"},nH=function(e){return!e||typeof e!="object"?!1:!!(e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer(e))},aH=function(e,t){return[].concat(e,t)};nf.exports={arrayToObject:rf,assign:Y0,combine:aH,compact:rH,decode:eH,encode:tH,isBuffer:nH,isRegExp:iH,merge:X0}});var jc=l((XU,sf)=>{"use strict";var sH=String.prototype.replace,oH=/%20/g,lH=Ys(),af={RFC1738:"RFC1738",RFC3986:"RFC3986"};sf.exports=lH.assign({default:af.RFC3986,formatters:{RFC1738:function(i){return sH.call(i,oH,"+")},RFC3986:function(i){return String(i)}}},af)});var df=l((YU,cf)=>{"use strict";var uf=Ys(),pi=jc(),uH=Object.prototype.hasOwnProperty,of={brackets:function(e){return e+"[]"},comma:"comma",indices:function(e,t){return e+"["+t+"]"},repeat:function(e){return e}},Pr=Array.isArray,cH=Array.prototype.push,kc=function(i,e){cH.apply(i,Pr(e)?e:[e])},dH=Date.prototype.toISOString,lf=pi.default,ve={addQueryPrefix:!1,allowDots:!1,charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encoder:uf.encode,encodeValuesOnly:!1,format:lf,formatter:pi.formatters[lf],indices:!1,serializeDate:function(e){return dH.call(e)},skipNulls:!1,strictNullHandling:!1},hH=function(e){return typeof e=="string"||typeof e=="number"||typeof e=="boolean"||typeof e=="symbol"||typeof e=="bigint"},pH=function i(e,t,r,n,a,s,o,c,d,h,b,q,C){var x=e;if(typeof o=="function"?x=o(t,x):x instanceof Date?x=h(x):r==="comma"&&Pr(x)&&(x=x.join(",")),x===null){if(n)return s&&!q?s(t,ve.encoder,C,"key"):t;x=""}if(hH(x)||uf.isBuffer(x)){if(s){var E=q?t:s(t,ve.encoder,C,"key");return[b(E)+"="+b(s(x,ve.encoder,C,"value"))]}return[b(t)+"="+b(String(x))]}var w=[];if(typeof x>"u")return w;var U;if(Pr(o))U=o;else{var W=Object.keys(x);U=c?W.sort(c):W}for(var V=0;V<U.length;++V){var $=U[V];a&&x[$]===null||(Pr(x)?kc(w,i(x[$],typeof r=="function"?r(t,$):t,r,n,a,s,o,c,d,h,b,q,C)):kc(w,i(x[$],t+(d?"."+$:"["+$+"]"),r,n,a,s,o,c,d,h,b,q,C)))}return w},mH=function(e){if(!e)return ve;if(e.encoder!==null&&e.encoder!==void 0&&typeof e.encoder!="function")throw new TypeError("Encoder has to be a function.");var t=e.charset||ve.charset;if(typeof e.charset<"u"&&e.charset!=="utf-8"&&e.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var r=pi.default;if(typeof e.format<"u"){if(!uH.call(pi.formatters,e.format))throw new TypeError("Unknown format option provided.");r=e.format}var n=pi.formatters[r],a=ve.filter;return(typeof e.filter=="function"||Pr(e.filter))&&(a=e.filter),{addQueryPrefix:typeof e.addQueryPrefix=="boolean"?e.addQueryPrefix:ve.addQueryPrefix,allowDots:typeof e.allowDots>"u"?ve.allowDots:!!e.allowDots,charset:t,charsetSentinel:typeof e.charsetSentinel=="boolean"?e.charsetSentinel:ve.charsetSentinel,delimiter:typeof e.delimiter>"u"?ve.delimiter:e.delimiter,encode:typeof e.encode=="boolean"?e.encode:ve.encode,encoder:typeof e.encoder=="function"?e.encoder:ve.encoder,encodeValuesOnly:typeof e.encodeValuesOnly=="boolean"?e.encodeValuesOnly:ve.encodeValuesOnly,filter:a,formatter:n,serializeDate:typeof e.serializeDate=="function"?e.serializeDate:ve.serializeDate,skipNulls:typeof e.skipNulls=="boolean"?e.skipNulls:ve.skipNulls,sort:typeof e.sort=="function"?e.sort:null,strictNullHandling:typeof e.strictNullHandling=="boolean"?e.strictNullHandling:ve.strictNullHandling}};cf.exports=function(i,e){var t=i,r=mH(e),n,a;typeof r.filter=="function"?(a=r.filter,t=a("",t)):Pr(r.filter)&&(a=r.filter,n=a);var s=[];if(typeof t!="object"||t===null)return"";var o;e&&e.arrayFormat in of?o=e.arrayFormat:e&&"indices"in e?o=e.indices?"indices":"repeat":o="indices";var c=of[o];n||(n=Object.keys(t)),r.sort&&n.sort(r.sort);for(var d=0;d<n.length;++d){var h=n[d];r.skipNulls&&t[h]===null||kc(s,pH(t[h],h,c,r.strictNullHandling,r.skipNulls,r.encode?r.encoder:null,r.filter,r.sort,r.allowDots,r.serializeDate,r.formatter,r.encodeValuesOnly,r.charset))}var b=s.join(r.delimiter),q=r.addQueryPrefix===!0?"?":"";return r.charsetSentinel&&(r.charset==="iso-8859-1"?q+="utf8=%26%2310003%3B&":q+="utf8=%E2%9C%93&"),b.length>0?q+b:""}});var _f=l((eB,mf)=>{"use strict";var mi=Ys(),Mc=Object.prototype.hasOwnProperty,hf=Array.isArray,fe={allowDots:!1,allowPrototypes:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decoder:mi.decode,delimiter:"&",depth:5,ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictNullHandling:!1},_H=function(i){return i.replace(/&#(\d+);/g,function(e,t){return String.fromCharCode(parseInt(t,10))})},pf=function(i,e){return i&&typeof i=="string"&&e.comma&&i.indexOf(",")>-1?i.split(","):i},yH=function(e,t){if(hf(e)){for(var r=[],n=0;n<e.length;n+=1)r.push(t(e[n]));return r}return t(e)},fH="utf8=%26%2310003%3B",gH="utf8=%E2%9C%93",bH=function(e,t){var r={},n=t.ignoreQueryPrefix?e.replace(/^\?/,""):e,a=t.parameterLimit===1/0?void 0:t.parameterLimit,s=n.split(t.delimiter,a),o=-1,c,d=t.charset;if(t.charsetSentinel)for(c=0;c<s.length;++c)s[c].indexOf("utf8=")===0&&(s[c]===gH?d="utf-8":s[c]===fH&&(d="iso-8859-1"),o=c,c=s.length);for(c=0;c<s.length;++c)if(c!==o){var h=s[c],b=h.indexOf("]="),q=b===-1?h.indexOf("="):b+1,C,x;q===-1?(C=t.decoder(h,fe.decoder,d,"key"),x=t.strictNullHandling?null:""):(C=t.decoder(h.slice(0,q),fe.decoder,d,"key"),x=yH(pf(h.slice(q+1),t),function(E){return t.decoder(E,fe.decoder,d,"value")})),x&&t.interpretNumericEntities&&d==="iso-8859-1"&&(x=_H(x)),h.indexOf("[]=")>-1&&(x=hf(x)?[x]:x),Mc.call(r,C)?r[C]=mi.combine(r[C],x):r[C]=x}return r},xH=function(i,e,t,r){for(var n=r?e:pf(e,t),a=i.length-1;a>=0;--a){var s,o=i[a];if(o==="[]"&&t.parseArrays)s=[].concat(n);else{s=t.plainObjects?Object.create(null):{};var c=o.charAt(0)==="["&&o.charAt(o.length-1)==="]"?o.slice(1,-1):o,d=parseInt(c,10);!t.parseArrays&&c===""?s={0:n}:!isNaN(d)&&o!==c&&String(d)===c&&d>=0&&t.parseArrays&&d<=t.arrayLimit?(s=[],s[d]=n):s[c]=n}n=s}return n},wH=function(e,t,r,n){if(e){var a=r.allowDots?e.replace(/\.([^.[]+)/g,"[$1]"):e,s=/(\[[^[\]]*])/,o=/(\[[^[\]]*])/g,c=r.depth>0&&s.exec(a),d=c?a.slice(0,c.index):a,h=[];if(d){if(!r.plainObjects&&Mc.call(Object.prototype,d)&&!r.allowPrototypes)return;h.push(d)}for(var b=0;r.depth>0&&(c=o.exec(a))!==null&&b<r.depth;){if(b+=1,!r.plainObjects&&Mc.call(Object.prototype,c[1].slice(1,-1))&&!r.allowPrototypes)return;h.push(c[1])}return c&&h.push("["+a.slice(c.index)+"]"),xH(h,t,r,n)}},vH=function(e){if(!e)return fe;if(e.decoder!==null&&e.decoder!==void 0&&typeof e.decoder!="function")throw new TypeError("Decoder has to be a function.");if(typeof e.charset<"u"&&e.charset!=="utf-8"&&e.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var t=typeof e.charset>"u"?fe.charset:e.charset;return{allowDots:typeof e.allowDots>"u"?fe.allowDots:!!e.allowDots,allowPrototypes:typeof e.allowPrototypes=="boolean"?e.allowPrototypes:fe.allowPrototypes,arrayLimit:typeof e.arrayLimit=="number"?e.arrayLimit:fe.arrayLimit,charset:t,charsetSentinel:typeof e.charsetSentinel=="boolean"?e.charsetSentinel:fe.charsetSentinel,comma:typeof e.comma=="boolean"?e.comma:fe.comma,decoder:typeof e.decoder=="function"?e.decoder:fe.decoder,delimiter:typeof e.delimiter=="string"||mi.isRegExp(e.delimiter)?e.delimiter:fe.delimiter,depth:typeof e.depth=="number"||e.depth===!1?+e.depth:fe.depth,ignoreQueryPrefix:e.ignoreQueryPrefix===!0,interpretNumericEntities:typeof e.interpretNumericEntities=="boolean"?e.interpretNumericEntities:fe.interpretNumericEntities,parameterLimit:typeof e.parameterLimit=="number"?e.parameterLimit:fe.parameterLimit,parseArrays:e.parseArrays!==!1,plainObjects:typeof e.plainObjects=="boolean"?e.plainObjects:fe.plainObjects,strictNullHandling:typeof e.strictNullHandling=="boolean"?e.strictNullHandling:fe.strictNullHandling}};mf.exports=function(i,e){var t=vH(e);if(i===""||i===null||typeof i>"u")return t.plainObjects?Object.create(null):{};for(var r=typeof i=="string"?bH(i,t):i,n=t.plainObjects?Object.create(null):{},a=Object.keys(r),s=0;s<a.length;++s){var o=a[s],c=wH(o,r[o],t,typeof i=="string");n=mi.merge(n,c,t)}return mi.compact(n)}});var Lc=l((tB,yf)=>{"use strict";var SH=df(),HH=_f(),CH=jc();yf.exports={formats:CH,parse:HH,stringify:SH}});var gf=l(ff=>{function _t(i){if(typeof i!="object")return i;var e,t,r=Object.prototype.toString.call(i);if(r==="[object Object]"){if(i.constructor!==Object&&typeof i.constructor=="function"){t=new i.constructor;for(e in i)i.hasOwnProperty(e)&&t[e]!==i[e]&&(t[e]=_t(i[e]))}else{t={};for(e in i)e==="__proto__"?Object.defineProperty(t,e,{value:_t(i[e]),configurable:!0,enumerable:!0,writable:!0}):t[e]=_t(i[e])}return t}if(r==="[object Array]"){for(e=i.length,t=Array(e);e--;)t[e]=_t(i[e]);return t}return r==="[object Set]"?(t=new Set,i.forEach(function(n){t.add(_t(n))}),t):r==="[object Map]"?(t=new Map,i.forEach(function(n,a){t.set(_t(a),_t(n))}),t):r==="[object Date]"?new Date(+i):r==="[object RegExp]"?(t=new RegExp(i.source,i.flags),t.lastIndex=i.lastIndex,t):r==="[object DataView]"?new i.constructor(_t(i.buffer)):r==="[object ArrayBuffer]"?i.slice(0):r.slice(-6)==="Array]"?new i.constructor(i):i}ff.klona=_t});var Nc=l(st=>{"use strict";Object.defineProperty(st,"__esModule",{value:!0});st.DataObject=st.getRawData=st.rawDataSymbol=void 0;var qH=gf();st.rawDataSymbol=Symbol("twurpleRawData");function EH(i){return(0,qH.klona)(i[st.rawDataSymbol])}st.getRawData=EH;var Fc=class{constructor(e){this[st.rawDataSymbol]=e}};st.DataObject=Fc});var to=l(eo=>{"use strict";Object.defineProperty(eo,"__esModule",{value:!0});eo.CustomError=void 0;var Qc=class extends Error{constructor(e,t){var r;super(e,t),Object.setPrototypeOf(this,new.target.prototype),(r=Error.captureStackTrace)===null||r===void 0||r.call(Error,this,new.target.constructor)}get name(){return this.constructor.name}};eo.CustomError=Qc});var Wc=l(ro=>{"use strict";Object.defineProperty(ro,"__esModule",{value:!0});ro.RelationAssertionError=void 0;var PH=to(),Gc=class extends PH.CustomError{constructor(){super("Relation returned null - this may be a library bug or a race condition in your own code")}};ro.RelationAssertionError=Gc});var bf=l(io=>{"use strict";Object.defineProperty(io,"__esModule",{value:!0});io.checkRelationAssertion=void 0;var AH=Wc();function DH(i){if(i==null)throw new AH.RelationAssertionError;return i}io.checkRelationAssertion=DH});var Vc=l(no=>{"use strict";Object.defineProperty(no,"__esModule",{value:!0});no.rtfm=void 0;function IH(i,e,t){return r=>{let n=t?function(){return`[${e}#${this[t]} - please check https://twurple.js.org/reference/${i}/classes/${e}.html for available properties]`}:function(){return`[${e} - please check https://twurple.js.org/reference/${i}/classes/${e}.html for available properties]`};Object.defineProperty(r.prototype,Symbol.for("nodejs.util.inspect.custom"),{value:n,enumerable:!1})}}no.rtfm=IH});var xf=l(_i=>{"use strict";Object.defineProperty(_i,"__esModule",{value:!0});_i.HelixExtension=void 0;var TH=(y(),g(_)),A=Nc(),RH=Vc(),$c=class extends A.DataObject{get authorName(){return this[A.rawDataSymbol].author_name}get bitsEnabled(){return this[A.rawDataSymbol].bits_enabled}get installable(){return this[A.rawDataSymbol].can_install}get configurationLocation(){return this[A.rawDataSymbol].configuration_location}get description(){return this[A.rawDataSymbol].description}get tosUrl(){return this[A.rawDataSymbol].eula_tos_url}get hasChatSupport(){return this[A.rawDataSymbol].has_chat_support}get iconUrl(){return this[A.rawDataSymbol].icon_url}getIconUrl(e){return this[A.rawDataSymbol].icon_urls[e]}get id(){return this[A.rawDataSymbol].id}get name(){return this[A.rawDataSymbol].name}get privacyPolicyUrl(){return this[A.rawDataSymbol].privacy_policy_url}get requestsIdentityLink(){return this[A.rawDataSymbol].request_identity_link}get screenshotUrls(){return this[A.rawDataSymbol].screenshot_urls}get state(){return this[A.rawDataSymbol].state}get subscriptionsSupportLevel(){return this[A.rawDataSymbol].subscriptions_support_level}get summary(){return this[A.rawDataSymbol].summary}get supportEmail(){return this[A.rawDataSymbol].support_email}get version(){return this[A.rawDataSymbol].version}get viewerSummary(){return this[A.rawDataSymbol].viewer_summary}get viewerSummery(){return this[A.rawDataSymbol].viewer_summary}get allowedConfigUrls(){return this[A.rawDataSymbol].allowlisted_config_urls}get allowedPanelUrls(){return this[A.rawDataSymbol].allowlisted_panel_urls}get mobileViewerUrl(){var e,t;return(t=(e=this[A.rawDataSymbol].views.mobile)===null||e===void 0?void 0:e.viewer_url)!==null&&t!==void 0?t:null}get panelViewerUrl(){var e,t;return(t=(e=this[A.rawDataSymbol].views.panel)===null||e===void 0?void 0:e.viewer_url)!==null&&t!==void 0?t:null}get panelHeight(){var e,t;return(t=(e=this[A.rawDataSymbol].views.panel)===null||e===void 0?void 0:e.height)!==null&&t!==void 0?t:null}get panelCanLinkExternalContent(){var e,t;return(t=(e=this[A.rawDataSymbol].views.panel)===null||e===void 0?void 0:e.can_link_external_content)!==null&&t!==void 0?t:null}get overlayViewerUrl(){var e,t;return(t=(e=this[A.rawDataSymbol].views.video_overlay)===null||e===void 0?void 0:e.viewer_url)!==null&&t!==void 0?t:null}get overlayCanLinkExternalContent(){var e,t;return(t=(e=this[A.rawDataSymbol].views.video_overlay)===null||e===void 0?void 0:e.can_link_external_content)!==null&&t!==void 0?t:null}get componentViewerUrl(){var e,t;return(t=(e=this[A.rawDataSymbol].views.component)===null||e===void 0?void 0:e.viewer_url)!==null&&t!==void 0?t:null}get componentAspectWidth(){var e,t;return(t=(e=this[A.rawDataSymbol].views.component)===null||e===void 0?void 0:e.aspect_width)!==null&&t!==void 0?t:null}get componentAspectHeight(){var e,t;return(t=(e=this[A.rawDataSymbol].views.component)===null||e===void 0?void 0:e.aspect_height)!==null&&t!==void 0?t:null}get componentAspectRatioX(){var e,t;return(t=(e=this[A.rawDataSymbol].views.component)===null||e===void 0?void 0:e.aspect_ratio_x)!==null&&t!==void 0?t:null}get componentAspectRatioY(){var e,t;return(t=(e=this[A.rawDataSymbol].views.component)===null||e===void 0?void 0:e.aspect_ratio_y)!==null&&t!==void 0?t:null}get componentAutoScales(){var e,t;return(t=(e=this[A.rawDataSymbol].views.component)===null||e===void 0?void 0:e.autoscale)!==null&&t!==void 0?t:null}get componentScalePixels(){var e,t;return(t=(e=this[A.rawDataSymbol].views.component)===null||e===void 0?void 0:e.scale_pixels)!==null&&t!==void 0?t:null}get componentTargetHeight(){var e,t;return(t=(e=this[A.rawDataSymbol].views.component)===null||e===void 0?void 0:e.target_height)!==null&&t!==void 0?t:null}get componentSize(){var e,t;return(t=(e=this[A.rawDataSymbol].views.component)===null||e===void 0?void 0:e.size)!==null&&t!==void 0?t:null}get componentZoom(){var e,t;return(t=(e=this[A.rawDataSymbol].views.component)===null||e===void 0?void 0:e.zoom)!==null&&t!==void 0?t:null}get componentZoomPixels(){var e,t;return(t=(e=this[A.rawDataSymbol].views.component)===null||e===void 0?void 0:e.zoom_pixels)!==null&&t!==void 0?t:null}get componentCanLinkExternalContent(){var e,t;return(t=(e=this[A.rawDataSymbol].views.component)===null||e===void 0?void 0:e.can_link_external_content)!==null&&t!==void 0?t:null}get configViewerUrl(){var e,t;return(t=(e=this[A.rawDataSymbol].views.config)===null||e===void 0?void 0:e.viewer_url)!==null&&t!==void 0?t:null}get configCanLinkExternalContent(){var e,t;return(t=(e=this[A.rawDataSymbol].views.config)===null||e===void 0?void 0:e.can_link_external_content)!==null&&t!==void 0?t:null}};_i.HelixExtension=$c;_i.HelixExtension=$c=TH.__decorate([(0,RH.rtfm)("api","HelixExtension","id")],$c)});var wf=l(ao=>{"use strict";Object.defineProperty(ao,"__esModule",{value:!0});ao.HellFreezesOverError=void 0;var UH=to(),zc=class extends UH.CustomError{constructor(e){super(`${e} - this should never happen, please file a bug in the GitHub issue tracker`)}};ao.HellFreezesOverError=zc});var vf=l(Ar=>{"use strict";Object.defineProperty(Ar,"__esModule",{value:!0});Ar.extractUserName=Ar.extractUserId=void 0;function BH(i){return typeof i=="string"?i:typeof i=="number"?i.toString(10):i.id}Ar.extractUserId=BH;function OH(i){return typeof i=="string"?i:i.name}Ar.extractUserName=OH});var p=l(z=>{"use strict";Object.defineProperty(z,"__esModule",{value:!0});z.extractUserName=z.extractUserId=z.RelationAssertionError=z.HellFreezesOverError=z.CustomError=z.HelixExtension=z.rtfm=z.checkRelationAssertion=z.rawDataSymbol=z.getRawData=z.DataObject=void 0;var Kc=Nc();Object.defineProperty(z,"DataObject",{enumerable:!0,get:function(){return Kc.DataObject}});Object.defineProperty(z,"getRawData",{enumerable:!0,get:function(){return Kc.getRawData}});Object.defineProperty(z,"rawDataSymbol",{enumerable:!0,get:function(){return Kc.rawDataSymbol}});var jH=bf();Object.defineProperty(z,"checkRelationAssertion",{enumerable:!0,get:function(){return jH.checkRelationAssertion}});var kH=Vc();Object.defineProperty(z,"rtfm",{enumerable:!0,get:function(){return kH.rtfm}});var MH=xf();Object.defineProperty(z,"HelixExtension",{enumerable:!0,get:function(){return MH.HelixExtension}});var LH=to();Object.defineProperty(z,"CustomError",{enumerable:!0,get:function(){return LH.CustomError}});var FH=wf();Object.defineProperty(z,"HellFreezesOverError",{enumerable:!0,get:function(){return FH.HellFreezesOverError}});var NH=Wc();Object.defineProperty(z,"RelationAssertionError",{enumerable:!0,get:function(){return NH.RelationAssertionError}});var Sf=vf();Object.defineProperty(z,"extractUserId",{enumerable:!0,get:function(){return Sf.extractUserId}});Object.defineProperty(z,"extractUserName",{enumerable:!0,get:function(){return Sf.extractUserName}})});var Zc=l(so=>{"use strict";Object.defineProperty(so,"__esModule",{value:!0});so.HttpStatusCodeError=void 0;var QH=p(),Jc=class extends QH.CustomError{constructor(e,t,r,n,a,s){super(`Encountered HTTP status code ${e}: ${t}

URL: ${r}
Method: ${n}
Body:
${!s&&a.length>150?`${a.slice(0,147)}...`:a}`),this._statusCode=e,this._url=r,this._method=n,this._body=a}get statusCode(){return this._statusCode}get url(){return this._url}get method(){return this._method}get body(){return this._body}};so.HttpStatusCodeError=Jc});var Xc=l(Dr=>{"use strict";Object.defineProperty(Dr,"__esModule",{value:!0});Dr.transformTwitchApiResponse=Dr.handleTwitchApiResponseError=void 0;var GH=Lc(),WH=Zc();async function VH(i,e){var t;if(!i.ok){let r=i.headers.get("Content-Type")==="application/json",n=r?JSON.stringify(await i.json(),null,2):await i.text(),a=(0,GH.stringify)(e.query,{arrayFormat:"repeat",addQueryPrefix:!0}),s=`${e.url}${a}`;throw new WH.HttpStatusCodeError(i.status,i.statusText,s,(t=e.method)!==null&&t!==void 0?t:"GET",n,r)}}Dr.handleTwitchApiResponseError=VH;async function $H(i){if(i.status===204)return;let e=await i.text();if(e)return JSON.parse(e)}Dr.transformTwitchApiResponse=$H});var Hf=l(oo=>{"use strict";Object.defineProperty(oo,"__esModule",{value:!0});oo.getTwitchApiUrl=void 0;function zH(i,e,t){switch(e){case"helix":{let r=i.replace(/^\//,"");return t?r==="eventsub/subscriptions"?`http://localhost:${t}/${r}`:`http://localhost:${t}/mock/${r}`:`https://api.twitch.tv/helix/${r}`}case"auth":return`https://id.twitch.tv/oauth2/${i.replace(/^\//,"")}`;case"custom":return i;default:return i}}oo.getTwitchApiUrl=zH});var Pf=l(Ir=>{"use strict";Object.defineProperty(Ir,"__esModule",{value:!0});Ir.callTwitchApi=Ir.callTwitchApiRaw=void 0;var Cf=tf(),KH=Lc(),qf=Xc(),JH=Hf();async function Ef(i,e,t,r,n={},a){var s,o;let c=(s=i.type)!==null&&s!==void 0?s:"helix",d=(0,JH.getTwitchApiUrl)(i.url,c,a),h=(0,KH.stringify)(i.query,{arrayFormat:"repeat",addQueryPrefix:!0}),b=new Cf.Headers({Accept:"application/json"}),q;i.jsonBody&&(q=JSON.stringify(i.jsonBody),b.append("Content-Type","application/json")),e&&c!=="auth"&&b.append("Client-ID",e),t&&b.append("Authorization",`${c==="helix"?r??"Bearer":"OAuth"} ${t}`);let C={...n,method:(o=i.method)!==null&&o!==void 0?o:"GET",headers:b,body:q};return await(0,Cf.default)(`${d}${h}`,C)}Ir.callTwitchApiRaw=Ef;async function ZH(i,e,t,r,n={}){let a=await Ef(i,e,t,r,n);return await(0,qf.handleTwitchApiResponseError)(a,i),await(0,qf.transformTwitchApiResponse)(a)}Ir.callTwitchApi=ZH});var Af=l(lo=>{"use strict";Object.defineProperty(lo,"__esModule",{value:!0});lo.createBroadcasterQuery=void 0;var XH=p();function YH(i){return{broadcaster_id:(0,XH.extractUserId)(i)}}lo.createBroadcasterQuery=YH});var J=l(Ee=>{"use strict";Object.defineProperty(Ee,"__esModule",{value:!0});Ee.HttpStatusCodeError=Ee.transformTwitchApiResponse=Ee.handleTwitchApiResponseError=Ee.createBroadcasterQuery=Ee.callTwitchApiRaw=Ee.callTwitchApi=void 0;var Df=Pf();Object.defineProperty(Ee,"callTwitchApi",{enumerable:!0,get:function(){return Df.callTwitchApi}});Object.defineProperty(Ee,"callTwitchApiRaw",{enumerable:!0,get:function(){return Df.callTwitchApiRaw}});var eC=Af();Object.defineProperty(Ee,"createBroadcasterQuery",{enumerable:!0,get:function(){return eC.createBroadcasterQuery}});var If=Xc();Object.defineProperty(Ee,"handleTwitchApiResponseError",{enumerable:!0,get:function(){return If.handleTwitchApiResponseError}});Object.defineProperty(Ee,"transformTwitchApiResponse",{enumerable:!0,get:function(){return If.transformTwitchApiResponse}});var tC=Zc();Object.defineProperty(Ee,"HttpStatusCodeError",{enumerable:!0,get:function(){return tC.HttpStatusCodeError}})});var ed=l(uo=>{"use strict";Object.defineProperty(uo,"__esModule",{value:!0});uo.ConfigError=void 0;var rC=p(),Yc=class extends rC.CustomError{};uo.ConfigError=Yc});var Tf=l(co=>{"use strict";Object.defineProperty(co,"__esModule",{value:!0});co.HelixRateLimiter=void 0;var iC=Zs(),nC=J(),td=class extends iC.ResponseBasedRateLimiter{async doRequest({options:e,clientId:t,accessToken:r,authorizationType:n,fetchOptions:a,mockServerPort:s}){return await(0,nC.callTwitchApiRaw)(e,t,r,n,a,s)}needsToRetryAfter(e){return e.status===429&&(!e.headers.has("ratelimit-remaining")||Number(e.headers.get("ratelimit-remaining"))===0)?+e.headers.get("ratelimit-reset")*1e3-Date.now():null}getParametersFromResponse(e){let{headers:t}=e;return{limit:+t.get("ratelimit-limit"),remaining:+t.get("ratelimit-remaining"),resetsAt:+t.get("ratelimit-reset")*1e3}}};co.HelixRateLimiter=td});var yi=l(ho=>{"use strict";Object.defineProperty(ho,"__esModule",{value:!0});ho.createCacheKey=void 0;function aC(i){switch(typeof i){case"undefined":return"";case"object":{if(i===null)return"";if("cacheKey"in i)return i.cacheKey;let e=JSON.stringify(i);if(e!=="{}")return e}default:return i.toString()}}function sC(i,e,t){return[i,...e.map(aC)].join("/")+(t?"/":"")}ho.createCacheKey=sC});var Rf=l(po=>{"use strict";Object.defineProperty(po,"__esModule",{value:!0});po.Cacheable=void 0;var oC=yi(),yt=Symbol("cache");function lC(i){var e,t;return t=class extends i{constructor(){super(...arguments),this[e]=new Map}getFromCache(r){if(this._cleanCache(),this[yt].has(r)){let n=this[yt].get(r);if(n)return n.value}}setCache(r,n,a){this[yt].set(r,{value:n,expires:Date.now()+a*1e3})}removeFromCache(r,n){let a=this._getInternalCacheKey(r,n);n?this[yt].forEach((s,o)=>{o.startsWith(a)&&this[yt].delete(o)}):this[yt].delete(a)}_cleanCache(){let r=Date.now();this[yt].forEach((n,a)=>{n.expires<r&&this[yt].delete(a)})}_getInternalCacheKey(r,n){if(typeof r=="string"){let a=r;return a.endsWith("/")||(a+="/"),a}else{let a=r.shift();return(0,oC.createCacheKey)(a,r,n)}}},e=yt,t}po.Cacheable=lC});var Uf=l(mo=>{"use strict";Object.defineProperty(mo,"__esModule",{value:!0});mo.Cached=void 0;var uC=yi();function cC(i=1/0,e=!1){return function(t,r,n){let a=n.value;return n.value=async function(...s){let o=(0,uC.createCacheKey)(r,s),c=this.getFromCache(o);if(c)return c;let d=await a.apply(this,s);return(d!=null||e)&&this.setCache(o,d,i),d},n}}mo.Cached=cC});var Bf=l(_o=>{"use strict";Object.defineProperty(_o,"__esModule",{value:!0});_o.CachedGetter=void 0;var dC=yi();function hC(i=1/0){return function(e,t,r){if(r.get){let n=r.get;r.get=function(){let a=(0,dC.createCacheKey)(t,[]),s=this.getFromCache(a);if(s)return s;let o=n.call(this);return this.setCache(a,o,i),o}}return r}}_o.CachedGetter=hC});var Of=l(yo=>{"use strict";Object.defineProperty(yo,"__esModule",{value:!0});yo.ClearsCache=void 0;function pC(i,e){return function(t,r,n){let a=n.value;return n.value=async function(...s){let o=await a.apply(this,s),c=e===void 0?s.slice():s.slice(0,e);return this.removeFromCache([i,...c],!0),o},n}}yo.ClearsCache=pC});var fi=l(je=>{"use strict";Object.defineProperty(je,"__esModule",{value:!0});je.createCacheKey=je.ClearsCache=je.CachedGetter=je.Cached=je.Cacheable=void 0;var mC=Rf();Object.defineProperty(je,"Cacheable",{enumerable:!0,get:function(){return mC.Cacheable}});var _C=Uf();Object.defineProperty(je,"Cached",{enumerable:!0,get:function(){return _C.Cached}});var yC=Bf();Object.defineProperty(je,"CachedGetter",{enumerable:!0,get:function(){return yC.CachedGetter}});var fC=Of();Object.defineProperty(je,"ClearsCache",{enumerable:!0,get:function(){return fC.ClearsCache}});var gC=yi();Object.defineProperty(je,"createCacheKey",{enumerable:!0,get:function(){return gC.createCacheKey}})});var id=l(fo=>{"use strict";Object.defineProperty(fo,"__esModule",{value:!0});fo.Listener=void 0;var rd=class{constructor(e,t,r,n=!1){this.owner=e,this.event=t,this.listener=r,this._internal=n}unbind(){this.owner.removeListener(this)}};fo.Listener=rd});var jf=l(go=>{"use strict";Object.defineProperty(go,"__esModule",{value:!0});go.EventEmitter=void 0;var bC=id(),nd=class{constructor(){this._eventListeners=new Map,this._internalEventListeners=new Map}on(e,t){return this._addListener(!1,e,t)}addListener(e,t){return this._addListener(!1,e,t)}removeListener(e,t){this._removeListener(!1,e,t)}registerEvent(){let e=t=>this.addListener(e,t);return e}emit(e,...t){if(this._eventListeners.has(e))for(let r of this._eventListeners.get(e))r(...t);if(this._internalEventListeners.has(e))for(let r of this._internalEventListeners.get(e))r(...t)}registerInternalEvent(){let e=t=>this.addInternalListener(e,t);return e}addInternalListener(e,t){return this._addListener(!0,e,t)}removeInternalListener(e,t){this._removeListener(!0,e,t)}_addListener(e,t,r){let n=e?this._eventListeners:this._internalEventListeners;return n.has(t)?n.get(t).push(r):n.set(t,[r]),new bC.Listener(this,t,r,e)}_removeListener(e,t,r){let n=e?this._eventListeners:this._internalEventListeners;if(!t)n.clear();else if(typeof t=="object"){let a=t;this._removeListener(a._internal,a.event,a.listener)}else{let a=t;if(n.has(a))if(r){let s=n.get(a),o=0;for(;(o=s.indexOf(r))!==-1;)s.splice(o,1)}else n.delete(a)}}};go.EventEmitter=nd});var ad=l(Tr=>{"use strict";Object.defineProperty(Tr,"__esModule",{value:!0});Tr.Listener=Tr.EventEmitter=void 0;var xC=jf();Object.defineProperty(Tr,"EventEmitter",{enumerable:!0,get:function(){return xC.EventEmitter}});var wC=id();Object.defineProperty(Tr,"Listener",{enumerable:!0,get:function(){return wC.Listener}})});var bo=l(Rr=>{"use strict";Object.defineProperty(Rr,"__esModule",{value:!0});Rr.accessTokenIsExpired=Rr.getExpiryDateOfAccessToken=void 0;var sd=H(),vC=6e4;function kf(i){return(0,sd.mapNullable)(i.expiresIn,e=>i.obtainmentTimestamp+e*1e3-vC)}function SC(i){return(0,sd.mapNullable)(kf(i),e=>new Date(e))}Rr.getExpiryDateOfAccessToken=SC;function HC(i){var e;return(e=(0,sd.mapNullable)(kf(i),t=>Date.now()>t))!==null&&e!==void 0?e:!1}Rr.accessTokenIsExpired=HC});var wo=l(xo=>{"use strict";Object.defineProperty(xo,"__esModule",{value:!0});xo.InvalidTokenError=void 0;var CC=p(),od=class extends CC.CustomError{constructor(e){super("Invalid token supplied",e)}};xo.InvalidTokenError=od});var So=l(vo=>{"use strict";Object.defineProperty(vo,"__esModule",{value:!0});vo.InvalidTokenTypeError=void 0;var qC=p(),ld=class extends qC.CustomError{};vo.InvalidTokenTypeError=ld});var Mf=l(ot=>{"use strict";Object.defineProperty(ot,"__esModule",{value:!0});ot.createRevokeTokenQuery=ot.createRefreshTokenQuery=ot.createGetAppTokenQuery=ot.createExchangeCodeQuery=void 0;function EC(i,e,t,r){return{grant_type:"authorization_code",client_id:i,client_secret:e,code:t,redirect_uri:r}}ot.createExchangeCodeQuery=EC;function PC(i,e){return{grant_type:"client_credentials",client_id:i,client_secret:e}}ot.createGetAppTokenQuery=PC;function AC(i,e,t){return{grant_type:"refresh_token",client_id:i,client_secret:e,refresh_token:t}}ot.createRefreshTokenQuery=AC;function DC(i,e){return{client_id:i,token:e}}ot.createRevokeTokenQuery=DC});var cd=l(gi=>{"use strict";Object.defineProperty(gi,"__esModule",{value:!0});gi.TokenInfo=void 0;var IC=(y(),g(_)),TC=H(),Xt=p(),ud=class extends Xt.DataObject{constructor(e){super(e),this._obtainmentDate=new Date}get clientId(){return this[Xt.rawDataSymbol].client_id}get userId(){var e;return(e=this[Xt.rawDataSymbol].user_id)!==null&&e!==void 0?e:null}get userName(){var e;return(e=this[Xt.rawDataSymbol].login)!==null&&e!==void 0?e:null}get scopes(){return this[Xt.rawDataSymbol].scopes}get expiryDate(){return(0,TC.mapNullable)(this[Xt.rawDataSymbol].expires_in,e=>new Date(this._obtainmentDate.getTime()+e*1e3))}};gi.TokenInfo=ud;gi.TokenInfo=ud=IC.__decorate([(0,Xt.rtfm)("auth","TokenInfo","clientId")],ud)});var xi=l(Z=>{"use strict";Object.defineProperty(Z,"__esModule",{value:!0});Z.loadAndCompareTokenInfo=Z.compareScopeSets=Z.compareScopes=Z.getValidTokenFromProviderForIntent=Z.getValidTokenFromProviderForUser=Z.getTokenInfo=Z.revokeToken=Z.refreshUserToken=Z.getAppToken=Z.exchangeCode=void 0;var Ur=J(),bi=wo(),RC=So(),Ho=Mf(),UC=cd();function dd(i){var e,t;return{accessToken:i.access_token,refreshToken:i.refresh_token||null,scope:(e=i.scope)!==null&&e!==void 0?e:[],expiresIn:(t=i.expires_in)!==null&&t!==void 0?t:null,obtainmentTimestamp:Date.now()}}async function BC(i,e,t,r){return dd(await(0,Ur.callTwitchApi)({type:"auth",url:"token",method:"POST",query:(0,Ho.createExchangeCodeQuery)(i,e,t,r)}))}Z.exchangeCode=BC;async function OC(i,e){return dd(await(0,Ur.callTwitchApi)({type:"auth",url:"token",method:"POST",query:(0,Ho.createGetAppTokenQuery)(i,e)}))}Z.getAppToken=OC;async function jC(i,e,t){return dd(await(0,Ur.callTwitchApi)({type:"auth",url:"token",method:"POST",query:(0,Ho.createRefreshTokenQuery)(i,e,t)}))}Z.refreshUserToken=jC;async function kC(i,e){await(0,Ur.callTwitchApi)({type:"auth",url:"revoke",method:"POST",query:(0,Ho.createRevokeTokenQuery)(i,e)})}Z.revokeToken=kC;async function Br(i,e){try{let t=await(0,Ur.callTwitchApi)({type:"auth",url:"validate"},e,i);return new UC.TokenInfo(t)}catch(t){throw t instanceof Ur.HttpStatusCodeError&&t.statusCode===401?new bi.InvalidTokenError({cause:t}):t}}Z.getTokenInfo=Br;async function MC(i,e,t,r){let n=null,a=!1;try{let s=await i.getAccessTokenForUser(e,t);if(s){a=!0;let o=await Br(s.accessToken);return{accessToken:s,tokenInfo:o}}}catch(s){s instanceof bi.InvalidTokenError?n=s:r?.error(`Retrieving an access token failed: ${s.message}`)}if(a&&(r?.warn("No valid token available; trying to refresh"),i.refreshAccessTokenForUser))try{let s=await i.refreshAccessTokenForUser(e),o=await Br(s.accessToken);return{accessToken:s,tokenInfo:o}}catch(s){s instanceof bi.InvalidTokenError?n=s:r?.error(`Refreshing the access token failed: ${s.message}`)}throw n??new Error("Could not retrieve a valid token")}Z.getValidTokenFromProviderForUser=MC;async function LC(i,e,t,r){let n=null,a=!1;if(!i.getAccessTokenForIntent)throw new RC.InvalidTokenTypeError("This call requires an AuthProvider that supports intents.\nPlease use an auth provider that does, such as `RefreshingAuthProvider`.");try{let s=await i.getAccessTokenForIntent(e,t);if(s){a=!0;let o=await Br(s.accessToken);return{accessToken:s,tokenInfo:o}}}catch(s){s instanceof bi.InvalidTokenError?n=s:r?.error(`Retrieving an access token failed: ${s.message}`)}if(a&&(r?.warn("No valid token available; trying to refresh"),i.refreshAccessTokenForIntent))try{let s=await i.refreshAccessTokenForIntent(e),o=await Br(s.accessToken);return{accessToken:s,tokenInfo:o}}catch(s){s instanceof bi.InvalidTokenError?n=s:r?.error(`Refreshing the access token failed: ${s.message}`)}throw n??new Error("Could not retrieve a valid token")}Z.getValidTokenFromProviderForIntent=LC;var FC=new Map([["channel_commercial",["channel:edit:commercial"]],["channel_editor",["channel:manage:broadcast"]],["channel_read",["channel:read:stream_key"]],["channel_subscriptions",["channel:read:subscriptions"]],["user_blocks_read",["user:read:blocked_users"]],["user_blocks_edit",["user:manage:blocked_users"]],["user_follows_edit",["user:edit:follows"]],["user_read",["user:read:email"]],["user_subscriptions",["user:read:subscriptions"]],["user:edit:broadcast",["channel:manage:broadcast","channel:manage:extensions"]]]);function Lf(i,e){if(e?.length){let t=new Set(i.flatMap(r=>{var n;return[r,...(n=FC.get(r))!==null&&n!==void 0?n:[]]}));if(e.every(r=>!t.has(r))){let r=e.join(", ");throw new Error(`This token does not have any of the requested scopes (${r}) and can not be upgraded.
If you need dynamically upgrading scopes, please implement the AuthProvider interface accordingly:

	https://twurple.js.org/reference/auth/interfaces/AuthProvider.html`)}}}Z.compareScopes=Lf;function Ff(i,e){for(let t of e)Lf(i,t)}Z.compareScopeSets=Ff;async function NC(i,e,t,r,n){if(n?.length||!t){let a=await Br(e,i);if(!a.userId)throw new Error("Trying to use an app access token as a user access token");let s=r??a.scopes;return n&&Ff(s,n.filter(o=>!!o)),[s,a.userId]}return[r,t]}Z.loadAndCompareTokenInfo=NC});var qo=l(Co=>{"use strict";Object.defineProperty(Co,"__esModule",{value:!0});Co.TokenFetcher=void 0;var Nf=H(),hd=class{constructor(e){this._newTokenScopeSets=[],this._newTokenPromise=null,this._queuedScopeSets=[],this._queueExecutor=null,this._queuePromise=null,this._executor=e}async fetch(...e){var t;let r=e.filter(o=>!!o);if(this._newTokenPromise){if(!r.length)return await this._newTokenPromise;if(this._queueExecutor?this._queuedScopeSets.push(...r):this._queuedScopeSets=[...r],!this._queuePromise){let{promise:o,resolve:c,reject:d}=(0,Nf.promiseWithResolvers)();this._queuePromise=o,this._queueExecutor=async()=>{var h;if(this._queuePromise){this._newTokenScopeSets=this._queuedScopeSets,this._queuedScopeSets=[],this._newTokenPromise=this._queuePromise,this._queuePromise=null,this._queueExecutor=null;try{c(await this._executor(this._newTokenScopeSets))}catch(b){d(b)}finally{this._newTokenPromise=null,this._newTokenScopeSets=[],(h=this._queueExecutor)===null||h===void 0||h.call(this)}}}}return await this._queuePromise}this._newTokenScopeSets=[...r];let{promise:n,resolve:a,reject:s}=(0,Nf.promiseWithResolvers)();this._newTokenPromise=n;try{a(await this._executor(this._newTokenScopeSets))}catch(o){s(o)}finally{this._newTokenPromise=null,this._newTokenScopeSets=[],(t=this._queueExecutor)===null||t===void 0||t.call(this)}return await n}};Co.TokenFetcher=hd});var Gf=l(wi=>{"use strict";Object.defineProperty(wi,"__esModule",{value:!0});wi.AppTokenAuthProvider=void 0;var Eo=(y(),g(_)),pd=H(),Qf=p(),QC=bo(),GC=xi(),WC=qo(),Or=class{constructor(e,t,r=[]){this._clientId=e,this._clientSecret=t,this._impliedScopes=r,this._fetcher=new WC.TokenFetcher(async n=>await this._fetch(n))}get clientId(){return this._clientId}get currentScopes(){return this._impliedScopes}async getAccessTokenForUser(e,...t){if(t.every(r=>{var n;return(n=r?.some(a=>this._impliedScopes.includes(a)))!==null&&n!==void 0?n:!0}))return{...await this.getAppAccessToken(),userId:(0,Qf.extractUserId)(e)};throw new Error("Can not get user access token for AppTokenAuthProvider")}getCurrentScopesForUser(){return this._impliedScopes}async getAnyAccessToken(){return await this._fetcher.fetch()}async getAppAccessToken(e=!1){return e&&(this._token=void 0),await this._fetcher.fetch()}async _fetch(e){if(e.length>0)for(let t of e)if(this._impliedScopes.length){if(t.every(r=>!this._impliedScopes.includes(r)))throw new Error(`One of the scopes ${t.join(", ")} requested but only the scope ${this._impliedScopes.join(", ")} is implied`)}else throw new Error(`One of the scopes ${t.join(", ")} requested but the client credentials flow does not support scopes`);return!this._token||(0,QC.accessTokenIsExpired)(this._token)?this._token=await(0,GC.getAppToken)(this._clientId,this._clientSecret):this._token}};wi.AppTokenAuthProvider=Or;Eo.__decorate([(0,pd.Enumerable)(!1)],Or.prototype,"_clientSecret",void 0);Eo.__decorate([(0,pd.Enumerable)(!1)],Or.prototype,"_token",void 0);Eo.__decorate([(0,pd.Enumerable)(!1)],Or.prototype,"_fetcher",void 0);wi.AppTokenAuthProvider=Or=Eo.__decorate([(0,Qf.rtfm)("auth","AppTokenAuthProvider","clientId")],Or)});var _d=l(Po=>{"use strict";Object.defineProperty(Po,"__esModule",{value:!0});Po.CachedRefreshFailureError=void 0;var VC=p(),md=class extends VC.CustomError{constructor(e){super(`The user context for the user ${e} has been disabled.
This happened because the access token became invalid (e.g. by expiry) and refreshing it failed (e.g. because the account's password was changed).

Use .addUser(), .addUserForToken() or .addUserForCode() for the same user context to re-enable the user with a new, valid token.`),this.userId=e}};Po.CachedRefreshFailureError=md});var fd=l(Ao=>{"use strict";Object.defineProperty(Ao,"__esModule",{value:!0});Ao.IntermediateUserRemovalError=void 0;var $C=p(),yd=class extends $C.CustomError{constructor(e){super(`User ${e} was removed while trying to fetch a token.

Make sure you're not executing any actions when you want to remove a user.`),this.userId=e}};Ao.IntermediateUserRemovalError=yd});var bd=l(Do=>{"use strict";Object.defineProperty(Do,"__esModule",{value:!0});Do.UnknownIntentError=void 0;var zC=p(),gd=class extends zC.CustomError{constructor(e){super(`Unknown intent: ${e}`),this.intent=e}};Do.UnknownIntentError=gd});var $f=l(Si=>{"use strict";Object.defineProperty(Si,"__esModule",{value:!0});Si.RefreshingAuthProvider=void 0;var jr=(y(),g(_)),vi=H(),KC=ad(),ke=p(),xd=bo(),Wf=_d(),JC=fd(),wd=wo(),ZC=So(),XC=bd(),lt=xi(),Vf=qo(),Rt=class extends KC.EventEmitter{constructor(e){var t;super(),this._userAccessTokens=new Map,this._userTokenFetchers=new Map,this._intentToUserId=new Map,this._userIdToIntents=new Map,this._cachedRefreshFailures=new Set,this.onRefresh=this.registerEvent(),this.onRefreshFailure=this.registerEvent(),this._clientId=e.clientId,this._clientSecret=e.clientSecret,this._redirectUri=e.redirectUri,this._appImpliedScopes=(t=e.appImpliedScopes)!==null&&t!==void 0?t:[],this._appTokenFetcher=new Vf.TokenFetcher(async r=>await this._fetchAppToken(r))}addUser(e,t,r){let n=(0,ke.extractUserId)(e);if(!t.refreshToken)throw new Error(`Trying to add user ${n} without refresh token`);this._cachedRefreshFailures.delete(n),this._userAccessTokens.set(n,{...t,userId:n}),this._userTokenFetchers.has(n)||this._userTokenFetchers.set(n,new Vf.TokenFetcher(async a=>await this._fetchUserToken(n,a))),r&&this.addIntentsToUser(e,r)}async addUserForToken(e,t){let r=null;if(e.accessToken&&!(0,xd.accessTokenIsExpired)(e))try{let o=await(0,lt.getTokenInfo)(e.accessToken);r=[e,o]}catch(o){if(!(o instanceof wd.InvalidTokenError))throw o}if(!r){if(!e.refreshToken)throw new wd.InvalidTokenError;let o=await(0,lt.refreshUserToken)(this._clientId,this._clientSecret,e.refreshToken),c=await(0,lt.getTokenInfo)(o.accessToken);this.emit(this.onRefresh,c.userId,o),r=[o,c]}let[n,a]=r;if(!a.userId)throw new ZC.InvalidTokenTypeError("Could not determine a user ID for your token; you might be trying to disguise an app token as a user token.");let s=n.scope?n:{...n,scope:a.scopes};return this.addUser(a.userId,s,t),a.userId}async addUserForCode(e,t){if(!this._redirectUri)throw new Error("This method requires you to pass a `redirectUri` as a configuration property");let r=await(0,lt.exchangeCode)(this._clientId,this._clientSecret,e,this._redirectUri);return await this.addUserForToken(r,t)}hasUser(e){return this._userTokenFetchers.has((0,ke.extractUserId)(e))}removeUser(e){let t=(0,ke.extractUserId)(e);if(this._userIdToIntents.has(t)){let r=this._userIdToIntents.get(t);for(let n of r)this._intentToUserId.delete(n);this._userIdToIntents.delete(t)}this._userAccessTokens.delete(t),this._userTokenFetchers.delete(t),this._cachedRefreshFailures.delete(t)}addIntentsToUser(e,t){let r=(0,ke.extractUserId)(e);if(!this._userAccessTokens.has(r))throw new Error("Trying to add intents to a user that was not added to this provider");for(let n of t)this._intentToUserId.has(n)&&this._userIdToIntents.get(this._intentToUserId.get(n)).delete(n),this._intentToUserId.set(n,r),this._userIdToIntents.has(r)?this._userIdToIntents.get(r).add(n):this._userIdToIntents.set(r,new Set([n]))}getIntentsForUser(e){let t=(0,ke.extractUserId)(e);return this._userIdToIntents.has(t)?Array.from(this._userIdToIntents.get(t)):[]}removeIntents(e){var t;for(let r of e)if(this._intentToUserId.has(r)){let n=this._intentToUserId.get(r);(t=this._userIdToIntents.get(n))===null||t===void 0||t.delete(r),this._intentToUserId.delete(r)}}async refreshAccessTokenForUser(e){let t=(0,ke.extractUserId)(e);if(this._cachedRefreshFailures.has(t))throw new Wf.CachedRefreshFailureError(t);let r=this._userAccessTokens.get(t);if(!r)throw new Error("Trying to refresh token for user that was not added to the provider");let n=await this._refreshUserTokenWithCallback(t,r.refreshToken);return this._checkIntermediateUserRemoval(t),this._userAccessTokens.set(t,{...n,userId:t}),this.emit(this.onRefresh,t,n),{...n,userId:t}}async refreshAccessTokenForIntent(e){if(!this._intentToUserId.has(e))throw new XC.UnknownIntentError(e);let t=this._intentToUserId.get(e);return await this.refreshAccessTokenForUser(t)}get clientId(){return this._clientId}getCurrentScopesForUser(e){var t;let r=this._userAccessTokens.get((0,ke.extractUserId)(e));if(!r)throw new Error("Trying to get scopes for user that was not added to the provider");return(t=r.scope)!==null&&t!==void 0?t:[]}async getAccessTokenForUser(e,...t){let r=(0,ke.extractUserId)(e),n=this._userTokenFetchers.get(r);if(!n)return null;if(this._cachedRefreshFailures.has(r))throw new Wf.CachedRefreshFailureError(r);return(0,lt.compareScopeSets)(this.getCurrentScopesForUser(r),t.filter(Boolean)),await n.fetch(...t)}async getAccessTokenForIntent(e,...t){if(!this._intentToUserId.has(e))return null;let r=this._intentToUserId.get(e),n=await this.getAccessTokenForUser(r,...t);if(!n)throw new ke.HellFreezesOverError(`Found intent ${e} corresponding to user ID ${r} but no token was found`);return{...n,userId:r}}async getAnyAccessToken(e){if(e){let t=(0,ke.extractUserId)(e);if(this._userAccessTokens.has(t)){let r=await this.getAccessTokenForUser(t);if(!r)throw new ke.HellFreezesOverError(`Token for user ID ${t} exists but nothing was returned by getAccessTokenForUser`);return{...r,userId:t}}}return await this.getAppAccessToken()}async getAppAccessToken(e=!1){return e&&(this._appAccessToken=void 0),await this._appTokenFetcher.fetch(...this._appImpliedScopes.map(t=>[t]))}_checkIntermediateUserRemoval(e){if(!this._userTokenFetchers.has(e))throw this._cachedRefreshFailures.delete(e),new JC.IntermediateUserRemovalError(e)}async _fetchUserToken(e,t){let r=this._userAccessTokens.get(e);if(!r)throw new Error("Trying to get token for user that was not added to the provider");if(r.accessToken&&!(0,xd.accessTokenIsExpired)(r))try{if(r.scope)return(0,lt.compareScopeSets)(r.scope,t),r;let[a=[]]=await(0,lt.loadAndCompareTokenInfo)(this._clientId,r.accessToken,e,r.scope,t),s={...r,scope:a};return this._checkIntermediateUserRemoval(e),this._userAccessTokens.set(e,s),s}catch(a){if(!(a instanceof wd.InvalidTokenError))throw a}this._checkIntermediateUserRemoval(e);let n=await this.refreshAccessTokenForUser(e);return(0,lt.compareScopeSets)(n.scope,t),n}async _refreshUserTokenWithCallback(e,t){try{return await(0,lt.refreshUserToken)(this.clientId,this._clientSecret,t)}catch(r){throw this._cachedRefreshFailures.add(e),this.emit(this.onRefreshFailure,e,r),r}}async _fetchAppToken(e){if(e.length>0)for(let t of e)if(this._appImpliedScopes.length){if(t.every(r=>!this._appImpliedScopes.includes(r)))throw new Error(`One of the scopes ${t.join(", ")} requested but only the scope ${this._appImpliedScopes.join(", ")} is implied`)}else throw new Error(`One of the scopes ${t.join(", ")} requested but the client credentials flow does not support scopes`);return!this._appAccessToken||(0,xd.accessTokenIsExpired)(this._appAccessToken)?await this._refreshAppToken():this._appAccessToken}async _refreshAppToken(){return this._appAccessToken=await(0,lt.getAppToken)(this._clientId,this._clientSecret)}};Si.RefreshingAuthProvider=Rt;jr.__decorate([(0,vi.Enumerable)(!1)],Rt.prototype,"_clientSecret",void 0);jr.__decorate([(0,vi.Enumerable)(!1)],Rt.prototype,"_userAccessTokens",void 0);jr.__decorate([(0,vi.Enumerable)(!1)],Rt.prototype,"_userTokenFetchers",void 0);jr.__decorate([(0,vi.Enumerable)(!1)],Rt.prototype,"_appAccessToken",void 0);jr.__decorate([(0,vi.Enumerable)(!1)],Rt.prototype,"_appTokenFetcher",void 0);Si.RefreshingAuthProvider=Rt=jr.__decorate([(0,ke.rtfm)("auth","RefreshingAuthProvider","clientId")],Rt)});var Kf=l(Ci=>{"use strict";Object.defineProperty(Ci,"__esModule",{value:!0});Ci.StaticAuthProvider=void 0;var vd=(y(),g(_)),zf=H(),YC=p(),eq=xi(),Hi=class{constructor(e,t,r){this._clientId=e||"",this._accessToken=typeof t=="string"?{accessToken:t,refreshToken:null,scope:r??[],expiresIn:null,obtainmentTimestamp:Date.now()}:t,this._scopes=r}get clientId(){return this._clientId}async getAccessTokenForUser(e,...t){return await this._getAccessToken(t)}async getAccessTokenForIntent(e,...t){return await this._getAccessToken(t)}async getAnyAccessToken(){return await this._getAccessToken()}getCurrentScopesForUser(){var e;return(e=this._scopes)!==null&&e!==void 0?e:[]}async _getAccessToken(e){let[t,r]=await(0,eq.loadAndCompareTokenInfo)(this._clientId,this._accessToken.accessToken,this._userId,this._scopes,e);return this._scopes=t,this._userId=r,{...this._accessToken,userId:r}}};Ci.StaticAuthProvider=Hi;vd.__decorate([(0,zf.Enumerable)(!1)],Hi.prototype,"_clientId",void 0);vd.__decorate([(0,zf.Enumerable)(!1)],Hi.prototype,"_accessToken",void 0);Ci.StaticAuthProvider=Hi=vd.__decorate([(0,YC.rtfm)("auth","StaticAuthProvider","clientId")],Hi)});var Sd=l(I=>{"use strict";Object.defineProperty(I,"__esModule",{value:!0});I.UnknownIntentError=I.InvalidTokenTypeError=I.InvalidTokenError=I.IntermediateUserRemovalError=I.CachedRefreshFailureError=I.StaticAuthProvider=I.RefreshingAuthProvider=I.AppTokenAuthProvider=I.TokenInfo=I.TokenFetcher=I.revokeToken=I.refreshUserToken=I.getValidTokenFromProviderForIntent=I.getValidTokenFromProviderForUser=I.getTokenInfo=I.getAppToken=I.exchangeCode=I.getExpiryDateOfAccessToken=I.accessTokenIsExpired=void 0;var Jf=bo();Object.defineProperty(I,"accessTokenIsExpired",{enumerable:!0,get:function(){return Jf.accessTokenIsExpired}});Object.defineProperty(I,"getExpiryDateOfAccessToken",{enumerable:!0,get:function(){return Jf.getExpiryDateOfAccessToken}});var Yt=xi();Object.defineProperty(I,"exchangeCode",{enumerable:!0,get:function(){return Yt.exchangeCode}});Object.defineProperty(I,"getAppToken",{enumerable:!0,get:function(){return Yt.getAppToken}});Object.defineProperty(I,"getTokenInfo",{enumerable:!0,get:function(){return Yt.getTokenInfo}});Object.defineProperty(I,"getValidTokenFromProviderForUser",{enumerable:!0,get:function(){return Yt.getValidTokenFromProviderForUser}});Object.defineProperty(I,"getValidTokenFromProviderForIntent",{enumerable:!0,get:function(){return Yt.getValidTokenFromProviderForIntent}});Object.defineProperty(I,"refreshUserToken",{enumerable:!0,get:function(){return Yt.refreshUserToken}});Object.defineProperty(I,"revokeToken",{enumerable:!0,get:function(){return Yt.revokeToken}});var tq=qo();Object.defineProperty(I,"TokenFetcher",{enumerable:!0,get:function(){return tq.TokenFetcher}});var rq=cd();Object.defineProperty(I,"TokenInfo",{enumerable:!0,get:function(){return rq.TokenInfo}});var iq=Gf();Object.defineProperty(I,"AppTokenAuthProvider",{enumerable:!0,get:function(){return iq.AppTokenAuthProvider}});var nq=$f();Object.defineProperty(I,"RefreshingAuthProvider",{enumerable:!0,get:function(){return nq.RefreshingAuthProvider}});var aq=Kf();Object.defineProperty(I,"StaticAuthProvider",{enumerable:!0,get:function(){return aq.StaticAuthProvider}});var sq=_d();Object.defineProperty(I,"CachedRefreshFailureError",{enumerable:!0,get:function(){return sq.CachedRefreshFailureError}});var oq=fd();Object.defineProperty(I,"IntermediateUserRemovalError",{enumerable:!0,get:function(){return oq.IntermediateUserRemovalError}});var lq=wo();Object.defineProperty(I,"InvalidTokenError",{enumerable:!0,get:function(){return lq.InvalidTokenError}});var uq=So();Object.defineProperty(I,"InvalidTokenTypeError",{enumerable:!0,get:function(){return uq.InvalidTokenTypeError}});var cq=bd();Object.defineProperty(I,"UnknownIntentError",{enumerable:!0,get:function(){return cq.UnknownIntentError}})});var Xf=l((KB,Zf)=>{function Me(i,e){typeof e=="boolean"&&(e={forever:e}),this._originalTimeouts=JSON.parse(JSON.stringify(i)),this._timeouts=i,this._options=e||{},this._maxRetryTime=e&&e.maxRetryTime||1/0,this._fn=null,this._errors=[],this._attempts=1,this._operationTimeout=null,this._operationTimeoutCb=null,this._timeout=null,this._operationStart=null,this._timer=null,this._options.forever&&(this._cachedTimeouts=this._timeouts.slice(0))}Zf.exports=Me;Me.prototype.reset=function(){this._attempts=1,this._timeouts=this._originalTimeouts.slice(0)};Me.prototype.stop=function(){this._timeout&&clearTimeout(this._timeout),this._timer&&clearTimeout(this._timer),this._timeouts=[],this._cachedTimeouts=null};Me.prototype.retry=function(i){if(this._timeout&&clearTimeout(this._timeout),!i)return!1;var e=new Date().getTime();if(i&&e-this._operationStart>=this._maxRetryTime)return this._errors.push(i),this._errors.unshift(new Error("RetryOperation timeout occurred")),!1;this._errors.push(i);var t=this._timeouts.shift();if(t===void 0)if(this._cachedTimeouts)this._errors.splice(0,this._errors.length-1),t=this._cachedTimeouts.slice(-1);else return!1;var r=this;return this._timer=setTimeout(function(){r._attempts++,r._operationTimeoutCb&&(r._timeout=setTimeout(function(){r._operationTimeoutCb(r._attempts)},r._operationTimeout),r._options.unref&&r._timeout.unref()),r._fn(r._attempts)},t),this._options.unref&&this._timer.unref(),!0};Me.prototype.attempt=function(i,e){this._fn=i,e&&(e.timeout&&(this._operationTimeout=e.timeout),e.cb&&(this._operationTimeoutCb=e.cb));var t=this;this._operationTimeoutCb&&(this._timeout=setTimeout(function(){t._operationTimeoutCb()},t._operationTimeout)),this._operationStart=new Date().getTime(),this._fn(this._attempts)};Me.prototype.try=function(i){console.log("Using RetryOperation.try() is deprecated"),this.attempt(i)};Me.prototype.start=function(i){console.log("Using RetryOperation.start() is deprecated"),this.attempt(i)};Me.prototype.start=Me.prototype.try;Me.prototype.errors=function(){return this._errors};Me.prototype.attempts=function(){return this._attempts};Me.prototype.mainError=function(){if(this._errors.length===0)return null;for(var i={},e=null,t=0,r=0;r<this._errors.length;r++){var n=this._errors[r],a=n.message,s=(i[a]||0)+1;i[a]=s,s>=t&&(e=n,t=s)}return e}});var Yf=l(er=>{var dq=Xf();er.operation=function(i){var e=er.timeouts(i);return new dq(e,{forever:i&&(i.forever||i.retries===1/0),unref:i&&i.unref,maxRetryTime:i&&i.maxRetryTime})};er.timeouts=function(i){if(i instanceof Array)return[].concat(i);var e={retries:10,factor:2,minTimeout:1*1e3,maxTimeout:1/0,randomize:!1};for(var t in i)e[t]=i[t];if(e.minTimeout>e.maxTimeout)throw new Error("minTimeout is greater than maxTimeout");for(var r=[],n=0;n<e.retries;n++)r.push(this.createTimeout(n,e));return i&&i.forever&&!r.length&&r.push(this.createTimeout(n,e)),r.sort(function(a,s){return a-s}),r};er.createTimeout=function(i,e){var t=e.randomize?Math.random()+1:1,r=Math.round(t*Math.max(e.minTimeout,1)*Math.pow(e.factor,i));return r=Math.min(r,e.maxTimeout),r};er.wrap=function(i,e,t){if(e instanceof Array&&(t=e,e=null),!t){t=[];for(var r in i)typeof i[r]=="function"&&t.push(r)}for(var n=0;n<t.length;n++){var a=t[n],s=i[a];i[a]=function(c){var d=er.operation(e),h=Array.prototype.slice.call(arguments,1),b=h.pop();h.push(function(q){d.retry(q)||(q&&(arguments[0]=d.mainError()),b.apply(this,arguments))}),d.attempt(function(){c.apply(i,h)})}.bind(i,s),i[a].options=e}}});var tg=l((ZB,eg)=>{eg.exports=Yf()});var rg=l(Io=>{"use strict";Object.defineProperty(Io,"__esModule",{value:!0});Io.createBitsLeaderboardQuery=void 0;function hq(i={}){let{count:e=10,period:t="all",startDate:r,contextUserId:n}=i;return{count:e.toString(),period:t,started_at:r?.toISOString(),user_id:n}}Io.createBitsLeaderboardQuery=hq});var N=l(Ro=>{"use strict";Object.defineProperty(Ro,"__esModule",{value:!0});Ro.BaseApi=void 0;var pq=(y(),g(_)),mq=H(),To=class{constructor(e){this._client=e}_getUserContextIdWithDefault(e){var t;return(t=this._client._getUserIdFromRequestContext(e))!==null&&t!==void 0?t:e}};Ro.BaseApi=To;pq.__decorate([(0,mq.Enumerable)(!1)],To.prototype,"_client",void 0)});var Hd=l(qi=>{"use strict";Object.defineProperty(qi,"__esModule",{value:!0});qi.HelixBitsLeaderboardEntry=void 0;var ig=(y(),g(_)),_q=H(),ft=p(),Uo=class extends ft.DataObject{constructor(e,t){super(e),this._client=t}get userId(){return this[ft.rawDataSymbol].user_id}get userName(){return this[ft.rawDataSymbol].user_login}get userDisplayName(){return this[ft.rawDataSymbol].user_name}get rank(){return this[ft.rawDataSymbol].rank}get amount(){return this[ft.rawDataSymbol].score}async getUser(){return(0,ft.checkRelationAssertion)(await this._client.users.getUserById(this[ft.rawDataSymbol].user_id))}};qi.HelixBitsLeaderboardEntry=Uo;ig.__decorate([(0,_q.Enumerable)(!1)],Uo.prototype,"_client",void 0);qi.HelixBitsLeaderboardEntry=Uo=ig.__decorate([(0,ft.rtfm)("api","HelixBitsLeaderboardEntry","userId")],Uo)});var qd=l(Pi=>{"use strict";Object.defineProperty(Pi,"__esModule",{value:!0});Pi.HelixBitsLeaderboard=void 0;var Cd=(y(),g(_)),ng=fi(),yq=H(),Bo=p(),fq=Hd(),Ei=class extends Bo.DataObject{constructor(e,t){super(e),this._client=t}get entries(){return this[Bo.rawDataSymbol].data.map(e=>new fq.HelixBitsLeaderboardEntry(e,this._client))}get totalCount(){return this[Bo.rawDataSymbol].total}};Pi.HelixBitsLeaderboard=Ei;Cd.__decorate([(0,yq.Enumerable)(!1)],Ei.prototype,"_client",void 0);Cd.__decorate([(0,ng.CachedGetter)()],Ei.prototype,"entries",null);Pi.HelixBitsLeaderboard=Ei=Cd.__decorate([ng.Cacheable,(0,Bo.rtfm)("api","HelixBitsLeaderboard")],Ei)});var Pd=l(Di=>{"use strict";Object.defineProperty(Di,"__esModule",{value:!0});Di.HelixCheermoteList=void 0;var gq=(y(),g(_)),bq=H(),Ai=p(),Ed=class extends Ai.DataObject{constructor(e){super((0,bq.indexBy)(e,t=>t.prefix.toLowerCase()))}getCheermoteDisplayInfo(e,t,r){e=e.toLowerCase();let{background:n,state:a,scale:s}=r,{tiers:o}=this[Ai.rawDataSymbol][e],c=o.sort((d,h)=>h.min_bits-d.min_bits).find(d=>d.min_bits<=t);if(!c)throw new Ai.HellFreezesOverError(`Cheermote "${e}" does not have an applicable tier for ${t} bits`);return{url:c.images[n][a][s],color:c.color}}getPossibleNames(){return Object.keys(this[Ai.rawDataSymbol])}};Di.HelixCheermoteList=Ed;Di.HelixCheermoteList=Ed=gq.__decorate([(0,Ai.rtfm)("api","HelixCheermoteList")],Ed)});var Id=l(Ii=>{"use strict";Object.defineProperty(Ii,"__esModule",{value:!0});Ii.HelixBitsApi=void 0;var xq=(y(),g(_)),ag=H(),wq=J(),Ad=p(),vq=rg(),Sq=N(),Hq=qd(),Cq=Pd(),Dd=class extends Sq.BaseApi{async getLeaderboard(e,t={}){let r=await this._client.callApi({type:"helix",url:"bits/leaderboard",userId:(0,Ad.extractUserId)(e),scopes:["bits:read"],query:(0,vq.createBitsLeaderboardQuery)(t)});return new Hq.HelixBitsLeaderboard(r,this._client)}async getCheermotes(e){let t=await this._client.callApi({type:"helix",url:"bits/cheermotes",userId:(0,ag.mapOptional)(e,Ad.extractUserId),query:(0,ag.mapOptional)(e,wq.createBroadcasterQuery)});return new Cq.HelixCheermoteList(t.data)}};Ii.HelixBitsApi=Dd;Ii.HelixBitsApi=Dd=xq.__decorate([(0,Ad.rtfm)("api","HelixBitsApi")],Dd)});var og=l(Le=>{"use strict";Object.defineProperty(Le,"__esModule",{value:!0});Le.createFollowedChannelQuery=Le.createChannelFollowerQuery=Le.createChannelVipUpdateQuery=Le.createChannelCommercialBody=Le.createChannelUpdateBody=void 0;var sg=H(),tr=p();function qq(i){var e;return{game_id:i.gameId,broadcaster_language:i.language,title:i.title,delay:(e=i.delay)===null||e===void 0?void 0:e.toString(),tags:i.tags,content_classification_labels:i.contentClassificationLabels,is_branded_content:i.isBrandedContent}}Le.createChannelUpdateBody=qq;function Eq(i,e){return{broadcaster_id:(0,tr.extractUserId)(i),length:e}}Le.createChannelCommercialBody=Eq;function Pq(i,e){return{broadcaster_id:(0,tr.extractUserId)(i),user_id:(0,tr.extractUserId)(e)}}Le.createChannelVipUpdateQuery=Pq;function Aq(i,e){return{broadcaster_id:(0,tr.extractUserId)(i),user_id:(0,sg.mapOptional)(e,tr.extractUserId)}}Le.createChannelFollowerQuery=Aq;function Dq(i,e){return{broadcaster_id:(0,sg.mapOptional)(e,tr.extractUserId),user_id:(0,tr.extractUserId)(i)}}Le.createFollowedChannelQuery=Dq});var Re=l(Fe=>{"use strict";Object.defineProperty(Fe,"__esModule",{value:!0});Fe.createChannelUsersCheckQuery=Fe.createGetByIdsQuery=Fe.createModeratorActionQuery=Fe.createUserQuery=Fe.createSingleKeyQuery=void 0;var Oo=p();function Iq(i,e){return{[i]:e}}Fe.createSingleKeyQuery=Iq;function Tq(i){return{user_id:(0,Oo.extractUserId)(i)}}Fe.createUserQuery=Tq;function Rq(i,e){return{broadcaster_id:i,moderator_id:e}}Fe.createModeratorActionQuery=Rq;function Uq(i,e){return{broadcaster_id:(0,Oo.extractUserId)(i),id:e}}Fe.createGetByIdsQuery=Uq;function Bq(i,e){return{broadcaster_id:(0,Oo.extractUserId)(i),user_id:e.map(Oo.extractUserId)}}Fe.createChannelUsersCheckQuery=Bq});var ko=l(Ti=>{"use strict";Object.defineProperty(Ti,"__esModule",{value:!0});Ti.HelixUserRelation=void 0;var lg=(y(),g(_)),Oq=H(),rr=p(),jo=class extends rr.DataObject{constructor(e,t){super(e),this._client=t}get id(){return this[rr.rawDataSymbol].user_id}get name(){return this[rr.rawDataSymbol].user_login}get displayName(){return this[rr.rawDataSymbol].user_name}async getUser(){return(0,rr.checkRelationAssertion)(await this._client.users.getUserById(this[rr.rawDataSymbol].user_id))}};Ti.HelixUserRelation=jo;lg.__decorate([(0,Oq.Enumerable)(!1)],jo.prototype,"_client",void 0);Ti.HelixUserRelation=jo=lg.__decorate([(0,rr.rtfm)("api","HelixUserRelation","id")],jo)});var Ut=l(Lo=>{"use strict";Object.defineProperty(Lo,"__esModule",{value:!0});Lo.HelixRequestBatcher=void 0;var jq=(y(),g(_)),Td=H(),Mo=class{constructor(e,t,r,n,a,s=100){this._callOptions=e,this._queryParamName=t,this._matchKey=r,this._mapper=a,this._limitPerRequest=s,this._requestedIds=[],this._requestResolversById=new Map,this._waitTimer=null,this._client=n,this._delay=n._batchDelay}async request(e){let{promise:t,resolve:r,reject:n}=(0,Td.promiseWithResolvers)();return this._requestedIds.includes(e)||this._requestedIds.push(e),this._requestResolversById.has(e)?this._requestResolversById.get(e).push({resolve:r,reject:n}):this._requestResolversById.set(e,[{resolve:r,reject:n}]),this._waitTimer&&(clearTimeout(this._waitTimer),this._waitTimer=null),this._requestedIds.length>=this._limitPerRequest?this._handleBatch(this._requestedIds.splice(0,this._limitPerRequest)):this._waitTimer=setTimeout(()=>{this._handleBatch(this._requestedIds.splice(0,this._limitPerRequest))},this._delay),await t}async _handleBatch(e){var t;try{let{data:r}=await this._doRequest(e),n=(0,Td.indexBy)(r,this._matchKey);for(let a of e){for(let s of(t=this._requestResolversById.get(a))!==null&&t!==void 0?t:[])Object.prototype.hasOwnProperty.call(n,a)?s.resolve(this._mapper(n[a])):s.resolve(null);this._requestResolversById.delete(a)}}catch{await Promise.all(e.map(async n=>{var a,s;try{let o=await this._doRequest([n]);for(let c of(a=this._requestResolversById.get(n))!==null&&a!==void 0?a:[])c.resolve(o.data.length?this._mapper(o.data[0]):null)}catch(o){for(let c of(s=this._requestResolversById.get(n))!==null&&s!==void 0?s:[])c.reject(o)}this._requestResolversById.delete(n)}))}}async _doRequest(e){return await this._client.callApi({type:"helix",...this._callOptions,query:{...this._callOptions.query,[this._queryParamName]:e}})}};Lo.HelixRequestBatcher=Mo;jq.__decorate([(0,Td.Enumerable)(!1)],Mo.prototype,"_client",void 0)});var ne=l(Ri=>{"use strict";var Rd;Object.defineProperty(Ri,"__esModule",{value:!0});Ri.HelixPaginatedRequest=void 0;var ug=(y(),g(_)),kq=H(),Mq=p();Object.prototype.hasOwnProperty.call(Symbol,"asyncIterator")||(Symbol.asyncIterator=(Rd=Symbol.asyncIterator)!==null&&Rd!==void 0?Rd:Symbol.for("Symbol.asyncIterator"));var Fo=class{constructor(e,t,r,n=100){this._callOptions=e,this._mapper=r,this._limitPerPage=n,this._isFinished=!1,this._client=t}get current(){var e;return(e=this._currentData)===null||e===void 0?void 0:e.data}async getNext(){var e;if(this._isFinished)return[];let t=await this._fetchData();return!((e=t.data)===null||e===void 0)&&e.length?this._processResult(t):(this._isFinished=!0,[])}async getAll(){this.reset();let e=[];do{let t=await this.getNext();if(!t.length)break;e.push(...t)}while(this._currentCursor);return this.reset(),e}get currentCursor(){return this._currentCursor}reset(){this._currentCursor=void 0,this._isFinished=!1,this._currentData=void 0}async*[Symbol.asyncIterator](){for(this.reset();;){let e=await this.getNext();if(!e.length)break;yield*e[Symbol.iterator]()}}async _fetchData(e={}){return await this._client.callApi({type:"helix",...this._callOptions,...e,query:{...this._callOptions.query,after:this._currentCursor,first:this._limitPerPage.toString(),...e.query}})}_processResult(e){var t;return this._currentCursor=typeof e.pagination=="string"?e.pagination:(t=e.pagination)===null||t===void 0?void 0:t.cursor,this._currentCursor===void 0&&(this._isFinished=!0),this._currentData=e,e.data.reduce((r,n)=>{let a=this._mapper(n);return Array.isArray(a)?[...r,...a]:[...r,a]},[])}};Ri.HelixPaginatedRequest=Fo;ug.__decorate([(0,kq.Enumerable)(!1)],Fo.prototype,"_client",void 0);Ri.HelixPaginatedRequest=Fo=ug.__decorate([(0,Mq.rtfm)("api","HelixPaginatedRequest")],Fo)});var kr=l(Ui=>{"use strict";Object.defineProperty(Ui,"__esModule",{value:!0});Ui.HelixPaginatedRequestWithTotal=void 0;var Lq=(y(),g(_)),Fq=p(),Nq=ne(),Ud=class extends Nq.HelixPaginatedRequest{async getTotalCount(){var e;return((e=this._currentData)!==null&&e!==void 0?e:await this._fetchData({query:{after:void 0}})).total}};Ui.HelixPaginatedRequestWithTotal=Ud;Ui.HelixPaginatedRequestWithTotal=Ud=Lq.__decorate([(0,Fq.rtfm)("api","HelixPaginatedRequestWithTotal")],Ud)});var ue=l(Mr=>{"use strict";Object.defineProperty(Mr,"__esModule",{value:!0});Mr.createPaginatedResultWithTotal=Mr.createPaginatedResult=void 0;function Qq(i,e,t){var r;let n;return{get data(){var a,s;return n??(n=(s=(a=i.data)===null||a===void 0?void 0:a.map(o=>new e(o,t)))!==null&&s!==void 0?s:[])},cursor:typeof i.pagination=="string"?i.pagination:(r=i.pagination)===null||r===void 0?void 0:r.cursor}}Mr.createPaginatedResult=Qq;function Gq(i,e,t){let r;return{get data(){var n,a;return r??(r=(a=(n=i.data)===null||n===void 0?void 0:n.map(s=>new e(s,t)))!==null&&a!==void 0?a:[])},cursor:i.pagination.cursor,total:i.total}}Mr.createPaginatedResultWithTotal=Gq});var ae=l(No=>{"use strict";Object.defineProperty(No,"__esModule",{value:!0});No.createPaginationQuery=void 0;function Wq({after:i,before:e,limit:t}={}){return{after:i,before:e,first:t?.toString()}}No.createPaginationQuery=Wq});var Bd=l(Bi=>{"use strict";Object.defineProperty(Bi,"__esModule",{value:!0});Bi.HelixChannel=void 0;var cg=(y(),g(_)),Vq=H(),he=p(),Qo=class extends he.DataObject{constructor(e,t){super(e),this._client=t}get id(){return this[he.rawDataSymbol].broadcaster_id}get name(){return this[he.rawDataSymbol].broadcaster_login}get displayName(){return this[he.rawDataSymbol].broadcaster_name}async getBroadcaster(){return(0,he.checkRelationAssertion)(await this._client.users.getUserById(this[he.rawDataSymbol].broadcaster_id))}get language(){return this[he.rawDataSymbol].broadcaster_language}get gameId(){return this[he.rawDataSymbol].game_id}get gameName(){return this[he.rawDataSymbol].game_name}async getGame(){return this[he.rawDataSymbol].game_id?(0,he.checkRelationAssertion)(await this._client.games.getGameById(this[he.rawDataSymbol].game_id)):null}get title(){return this[he.rawDataSymbol].title}get delay(){return this[he.rawDataSymbol].delay}get tags(){return this[he.rawDataSymbol].tags}get contentClassificationLabels(){return this[he.rawDataSymbol].content_classification_labels}get isBrandedContent(){return this[he.rawDataSymbol].is_branded_content}};Bi.HelixChannel=Qo;cg.__decorate([(0,Vq.Enumerable)(!1)],Qo.prototype,"_client",void 0);Bi.HelixChannel=Qo=cg.__decorate([(0,he.rtfm)("api","HelixChannel","id")],Qo)});var Od=l(Oi=>{"use strict";Object.defineProperty(Oi,"__esModule",{value:!0});Oi.HelixChannelEditor=void 0;var dg=(y(),g(_)),$q=H(),ir=p(),Go=class extends ir.DataObject{constructor(e,t){super(e),this._client=t}get userId(){return this[ir.rawDataSymbol].user_id}get userDisplayName(){return this[ir.rawDataSymbol].user_name}async getUser(){return(0,ir.checkRelationAssertion)(await this._client.users.getUserById(this[ir.rawDataSymbol].user_id))}get creationDate(){return new Date(this[ir.rawDataSymbol].created_at)}};Oi.HelixChannelEditor=Go;dg.__decorate([(0,$q.Enumerable)(!1)],Go.prototype,"_client",void 0);Oi.HelixChannelEditor=Go=dg.__decorate([(0,ir.rtfm)("api","HelixChannelEditor","userId")],Go)});var jd=l(ji=>{"use strict";Object.defineProperty(ji,"__esModule",{value:!0});ji.HelixChannelFollower=void 0;var hg=(y(),g(_)),zq=H(),Bt=p(),Wo=class extends Bt.DataObject{constructor(e,t){super(e),this._client=t}get userId(){return this[Bt.rawDataSymbol].user_id}get userName(){return this[Bt.rawDataSymbol].user_login}get userDisplayName(){return this[Bt.rawDataSymbol].user_name}async getUser(){return(0,Bt.checkRelationAssertion)(await this._client.users.getUserById(this[Bt.rawDataSymbol].user_id))}get followDate(){return new Date(this[Bt.rawDataSymbol].followed_at)}};ji.HelixChannelFollower=Wo;hg.__decorate([(0,zq.Enumerable)(!1)],Wo.prototype,"_client",void 0);ji.HelixChannelFollower=Wo=hg.__decorate([(0,Bt.rtfm)("api","HelixChannelFollower","userId")],Wo)});var kd=l(ki=>{"use strict";Object.defineProperty(ki,"__esModule",{value:!0});ki.HelixFollowedChannel=void 0;var pg=(y(),g(_)),Kq=H(),Ot=p(),Vo=class extends Ot.DataObject{constructor(e,t){super(e),this._client=t}get broadcasterId(){return this[Ot.rawDataSymbol].broadcaster_id}get broadcasterName(){return this[Ot.rawDataSymbol].broadcaster_login}get broadcasterDisplayName(){return this[Ot.rawDataSymbol].broadcaster_name}async getBroadcaster(){return(0,Ot.checkRelationAssertion)(await this._client.users.getUserById(this[Ot.rawDataSymbol].broadcaster_id))}get followDate(){return new Date(this[Ot.rawDataSymbol].followed_at)}};ki.HelixFollowedChannel=Vo;pg.__decorate([(0,Kq.Enumerable)(!1)],Vo.prototype,"_client",void 0);ki.HelixFollowedChannel=Vo=pg.__decorate([(0,Ot.rtfm)("api","HelixFollowedChannel","broadcasterId")],Vo)});var Ld=l(Mi=>{"use strict";Object.defineProperty(Mi,"__esModule",{value:!0});Mi.HelixAdSchedule=void 0;var Jq=(y(),g(_)),Ke=p(),Md=class extends Ke.DataObject{get snoozeCount(){return this[Ke.rawDataSymbol].snooze_count}get snoozeRefreshDate(){return this[Ke.rawDataSymbol].snooze_refresh_at?new Date(this[Ke.rawDataSymbol].snooze_refresh_at*1e3):null}get nextAdDate(){return this[Ke.rawDataSymbol].next_ad_at?new Date(this[Ke.rawDataSymbol].next_ad_at*1e3):null}get duration(){return this[Ke.rawDataSymbol].duration}get lastAdDate(){return this[Ke.rawDataSymbol].last_ad_at?new Date(this[Ke.rawDataSymbol].last_ad_at*1e3):null}get prerollFreeTime(){return this[Ke.rawDataSymbol].preroll_free_time}};Mi.HelixAdSchedule=Md;Mi.HelixAdSchedule=Md=Jq.__decorate([(0,Ke.rtfm)("api","HelixAdSchedule")],Md)});var mg=l(Fi=>{"use strict";Object.defineProperty(Fi,"__esModule",{value:!0});Fi.HelixSnoozeNextAdResult=void 0;var Zq=(y(),g(_)),Li=p(),Fd=class extends Li.DataObject{get snoozeCount(){return this[Li.rawDataSymbol].snooze_count}get snoozeRefreshDate(){return new Date(this[Li.rawDataSymbol].snooze_refresh_at*1e3)}get nextAdDate(){return new Date(this[Li.rawDataSymbol].next_ad_at*1e3)}};Fi.HelixSnoozeNextAdResult=Fd;Fi.HelixSnoozeNextAdResult=Fd=Zq.__decorate([(0,Li.rtfm)("api","HelixSnoozeNextAdResult")],Fd)});var Wd=l(Ni=>{"use strict";Object.defineProperty(Ni,"__esModule",{value:!0});Ni.HelixChannelApi=void 0;var bg=(y(),g(_)),xg=H(),nr=J(),se=p(),gt=og(),_g=Re(),Nd=ko(),Xq=Ut(),Yq=ne(),yg=kr(),Qd=ue(),$o=ae(),eE=N(),Gd=Bd(),tE=Od(),fg=jd(),gg=kd(),rE=Ld(),iE=mg(),zo=class extends eE.BaseApi{constructor(){super(...arguments),this._getChannelByIdBatcher=new Xq.HelixRequestBatcher({url:"channels"},"broadcaster_id","broadcaster_id",this._client,e=>new Gd.HelixChannel(e,this._client))}async getChannelInfoById(e){let t=(0,se.extractUserId)(e),r=await this._client.callApi({type:"helix",url:"channels",userId:t,query:(0,nr.createBroadcasterQuery)(t)});return(0,xg.mapNullable)(r.data[0],n=>new Gd.HelixChannel(n,this._client))}async getChannelInfoByIdBatched(e){return await this._getChannelByIdBatcher.request((0,se.extractUserId)(e))}async getChannelInfoByIds(e){let t=e.map(se.extractUserId);return(await this._client.callApi({type:"helix",url:"channels",query:(0,_g.createSingleKeyQuery)("broadcaster_id",t)})).data.map(n=>new Gd.HelixChannel(n,this._client))}async updateChannelInfo(e,t){await this._client.callApi({type:"helix",url:"channels",method:"PATCH",userId:(0,se.extractUserId)(e),scopes:["channel:manage:broadcast"],query:(0,nr.createBroadcasterQuery)(e),jsonBody:(0,gt.createChannelUpdateBody)(t)})}async startChannelCommercial(e,t){await this._client.callApi({type:"helix",url:"channels/commercial",method:"POST",userId:(0,se.extractUserId)(e),scopes:["channel:edit:commercial"],jsonBody:(0,gt.createChannelCommercialBody)(e,t)})}async getChannelEditors(e){return(await this._client.callApi({type:"helix",url:"channels/editors",userId:(0,se.extractUserId)(e),scopes:["channel:read:editors"],query:(0,nr.createBroadcasterQuery)(e)})).data.map(r=>new tE.HelixChannelEditor(r,this._client))}async getVips(e,t){let r=await this._client.callApi({type:"helix",url:"channels/vips",userId:(0,se.extractUserId)(e),scopes:["channel:read:vips","channel:manage:vips"],query:{...(0,nr.createBroadcasterQuery)(e),...(0,$o.createPaginationQuery)(t)}});return(0,Qd.createPaginatedResult)(r,Nd.HelixUserRelation,this._client)}getVipsPaginated(e){return new Yq.HelixPaginatedRequest({url:"channels/vips",userId:(0,se.extractUserId)(e),scopes:["channel:read:vips","channel:manage:vips"],query:(0,nr.createBroadcasterQuery)(e)},this._client,t=>new Nd.HelixUserRelation(t,this._client))}async checkVipForUsers(e,t){return(await this._client.callApi({type:"helix",url:"channels/vips",userId:(0,se.extractUserId)(e),scopes:["channel:read:vips","channel:manage:vips"],query:(0,_g.createChannelUsersCheckQuery)(e,t)})).data.map(n=>new Nd.HelixUserRelation(n,this._client))}async checkVipForUser(e,t){let r=(0,se.extractUserId)(t);return(await this.checkVipForUsers(e,[r])).some(a=>a.id===r)}async addVip(e,t){await this._client.callApi({type:"helix",url:"channels/vips",method:"POST",userId:(0,se.extractUserId)(e),scopes:["channel:manage:vips"],query:(0,gt.createChannelVipUpdateQuery)(e,t)})}async removeVip(e,t){await this._client.callApi({type:"helix",url:"channels/vips",method:"DELETE",userId:(0,se.extractUserId)(e),scopes:["channel:manage:vips"],query:(0,gt.createChannelVipUpdateQuery)(e,t)})}async getChannelFollowerCount(e){return(await this._client.callApi({type:"helix",url:"channels/followers",method:"GET",userId:(0,se.extractUserId)(e),query:{...(0,gt.createChannelFollowerQuery)(e),...(0,$o.createPaginationQuery)({limit:1})}})).total}async getChannelFollowers(e,t,r){let n=await this._client.callApi({type:"helix",url:"channels/followers",method:"GET",userId:(0,se.extractUserId)(e),canOverrideScopedUserContext:!0,scopes:["moderator:read:followers"],query:{...(0,gt.createChannelFollowerQuery)(e,t),...(0,$o.createPaginationQuery)(r)}});return(0,Qd.createPaginatedResultWithTotal)(n,fg.HelixChannelFollower,this._client)}getChannelFollowersPaginated(e){return new yg.HelixPaginatedRequestWithTotal({url:"channels/followers",method:"GET",userId:(0,se.extractUserId)(e),canOverrideScopedUserContext:!0,scopes:["moderator:read:followers"],query:(0,gt.createChannelFollowerQuery)(e)},this._client,t=>new fg.HelixChannelFollower(t,this._client))}async getFollowedChannels(e,t,r){let n=await this._client.callApi({type:"helix",url:"channels/followed",method:"GET",userId:(0,se.extractUserId)(e),scopes:["user:read:follows"],query:{...(0,gt.createFollowedChannelQuery)(e,t),...(0,$o.createPaginationQuery)(r)}});return(0,Qd.createPaginatedResultWithTotal)(n,gg.HelixFollowedChannel,this._client)}getFollowedChannelsPaginated(e,t){return new yg.HelixPaginatedRequestWithTotal({url:"channels/followed",method:"GET",userId:(0,se.extractUserId)(e),scopes:["user:read:follows"],query:(0,gt.createFollowedChannelQuery)(e,t)},this._client,r=>new gg.HelixFollowedChannel(r,this._client))}async getAdSchedule(e){let t=await this._client.callApi({type:"helix",url:"channels/ads",method:"GET",userId:(0,se.extractUserId)(e),scopes:["channel:read:ads"],query:(0,nr.createBroadcasterQuery)(e)});return new rE.HelixAdSchedule(t.data[0])}async snoozeNextAd(e){let t=await this._client.callApi({type:"helix",url:"channels/ads/schedule/snooze",method:"POST",userId:(0,se.extractUserId)(e),scopes:["channel:manage:ads"],query:(0,nr.createBroadcasterQuery)(e)});return new iE.HelixSnoozeNextAdResult(t.data[0])}};Ni.HelixChannelApi=zo;bg.__decorate([(0,xg.Enumerable)(!1)],zo.prototype,"_getChannelByIdBatcher",void 0);Ni.HelixChannelApi=zo=bg.__decorate([(0,se.rtfm)("api","HelixChannelApi")],zo)});var wg=l(Ne=>{"use strict";Object.defineProperty(Ne,"__esModule",{value:!0});Ne.createRedemptionsForBroadcasterQuery=Ne.createRewardRedemptionsByIdsQuery=Ne.createCustomRewardBody=Ne.createCustomRewardChangeQuery=Ne.createCustomRewardsQuery=void 0;var Ko=p();function nE(i,e){return{broadcaster_id:(0,Ko.extractUserId)(i),only_manageable_rewards:e?.toString()}}Ne.createCustomRewardsQuery=nE;function aE(i,e){return{broadcaster_id:(0,Ko.extractUserId)(i),id:e}}Ne.createCustomRewardChangeQuery=aE;function sE(i){var e,t,r;let n={title:i.title,cost:i.cost,prompt:i.prompt,background_color:i.backgroundColor,is_enabled:i.isEnabled,is_user_input_required:i.userInputRequired,should_redemptions_skip_request_queue:i.autoFulfill};return i.maxRedemptionsPerStream!==void 0&&(n.is_max_per_stream_enabled=!!i.maxRedemptionsPerStream,n.max_per_stream=(e=i.maxRedemptionsPerStream)!==null&&e!==void 0?e:0),i.maxRedemptionsPerUserPerStream!==void 0&&(n.is_max_per_user_per_stream_enabled=!!i.maxRedemptionsPerUserPerStream,n.max_per_user_per_stream=(t=i.maxRedemptionsPerUserPerStream)!==null&&t!==void 0?t:0),i.globalCooldown!==void 0&&(n.is_global_cooldown_enabled=!!i.globalCooldown,n.global_cooldown_seconds=(r=i.globalCooldown)!==null&&r!==void 0?r:0),"isPaused"in i&&(n.is_paused=i.isPaused),n}Ne.createCustomRewardBody=sE;function oE(i,e,t){return{broadcaster_id:(0,Ko.extractUserId)(i),reward_id:e,id:t}}Ne.createRewardRedemptionsByIdsQuery=oE;function lE(i,e,t,r){return{broadcaster_id:(0,Ko.extractUserId)(i),reward_id:e,status:t,sort:r.newestFirst?"NEWEST":"OLDEST"}}Ne.createRedemptionsForBroadcasterQuery=lE});var Vd=l(Qi=>{"use strict";Object.defineProperty(Qi,"__esModule",{value:!0});Qi.HelixCustomReward=void 0;var vg=(y(),g(_)),uE=H(),O=p(),Jo=class extends O.DataObject{constructor(e,t){super(e),this._client=t}get id(){return this[O.rawDataSymbol].id}get broadcasterId(){return this[O.rawDataSymbol].broadcaster_id}get broadcasterName(){return this[O.rawDataSymbol].broadcaster_login}get broadcasterDisplayName(){return this[O.rawDataSymbol].broadcaster_name}async getBroadcaster(){return(0,O.checkRelationAssertion)(await this._client.users.getUserById(this[O.rawDataSymbol].broadcaster_id))}getImageUrl(e){var t,r;let n=`url_${e}x`;return(r=(t=this[O.rawDataSymbol].image)===null||t===void 0?void 0:t[n])!==null&&r!==void 0?r:this[O.rawDataSymbol].default_image[n]}get backgroundColor(){return this[O.rawDataSymbol].background_color}get isEnabled(){return this[O.rawDataSymbol].is_enabled}get cost(){return this[O.rawDataSymbol].cost}get title(){return this[O.rawDataSymbol].title}get prompt(){return this[O.rawDataSymbol].prompt}get userInputRequired(){return this[O.rawDataSymbol].is_user_input_required}get maxRedemptionsPerStream(){return this[O.rawDataSymbol].max_per_stream_setting.is_enabled?this[O.rawDataSymbol].max_per_stream_setting.max_per_stream:null}get maxRedemptionsPerUserPerStream(){return this[O.rawDataSymbol].max_per_user_per_stream_setting.is_enabled?this[O.rawDataSymbol].max_per_user_per_stream_setting.max_per_user_per_stream:null}get globalCooldown(){return this[O.rawDataSymbol].global_cooldown_setting.is_enabled?this[O.rawDataSymbol].global_cooldown_setting.global_cooldown_seconds:null}get isPaused(){return this[O.rawDataSymbol].is_paused}get isInStock(){return this[O.rawDataSymbol].is_in_stock}get redemptionsThisStream(){return this[O.rawDataSymbol].redemptions_redeemed_current_stream}get autoFulfill(){return this[O.rawDataSymbol].should_redemptions_skip_request_queue}get cooldownExpiryDate(){return this[O.rawDataSymbol].cooldown_expires_at?new Date(this[O.rawDataSymbol].cooldown_expires_at):null}};Qi.HelixCustomReward=Jo;vg.__decorate([(0,uE.Enumerable)(!1)],Jo.prototype,"_client",void 0);Qi.HelixCustomReward=Jo=vg.__decorate([(0,O.rtfm)("api","HelixCustomReward","id")],Jo)});var $d=l(Gi=>{"use strict";Object.defineProperty(Gi,"__esModule",{value:!0});Gi.HelixCustomRewardRedemption=void 0;var Sg=(y(),g(_)),cE=H(),F=p(),Zo=class extends F.DataObject{constructor(e,t){super(e),this._client=t}get id(){return this[F.rawDataSymbol].id}get broadcasterId(){return this[F.rawDataSymbol].broadcaster_id}get broadcasterName(){return this[F.rawDataSymbol].broadcaster_login}get broadcasterDisplayName(){return this[F.rawDataSymbol].broadcaster_name}async getBroadcaster(){return(0,F.checkRelationAssertion)(await this._client.users.getUserById(this[F.rawDataSymbol].broadcaster_id))}get userId(){return this[F.rawDataSymbol].user_id}get userName(){return this[F.rawDataSymbol].user_login}get userDisplayName(){return this[F.rawDataSymbol].user_name}async getUser(){return(0,F.checkRelationAssertion)(await this._client.users.getUserById(this[F.rawDataSymbol].user_id))}get userInput(){return this[F.rawDataSymbol].user_input}get isFulfilled(){return this[F.rawDataSymbol].status==="FULFILLED"}get isCanceled(){return this[F.rawDataSymbol].status==="CANCELED"}get redemptionDate(){return new Date(this[F.rawDataSymbol].redeemed_at)}get rewardId(){return this[F.rawDataSymbol].reward.id}get rewardTitle(){return this[F.rawDataSymbol].reward.title}get rewardPrompt(){return this[F.rawDataSymbol].reward.prompt}get rewardCost(){return this[F.rawDataSymbol].reward.cost}async getReward(){return(0,F.checkRelationAssertion)(await this._client.channelPoints.getCustomRewardById(this[F.rawDataSymbol].broadcaster_id,this[F.rawDataSymbol].reward.id))}async updateStatus(e){return(await this._client.channelPoints.updateRedemptionStatusByIds(this[F.rawDataSymbol].broadcaster_id,this[F.rawDataSymbol].reward.id,[this[F.rawDataSymbol].id],e))[0]}};Gi.HelixCustomRewardRedemption=Zo;Sg.__decorate([(0,cE.Enumerable)(!1)],Zo.prototype,"_client",void 0);Gi.HelixCustomRewardRedemption=Zo=Sg.__decorate([(0,F.rtfm)("api","HelixCustomRewardRedemption","id")],Zo)});var Kd=l(Wi=>{"use strict";Object.defineProperty(Wi,"__esModule",{value:!0});Wi.HelixChannelPointsApi=void 0;var dE=(y(),g(_)),hE=J(),ut=p(),bt=wg(),pE=Re(),mE=ne(),_E=ue(),yE=ae(),fE=N(),Xo=Vd(),Yo=$d(),zd=class extends fE.BaseApi{async getCustomRewards(e,t){return(await this._client.callApi({type:"helix",url:"channel_points/custom_rewards",userId:(0,ut.extractUserId)(e),scopes:["channel:read:redemptions","channel:manage:redemptions"],query:(0,bt.createCustomRewardsQuery)(e,t)})).data.map(n=>new Xo.HelixCustomReward(n,this._client))}async getCustomRewardsByIds(e,t){return t.length?(await this._client.callApi({type:"helix",url:"channel_points/custom_rewards",userId:(0,ut.extractUserId)(e),scopes:["channel:read:redemptions","channel:manage:redemptions"],query:(0,pE.createGetByIdsQuery)(e,t)})).data.map(n=>new Xo.HelixCustomReward(n,this._client)):[]}async getCustomRewardById(e,t){let r=await this.getCustomRewardsByIds(e,[t]);return r.length?r[0]:null}async createCustomReward(e,t){let r=await this._client.callApi({type:"helix",url:"channel_points/custom_rewards",method:"POST",userId:(0,ut.extractUserId)(e),scopes:["channel:manage:redemptions"],query:(0,hE.createBroadcasterQuery)(e),jsonBody:(0,bt.createCustomRewardBody)(t)});return new Xo.HelixCustomReward(r.data[0],this._client)}async updateCustomReward(e,t,r){let n=await this._client.callApi({type:"helix",url:"channel_points/custom_rewards",method:"PATCH",userId:(0,ut.extractUserId)(e),scopes:["channel:manage:redemptions"],query:(0,bt.createCustomRewardChangeQuery)(e,t),jsonBody:(0,bt.createCustomRewardBody)(r)});return new Xo.HelixCustomReward(n.data[0],this._client)}async deleteCustomReward(e,t){await this._client.callApi({type:"helix",url:"channel_points/custom_rewards",method:"DELETE",userId:(0,ut.extractUserId)(e),scopes:["channel:manage:redemptions"],query:(0,bt.createCustomRewardChangeQuery)(e,t)})}async getRedemptionsByIds(e,t,r){return r.length?(await this._client.callApi({type:"helix",url:"channel_points/custom_rewards/redemptions",userId:(0,ut.extractUserId)(e),scopes:["channel:read:redemptions","channel:manage:redemptions"],query:(0,bt.createRewardRedemptionsByIdsQuery)(e,t,r)})).data.map(a=>new Yo.HelixCustomRewardRedemption(a,this._client)):[]}async getRedemptionById(e,t,r){let n=await this.getRedemptionsByIds(e,t,[r]);return n.length?n[0]:null}async getRedemptionsForBroadcaster(e,t,r,n){let a=await this._client.callApi({type:"helix",url:"channel_points/custom_rewards/redemptions",userId:(0,ut.extractUserId)(e),scopes:["channel:read:redemptions","channel:manage:redemptions"],query:{...(0,bt.createRedemptionsForBroadcasterQuery)(e,t,r,n),...(0,yE.createPaginationQuery)(n)}});return(0,_E.createPaginatedResult)(a,Yo.HelixCustomRewardRedemption,this._client)}getRedemptionsForBroadcasterPaginated(e,t,r,n){return new mE.HelixPaginatedRequest({url:"channel_points/custom_rewards/redemptions",userId:(0,ut.extractUserId)(e),scopes:["channel:read:redemptions","channel:manage:redemptions"],query:(0,bt.createRedemptionsForBroadcasterQuery)(e,t,r,n)},this._client,a=>new Yo.HelixCustomRewardRedemption(a,this._client),50)}async updateRedemptionStatusByIds(e,t,r,n){return r.length?(await this._client.callApi({type:"helix",url:"channel_points/custom_rewards/redemptions",method:"PATCH",userId:(0,ut.extractUserId)(e),scopes:["channel:manage:redemptions"],query:(0,bt.createRewardRedemptionsByIdsQuery)(e,t,r),jsonBody:{status:n}})).data.map(s=>new Yo.HelixCustomRewardRedemption(s,this._client)):[]}};Wi.HelixChannelPointsApi=zd;Wi.HelixChannelPointsApi=zd=dE.__decorate([(0,ut.rtfm)("api","HelixChannelPointsApi")],zd)});var el=l($i=>{"use strict";Object.defineProperty($i,"__esModule",{value:!0});$i.HelixCharityCampaignAmount=void 0;var gE=(y(),g(_)),Vi=p(),Jd=class extends Vi.DataObject{get value(){return this[Vi.rawDataSymbol].value}get decimalPlaces(){return this[Vi.rawDataSymbol].decimal_places}get localizedValue(){return this.value/10**this.decimalPlaces}get currency(){return this[Vi.rawDataSymbol].currency}};$i.HelixCharityCampaignAmount=Jd;$i.HelixCharityCampaignAmount=Jd=gE.__decorate([(0,Vi.rtfm)("api","HelixCharityCampaignAmount")],Jd)});var Zd=l(zi=>{"use strict";Object.defineProperty(zi,"__esModule",{value:!0});zi.HelixCharityCampaign=void 0;var Cg=(y(),g(_)),bE=H(),Pe=p(),Hg=el(),tl=class extends Pe.DataObject{constructor(e,t){super(e),this._client=t}get id(){return this[Pe.rawDataSymbol].id}get broadcasterId(){return this[Pe.rawDataSymbol].broadcaster_id}get broadcasterName(){return this[Pe.rawDataSymbol].broadcaster_login}get broadcasterDisplayName(){return this[Pe.rawDataSymbol].broadcaster_name}async getBroadcaster(){return(0,Pe.checkRelationAssertion)(await this._client.users.getUserById(this[Pe.rawDataSymbol].broadcaster_id))}get charityName(){return this[Pe.rawDataSymbol].charity_name}get charityDescription(){return this[Pe.rawDataSymbol].charity_description}get charityLogo(){return this[Pe.rawDataSymbol].charity_logo}get charityWebsite(){return this[Pe.rawDataSymbol].charity_website}get currentAmount(){return new Hg.HelixCharityCampaignAmount(this[Pe.rawDataSymbol].current_amount)}get targetAmount(){return new Hg.HelixCharityCampaignAmount(this[Pe.rawDataSymbol].target_amount)}};zi.HelixCharityCampaign=tl;Cg.__decorate([(0,bE.Enumerable)(!1)],tl.prototype,"_client",void 0);zi.HelixCharityCampaign=tl=Cg.__decorate([(0,Pe.rtfm)("api","HelixCharityCampaign","id")],tl)});var Xd=l(Ki=>{"use strict";Object.defineProperty(Ki,"__esModule",{value:!0});Ki.HelixCharityCampaignDonation=void 0;var qg=(y(),g(_)),xE=H(),xt=p(),wE=el(),rl=class extends xt.DataObject{constructor(e,t){super(e),this._client=t}get campaignId(){return this[xt.rawDataSymbol].campaign_id}get donorId(){return this[xt.rawDataSymbol].user_id}get donorName(){return this[xt.rawDataSymbol].user_login}get donorDisplayName(){return this[xt.rawDataSymbol].user_name}async getDonor(){return(0,xt.checkRelationAssertion)(await this._client.users.getUserById(this[xt.rawDataSymbol].user_id))}get amount(){return new wE.HelixCharityCampaignAmount(this[xt.rawDataSymbol].amount)}};Ki.HelixCharityCampaignDonation=rl;qg.__decorate([(0,xE.Enumerable)(!1)],rl.prototype,"_client",void 0);Ki.HelixCharityCampaignDonation=rl=qg.__decorate([(0,xt.rtfm)("api","HelixCharityCampaignDonation")],rl)});var th=l(Ji=>{"use strict";Object.defineProperty(Ji,"__esModule",{value:!0});Ji.HelixCharityApi=void 0;var vE=(y(),g(_)),Eg=J(),Yd=p(),SE=ue(),HE=ae(),CE=N(),qE=Zd(),EE=Xd(),eh=class extends CE.BaseApi{async getCharityCampaign(e){let t=await this._client.callApi({type:"helix",url:"charity/campaigns",method:"GET",userId:(0,Yd.extractUserId)(e),scopes:["channel:read:charity"],query:(0,Eg.createBroadcasterQuery)(e)});return new qE.HelixCharityCampaign(t.data[0],this._client)}async getCharityCampaignDonations(e,t){let r=await this._client.callApi({type:"helix",url:"charity/donations",userId:(0,Yd.extractUserId)(e),scopes:["channel:read:charity"],query:{...(0,Eg.createBroadcasterQuery)(e),...(0,HE.createPaginationQuery)(t)}});return(0,SE.createPaginatedResult)(r,EE.HelixCharityCampaignDonation,this._client)}};Ji.HelixCharityApi=eh;Ji.HelixCharityApi=eh=vE.__decorate([(0,Yd.rtfm)("api","HelixCharityApi")],eh)});var Pg=l(Qe=>{"use strict";Object.defineProperty(Qe,"__esModule",{value:!0});Qe.createSendChatMessageBody=Qe.createSendChatMessageQuery=Qe.createShoutoutQuery=Qe.createChatColorUpdateQuery=Qe.createChatSettingsUpdateBody=void 0;var rh=p();function PE(i){return{slow_mode:i.slowModeEnabled,slow_mode_wait_time:i.slowModeDelay,follower_mode:i.followerOnlyModeEnabled,follower_mode_duration:i.followerOnlyModeDelay,subscriber_mode:i.subscriberOnlyModeEnabled,emote_mode:i.emoteOnlyModeEnabled,unique_chat_mode:i.uniqueChatModeEnabled,non_moderator_chat_delay:i.nonModeratorChatDelayEnabled,non_moderator_chat_delay_duration:i.nonModeratorChatDelay}}Qe.createChatSettingsUpdateBody=PE;function AE(i,e){return{user_id:(0,rh.extractUserId)(i),color:e}}Qe.createChatColorUpdateQuery=AE;function DE(i,e,t){return{from_broadcaster_id:(0,rh.extractUserId)(i),to_broadcaster_id:(0,rh.extractUserId)(e),moderator_id:t}}Qe.createShoutoutQuery=DE;function IE(i,e){return{broadcaster_id:i,sender_id:e}}Qe.createSendChatMessageQuery=IE;function TE(i,e){return{message:i,reply_parent_message_id:e?.replyParentMessageId}}Qe.createSendChatMessageBody=TE});var nh=l(il=>{"use strict";Object.defineProperty(il,"__esModule",{value:!0});il.HelixEmoteBase=void 0;var Je=p(),ih=class extends Je.DataObject{get id(){return this[Je.rawDataSymbol].id}get name(){return this[Je.rawDataSymbol].name}get formats(){return this[Je.rawDataSymbol].format}get scales(){return this[Je.rawDataSymbol].scale}get themeModes(){return this[Je.rawDataSymbol].theme_mode}getStaticImageUrl(e="1.0",t="light"){return this[Je.rawDataSymbol].format.includes("static")&&this[Je.rawDataSymbol].scale.includes(e)?this.getFormattedImageUrl(e,"static",t):null}getAnimatedImageUrl(e="1.0",t="light"){return this[Je.rawDataSymbol].format.includes("animated")&&this[Je.rawDataSymbol].scale.includes(e)?this.getFormattedImageUrl(e,"animated",t):null}getFormattedImageUrl(e="1.0",t="static",r="light"){return`https://static-cdn.jtvnw.net/emoticons/v2/${this[Je.rawDataSymbol].id}/${t}/${r}/${e}`}};il.HelixEmoteBase=ih});var Xi=l(Zi=>{"use strict";Object.defineProperty(Zi,"__esModule",{value:!0});Zi.HelixEmote=void 0;var RE=(y(),g(_)),Ag=p(),UE=nh(),ah=class extends UE.HelixEmoteBase{getImageUrl(e){return this[Ag.rawDataSymbol].images[`url_${e}x`]}};Zi.HelixEmote=ah;Zi.HelixEmote=ah=RE.__decorate([(0,Ag.rtfm)("api","HelixEmote","id")],ah)});var sh=l(en=>{"use strict";Object.defineProperty(en,"__esModule",{value:!0});en.HelixChannelEmote=void 0;var Dg=(y(),g(_)),BE=H(),Yi=p(),OE=Xi(),nl=class extends OE.HelixEmote{constructor(e,t){super(e),this._client=t}get tier(){return this[Yi.rawDataSymbol].tier||null}get type(){return this[Yi.rawDataSymbol].emote_type}get emoteSetId(){return this[Yi.rawDataSymbol].emote_set_id}async getAllEmotesFromSet(){return await this._client.chat.getEmotesFromSets([this[Yi.rawDataSymbol].emote_set_id])}};en.HelixChannelEmote=nl;Dg.__decorate([(0,BE.Enumerable)(!1)],nl.prototype,"_client",void 0);en.HelixChannelEmote=nl=Dg.__decorate([(0,Yi.rtfm)("api","HelixChannelEmote","id")],nl)});var lh=l(tn=>{"use strict";Object.defineProperty(tn,"__esModule",{value:!0});tn.HelixChatBadgeVersion=void 0;var jE=(y(),g(_)),jt=p(),oh=class extends jt.DataObject{get id(){return this[jt.rawDataSymbol].id}getImageUrl(e){return this[jt.rawDataSymbol][`image_url_${e}x`]}get title(){return this[jt.rawDataSymbol].title}get description(){return this[jt.rawDataSymbol].description}get clickAction(){return this[jt.rawDataSymbol].click_action}get clickUrl(){return this[jt.rawDataSymbol].click_url}};tn.HelixChatBadgeVersion=oh;tn.HelixChatBadgeVersion=oh=jE.__decorate([(0,jt.rtfm)("api","HelixChatBadgeVersion","id")],oh)});var uh=l(rn=>{"use strict";Object.defineProperty(rn,"__esModule",{value:!0});rn.HelixChatBadgeSet=void 0;var Ig=(y(),g(_)),Tg=fi(),al=p(),kE=lh(),sl=class extends al.DataObject{get id(){return this[al.rawDataSymbol].set_id}get versions(){return this[al.rawDataSymbol].versions.map(e=>new kE.HelixChatBadgeVersion(e))}getVersion(e){var t;return(t=this.versions.find(r=>r.id===e))!==null&&t!==void 0?t:null}};rn.HelixChatBadgeSet=sl;Ig.__decorate([(0,Tg.CachedGetter)()],sl.prototype,"versions",null);rn.HelixChatBadgeSet=sl=Ig.__decorate([Tg.Cacheable,(0,al.rtfm)("api","HelixChatBadgeSet","id")],sl)});var ch=l(nn=>{"use strict";Object.defineProperty(nn,"__esModule",{value:!0});nn.HelixChatChatter=void 0;var Rg=(y(),g(_)),ME=H(),ar=p(),ol=class extends ar.DataObject{constructor(e,t){super(e),this._client=t}get userId(){return this[ar.rawDataSymbol].user_id}get userName(){return this[ar.rawDataSymbol].user_login}get userDisplayName(){return this[ar.rawDataSymbol].user_name}async getUser(){return(0,ar.checkRelationAssertion)(await this._client.users.getUserById(this[ar.rawDataSymbol].user_id))}};nn.HelixChatChatter=ol;Rg.__decorate([(0,ME.Enumerable)(!1)],ol.prototype,"_client",void 0);nn.HelixChatChatter=ol=Rg.__decorate([(0,ar.rtfm)("api","HelixChatChatter")],ol)});var ll=l(an=>{"use strict";Object.defineProperty(an,"__esModule",{value:!0});an.HelixChatSettings=void 0;var LE=(y(),g(_)),ct=p(),dh=class extends ct.DataObject{get broadcasterId(){return this[ct.rawDataSymbol].broadcaster_id}get slowModeEnabled(){return this[ct.rawDataSymbol].slow_mode}get slowModeDelay(){return this[ct.rawDataSymbol].slow_mode_wait_time}get followerOnlyModeEnabled(){return this[ct.rawDataSymbol].follower_mode}get followerOnlyModeDelay(){return this[ct.rawDataSymbol].follower_mode_duration}get subscriberOnlyModeEnabled(){return this[ct.rawDataSymbol].subscriber_mode}get emoteOnlyModeEnabled(){return this[ct.rawDataSymbol].emote_mode}get uniqueChatModeEnabled(){return this[ct.rawDataSymbol].unique_chat_mode}};an.HelixChatSettings=dh;an.HelixChatSettings=dh=LE.__decorate([(0,ct.rtfm)("api","HelixChatSettings","broadcasterId")],dh)});var hh=l(sn=>{"use strict";Object.defineProperty(sn,"__esModule",{value:!0});sn.HelixEmoteFromSet=void 0;var Ug=(y(),g(_)),FE=H(),sr=p(),NE=Xi(),ul=class extends NE.HelixEmote{constructor(e,t){super(e),this._client=t}get type(){return this[sr.rawDataSymbol].emote_type}get emoteSetId(){return this[sr.rawDataSymbol].emote_set_id}get ownerId(){switch(this[sr.rawDataSymbol].owner_id){case"0":case"twitch":return null;default:return this[sr.rawDataSymbol].owner_id}}async getOwner(){switch(this[sr.rawDataSymbol].owner_id){case"0":case"twitch":return null;default:return await this._client.users.getUserById(this[sr.rawDataSymbol].owner_id)}}};sn.HelixEmoteFromSet=ul;Ug.__decorate([(0,FE.Enumerable)(!1)],ul.prototype,"_client",void 0);sn.HelixEmoteFromSet=ul=Ug.__decorate([(0,sr.rtfm)("api","HelixEmoteFromSet","id")],ul)});var ph=l(on=>{"use strict";Object.defineProperty(on,"__esModule",{value:!0});on.HelixUserEmote=void 0;var Bg=(y(),g(_)),kt=p(),QE=nh(),GE=H(),cl=class extends QE.HelixEmoteBase{constructor(e,t){super(e),this._client=t}get type(){return this[kt.rawDataSymbol].emote_type}get emoteSetId(){return this[kt.rawDataSymbol].emote_set_id||null}get ownerId(){return this[kt.rawDataSymbol].owner_id||null}async getAllEmotesFromSet(){return this[kt.rawDataSymbol].emote_set_id?await this._client.chat.getEmotesFromSets([this[kt.rawDataSymbol].emote_set_id]):null}async getOwner(){return this[kt.rawDataSymbol].owner_id?await this._client.users.getUserById(this[kt.rawDataSymbol].owner_id):null}};on.HelixUserEmote=cl;Bg.__decorate([(0,GE.Enumerable)(!1)],cl.prototype,"_client",void 0);on.HelixUserEmote=cl=Bg.__decorate([(0,kt.rtfm)("api","HelixUserEmote","id")],cl)});var yh=l(ln=>{"use strict";Object.defineProperty(ln,"__esModule",{value:!0});ln.HelixPrivilegedChatSettings=void 0;var WE=(y(),g(_)),mh=p(),VE=ll(),_h=class extends VE.HelixChatSettings{get nonModeratorChatDelayEnabled(){return this[mh.rawDataSymbol].non_moderator_chat_delay}get nonModeratorChatDelay(){return this[mh.rawDataSymbol].non_moderator_chat_delay_duration}};ln.HelixPrivilegedChatSettings=_h;ln.HelixPrivilegedChatSettings=_h=WE.__decorate([(0,mh.rtfm)("api","HelixPrivilegedChatSettings","broadcasterId")],_h)});var gh=l(un=>{"use strict";Object.defineProperty(un,"__esModule",{value:!0});un.HelixSentChatMessage=void 0;var $E=(y(),g(_)),Lr=p(),fh=class extends Lr.DataObject{get id(){return this[Lr.rawDataSymbol].message_id}get isSent(){return this[Lr.rawDataSymbol].is_sent}get dropReasonCode(){var e;return(e=this[Lr.rawDataSymbol].drop_reason)===null||e===void 0?void 0:e.code}get dropReasonMessage(){var e;return(e=this[Lr.rawDataSymbol].drop_reason)===null||e===void 0?void 0:e.message}};un.HelixSentChatMessage=fh;un.HelixSentChatMessage=fh=$E.__decorate([(0,Lr.rtfm)("api","HelixSentChatMessage","id")],fh)});var Og=l(dl=>{"use strict";Object.defineProperty(dl,"__esModule",{value:!0});dl.createSharedChatSessionQuery=void 0;var zE=p();function KE(i){return{broadcaster_id:(0,zE.extractUserId)(i)}}dl.createSharedChatSessionQuery=KE});var bh=l(dn=>{"use strict";Object.defineProperty(dn,"__esModule",{value:!0});dn.HelixSharedChatSessionParticipant=void 0;var jg=(y(),g(_)),JE=H(),cn=p(),hl=class extends cn.DataObject{constructor(e,t){super(e),this._client=t}get broadcasterId(){return this[cn.rawDataSymbol].broadcaster_id}async getBroadcaster(){return(0,cn.checkRelationAssertion)(await this._client.users.getUserById(this[cn.rawDataSymbol].broadcaster_id))}};dn.HelixSharedChatSessionParticipant=hl;jg.__decorate([(0,JE.Enumerable)(!1)],hl.prototype,"_client",void 0);dn.HelixSharedChatSessionParticipant=hl=jg.__decorate([(0,cn.rtfm)("api","HelixSharedChatSessionParticipant","broadcasterId")],hl)});var xh=l(hn=>{"use strict";Object.defineProperty(hn,"__esModule",{value:!0});hn.HelixSharedChatSession=void 0;var kg=(y(),g(_)),ZE=H(),wt=p(),XE=bh(),pl=class extends wt.DataObject{constructor(e,t){super(e),this._client=t}get sessionId(){return this[wt.rawDataSymbol].session_id}get hostBroadcasterId(){return this[wt.rawDataSymbol].host_broadcaster_id}async getHostBroadcaster(){return(0,wt.checkRelationAssertion)(await this._client.users.getUserById(this[wt.rawDataSymbol].host_broadcaster_id))}get participants(){return this[wt.rawDataSymbol].participants.map(e=>new XE.HelixSharedChatSessionParticipant(e,this._client))}get createdDate(){return new Date(this[wt.rawDataSymbol].created_at)}get updatedDate(){return new Date(this[wt.rawDataSymbol].updated_at)}};hn.HelixSharedChatSession=pl;kg.__decorate([(0,ZE.Enumerable)(!1)],pl.prototype,"_client",void 0);hn.HelixSharedChatSession=pl=kg.__decorate([(0,wt.rtfm)("api","HelixSharedChatSession","sessionId")],pl)});var Sh=l(pn=>{"use strict";Object.defineProperty(pn,"__esModule",{value:!0});pn.HelixChatApi=void 0;var YE=(y(),g(_)),wh=J(),K=p(),or=Pg(),Mt=Re(),eP=ne(),tP=kr(),Mg=ue(),Lg=ae(),rP=N(),iP=sh(),Fg=uh(),Ng=ch(),nP=ll(),aP=Xi(),sP=hh(),Qg=ph(),Gg=yh(),Wg=gh(),oP=Og(),lP=xh(),vh=class extends rP.BaseApi{async getChatters(e,t){let r=(0,K.extractUserId)(e),n=await this._client.callApi({type:"helix",url:"chat/chatters",userId:r,canOverrideScopedUserContext:!0,scopes:["moderator:read:chatters"],query:{...this._createModeratorActionQuery(r),...(0,Lg.createPaginationQuery)(t)}});return(0,Mg.createPaginatedResultWithTotal)(n,Ng.HelixChatChatter,this._client)}getChattersPaginated(e){let t=(0,K.extractUserId)(e);return new tP.HelixPaginatedRequestWithTotal({url:"chat/chatters",userId:t,canOverrideScopedUserContext:!0,scopes:["moderator:read:chatters"],query:this._createModeratorActionQuery(t)},this._client,r=>new Ng.HelixChatChatter(r,this._client),1e3)}async getGlobalBadges(){return(await this._client.callApi({type:"helix",url:"chat/badges/global"})).data.map(t=>new Fg.HelixChatBadgeSet(t))}async getChannelBadges(e){return(await this._client.callApi({type:"helix",url:"chat/badges",userId:(0,K.extractUserId)(e),query:(0,wh.createBroadcasterQuery)(e)})).data.map(r=>new Fg.HelixChatBadgeSet(r))}async getGlobalEmotes(){return(await this._client.callApi({type:"helix",url:"chat/emotes/global"})).data.map(t=>new aP.HelixEmote(t))}async getChannelEmotes(e){return(await this._client.callApi({type:"helix",url:"chat/emotes",userId:(0,K.extractUserId)(e),query:(0,wh.createBroadcasterQuery)(e)})).data.map(r=>new iP.HelixChannelEmote(r,this._client))}async getEmotesFromSets(e){return(await this._client.callApi({type:"helix",url:"chat/emotes/set",query:(0,Mt.createSingleKeyQuery)("emote_set_id",e)})).data.map(r=>new sP.HelixEmoteFromSet(r,this._client))}async getUserEmotes(e,t){let r=(0,K.extractUserId)(e),n=await this._client.callApi({type:"helix",url:"chat/emotes/user",userId:(0,K.extractUserId)(e),scopes:["user:read:emotes"],query:{...(0,Mt.createSingleKeyQuery)("user_id",r),...(0,Mt.createSingleKeyQuery)("broadcasterId",t?.broadcaster?(0,K.extractUserId)(t.broadcaster):void 0),...(0,Lg.createPaginationQuery)(t)}});return(0,Mg.createPaginatedResult)(n,Qg.HelixUserEmote,this._client)}getUserEmotesPaginated(e,t){let r=(0,K.extractUserId)(e);return new eP.HelixPaginatedRequest({url:"chat/emotes/user",userId:r,scopes:["user:read:emotes"],query:{...(0,Mt.createSingleKeyQuery)("user_id",r),...(0,Mt.createSingleKeyQuery)("broadcasterId",t?(0,K.extractUserId)(t):void 0)}},this._client,n=>new Qg.HelixUserEmote(n,this._client))}async getSettings(e){let t=await this._client.callApi({type:"helix",url:"chat/settings",userId:(0,K.extractUserId)(e),query:(0,wh.createBroadcasterQuery)(e)});return new nP.HelixChatSettings(t.data[0])}async getSettingsPrivileged(e){let t=(0,K.extractUserId)(e),r=await this._client.callApi({type:"helix",url:"chat/settings",userId:t,canOverrideScopedUserContext:!0,scopes:["moderator:read:chat_settings"],query:this._createModeratorActionQuery(t)});return new Gg.HelixPrivilegedChatSettings(r.data[0])}async updateSettings(e,t){let r=(0,K.extractUserId)(e),n=await this._client.callApi({type:"helix",url:"chat/settings",method:"PATCH",userId:r,canOverrideScopedUserContext:!0,scopes:["moderator:manage:chat_settings"],query:this._createModeratorActionQuery(r),jsonBody:(0,or.createChatSettingsUpdateBody)(t)});return new Gg.HelixPrivilegedChatSettings(n.data[0])}async sendChatMessage(e,t,r){let n=(0,K.extractUserId)(e),a=await this._client.callApi({type:"helix",url:"chat/messages",method:"POST",userId:n,canOverrideScopedUserContext:!0,scopes:["user:write:chat"],query:(0,or.createSendChatMessageQuery)(n,this._getUserContextIdWithDefault(n)),jsonBody:(0,or.createSendChatMessageBody)(t,r)});return new Wg.HelixSentChatMessage(a.data[0])}async sendChatMessageAsApp(e,t,r,n){let a=(0,K.extractUserId)(e),s=(0,K.extractUserId)(t),o=await this._client.callApi({type:"helix",url:"chat/messages",method:"POST",forceType:"app",query:(0,or.createSendChatMessageQuery)(s,a),jsonBody:(0,or.createSendChatMessageBody)(r,n)});return new Wg.HelixSentChatMessage(o.data[0])}async sendAnnouncement(e,t){let r=(0,K.extractUserId)(e);await this._client.callApi({type:"helix",url:"chat/announcements",method:"POST",userId:r,canOverrideScopedUserContext:!0,scopes:["moderator:manage:announcements"],query:this._createModeratorActionQuery(r),jsonBody:{message:t.message,color:t.color}})}async getColorsForUsers(e){let t=await this._client.callApi({type:"helix",url:"chat/color",query:(0,Mt.createSingleKeyQuery)("user_id",e.map(K.extractUserId))});return new Map(t.data.map(r=>[r.user_id,r.color||null]))}async getColorForUser(e){let t=await this._client.callApi({type:"helix",url:"chat/color",userId:(0,K.extractUserId)(e),query:(0,Mt.createSingleKeyQuery)("user_id",(0,K.extractUserId)(e))});if(t.data.length)return t.data[0].color||null}async setColorForUser(e,t){await this._client.callApi({type:"helix",url:"chat/color",method:"PUT",userId:(0,K.extractUserId)(e),scopes:["user:manage:chat_color"],query:(0,or.createChatColorUpdateQuery)(e,t)})}async shoutoutUser(e,t){let r=(0,K.extractUserId)(e);await this._client.callApi({type:"helix",url:"chat/shoutouts",method:"POST",userId:r,canOverrideScopedUserContext:!0,scopes:["moderator:manage:shoutouts"],query:(0,or.createShoutoutQuery)(e,t,this._getUserContextIdWithDefault(r))})}async getSharedChatSession(e){let t=(0,K.extractUserId)(e),r=await this._client.callApi({type:"helix",url:"shared_chat/session",userId:t,query:(0,oP.createSharedChatSessionQuery)(t)});return r.data.length===0?null:new lP.HelixSharedChatSession(r.data[0],this._client)}_createModeratorActionQuery(e){return(0,Mt.createModeratorActionQuery)(e,this._getUserContextIdWithDefault(e))}};pn.HelixChatApi=vh;pn.HelixChatApi=vh=YE.__decorate([(0,K.rtfm)("api","HelixChatApi")],vh)});var Vg=l(Fr=>{"use strict";Object.defineProperty(Fr,"__esModule",{value:!0});Fr.createClipQuery=Fr.createClipCreateQuery=void 0;var uP=p();function cP(i,e){return{broadcaster_id:(0,uP.extractUserId)(i),has_delay:e.toString()}}Fr.createClipCreateQuery=cP;function dP(i){let{filterType:e,ids:t,startDate:r,endDate:n,isFeatured:a}=i;return{[e]:t,started_at:r,ended_at:n,is_featured:a?.toString()}}Fr.createClipQuery=dP});var Hh=l(mn=>{"use strict";Object.defineProperty(mn,"__esModule",{value:!0});mn.HelixClip=void 0;var $g=(y(),g(_)),hP=H(),j=p(),ml=class extends j.DataObject{constructor(e,t){super(e),this._client=t}get id(){return this[j.rawDataSymbol].id}get url(){return this[j.rawDataSymbol].url}get embedUrl(){return this[j.rawDataSymbol].embed_url}get broadcasterId(){return this[j.rawDataSymbol].broadcaster_id}get broadcasterDisplayName(){return this[j.rawDataSymbol].broadcaster_name}async getBroadcaster(){return(0,j.checkRelationAssertion)(await this._client.users.getUserById(this[j.rawDataSymbol].broadcaster_id))}get creatorId(){return this[j.rawDataSymbol].creator_id}get creatorDisplayName(){return this[j.rawDataSymbol].creator_name}async getCreator(){return(0,j.checkRelationAssertion)(await this._client.users.getUserById(this[j.rawDataSymbol].creator_id))}get videoId(){return this[j.rawDataSymbol].video_id}async getVideo(){return(0,j.checkRelationAssertion)(await this._client.videos.getVideoById(this[j.rawDataSymbol].video_id))}get gameId(){return this[j.rawDataSymbol].game_id}async getGame(){return this[j.rawDataSymbol].game_id?(0,j.checkRelationAssertion)(await this._client.games.getGameById(this[j.rawDataSymbol].game_id)):null}get language(){return this[j.rawDataSymbol].language}get title(){return this[j.rawDataSymbol].title}get views(){return this[j.rawDataSymbol].view_count}get creationDate(){return new Date(this[j.rawDataSymbol].created_at)}get thumbnailUrl(){return this[j.rawDataSymbol].thumbnail_url}get duration(){return this[j.rawDataSymbol].duration}get vodOffset(){return this[j.rawDataSymbol].vod_offset}get isFeatured(){return this[j.rawDataSymbol].is_featured}};mn.HelixClip=ml;$g.__decorate([(0,hP.Enumerable)(!1)],ml.prototype,"_client",void 0);mn.HelixClip=ml=$g.__decorate([(0,j.rtfm)("api","HelixClip","id")],ml)});var Eh=l(_n=>{"use strict";Object.defineProperty(_n,"__esModule",{value:!0});_n.HelixClipApi=void 0;var zg=(y(),g(_)),pP=H(),Nr=p(),Ch=Vg(),mP=Ut(),_P=ne(),yP=ue(),fP=ae(),gP=N(),qh=Hh(),_l=class extends gP.BaseApi{constructor(){super(...arguments),this._getClipByIdBatcher=new mP.HelixRequestBatcher({url:"clips"},"id","id",this._client,e=>new qh.HelixClip(e,this._client))}async getClipsForBroadcaster(e,t={}){return await this._getClips({...t,filterType:"broadcaster_id",ids:(0,Nr.extractUserId)(e),userId:(0,Nr.extractUserId)(e)})}getClipsForBroadcasterPaginated(e,t={}){return this._getClipsPaginated({...t,filterType:"broadcaster_id",ids:(0,Nr.extractUserId)(e),userId:(0,Nr.extractUserId)(e)})}async getClipsForGame(e,t={}){return await this._getClips({...t,filterType:"game_id",ids:e})}getClipsForGamePaginated(e,t={}){return this._getClipsPaginated({...t,filterType:"game_id",ids:e})}async getClipsByIds(e){return(await this._getClips({filterType:"id",ids:e})).data}async getClipById(e){let t=await this.getClipsByIds([e]);return t.length?t[0]:null}async getClipByIdBatched(e){return await this._getClipByIdBatcher.request(e)}async createClip(e){let{channel:t,createAfterDelay:r=!1}=e;return(await this._client.callApi({type:"helix",url:"clips",method:"POST",userId:(0,Nr.extractUserId)(t),scopes:["clips:edit"],canOverrideScopedUserContext:!0,query:(0,Ch.createClipCreateQuery)(t,r)})).data[0].id}async _getClips(e){if(!e.ids.length)return{data:[]};let t=await this._client.callApi({type:"helix",url:"clips",userId:e.userId,query:{...(0,Ch.createClipQuery)(e),...(0,fP.createPaginationQuery)(e)}});return(0,yP.createPaginatedResult)(t,qh.HelixClip,this._client)}_getClipsPaginated(e){return new _P.HelixPaginatedRequest({url:"clips",userId:e.userId,query:(0,Ch.createClipQuery)(e)},this._client,t=>new qh.HelixClip(t,this._client))}};_n.HelixClipApi=_l;zg.__decorate([(0,pP.Enumerable)(!1)],_l.prototype,"_getClipByIdBatcher",void 0);_n.HelixClipApi=_l=zg.__decorate([(0,Nr.rtfm)("api","HelixClipApi")],_l)});var Ah=l(fl=>{"use strict";Object.defineProperty(fl,"__esModule",{value:!0});fl.HelixContentClassificationLabel=void 0;var yl=p(),Ph=class extends yl.DataObject{get id(){return this[yl.rawDataSymbol].id}get name(){return this[yl.rawDataSymbol].name}get description(){return this[yl.rawDataSymbol].description}};fl.HelixContentClassificationLabel=Ph});var Ih=l(yn=>{"use strict";Object.defineProperty(yn,"__esModule",{value:!0});yn.HelixContentClassificationLabelApi=void 0;var bP=(y(),g(_)),xP=p(),wP=N(),vP=Ah(),Dh=class extends wP.BaseApi{async getAll(e){return(await this._client.callApi({url:"content_classification_labels",query:{locale:e}})).data.map(r=>new vP.HelixContentClassificationLabel(r))}};yn.HelixContentClassificationLabelApi=Dh;yn.HelixContentClassificationLabelApi=Dh=bP.__decorate([(0,xP.rtfm)("api","HelixContentClassificationLabelApi")],Dh)});var Kg=l(Qr=>{"use strict";Object.defineProperty(Qr,"__esModule",{value:!0});Qr.createDropsEntitlementUpdateBody=Qr.createDropsEntitlementQuery=void 0;var SP=H(),HP=p();function CP(i,e){return{user_id:e?(0,SP.mapOptional)(i.user,HP.extractUserId):void 0,game_id:i.gameId,fulfillment_status:i.fulfillmentStatus}}Qr.createDropsEntitlementQuery=CP;function qP(i,e){return{fulfillment_status:e,entitlement_ids:i}}Qr.createDropsEntitlementUpdateBody=qP});var Th=l(fn=>{"use strict";Object.defineProperty(fn,"__esModule",{value:!0});fn.HelixDropsEntitlement=void 0;var Jg=(y(),g(_)),EP=H(),Ue=p(),gl=class extends Ue.DataObject{constructor(e,t){super(e),this._client=t}get id(){return this[Ue.rawDataSymbol].id}get rewardId(){return this[Ue.rawDataSymbol].benefit_id}get grantDate(){return new Date(this[Ue.rawDataSymbol].timestamp)}get userId(){return this[Ue.rawDataSymbol].user_id}async getUser(){return(0,Ue.checkRelationAssertion)(await this._client.users.getUserById(this[Ue.rawDataSymbol].user_id))}get gameId(){return this[Ue.rawDataSymbol].game_id}async getGame(){return(0,Ue.checkRelationAssertion)(await this._client.games.getGameById(this[Ue.rawDataSymbol].game_id))}get fulfillmentStatus(){return this[Ue.rawDataSymbol].fulfillment_status}get updateDate(){return new Date(this[Ue.rawDataSymbol].last_updated)}};fn.HelixDropsEntitlement=gl;Jg.__decorate([(0,EP.Enumerable)(!1)],gl.prototype,"_client",void 0);fn.HelixDropsEntitlement=gl=Jg.__decorate([(0,Ue.rtfm)("api","HelixDropsEntitlement")],gl)});var Oh=l(gn=>{"use strict";Object.defineProperty(gn,"__esModule",{value:!0});gn.HelixEntitlementApi=void 0;var Zg=(y(),g(_)),Uh=H(),Bh=p(),Rh=Kg(),PP=Ut(),AP=ne(),DP=ue(),IP=ae(),TP=N(),bl=Th(),xl=class extends TP.BaseApi{constructor(){super(...arguments),this._getDropsEntitlementByIdBatcher=new PP.HelixRequestBatcher({url:"entitlements/drops"},"id","id",this._client,e=>new bl.HelixDropsEntitlement(e,this._client))}async getDropsEntitlements(e,t=!1){let r=await this._client.callApi({type:"helix",url:"entitlements/drops",userId:(0,Uh.mapOptional)(e.user,Bh.extractUserId),forceType:e.user&&t?"app":void 0,query:{...(0,Rh.createDropsEntitlementQuery)(e,t),...(0,IP.createPaginationQuery)(e)}});return(0,DP.createPaginatedResult)(r,bl.HelixDropsEntitlement,this._client)}getDropsEntitlementsPaginated(e,t=!1){return new AP.HelixPaginatedRequest({url:"entitlements/drops",userId:(0,Uh.mapOptional)(e.user,Bh.extractUserId),forceType:e.user&&t?"app":void 0,query:(0,Rh.createDropsEntitlementQuery)(e,t)},this._client,r=>new bl.HelixDropsEntitlement(r,this._client))}async getDropsEntitlementsByIds(e){return(await this._client.callApi({type:"helix",url:"entitlements/drops",query:{id:e}})).data.map(r=>new bl.HelixDropsEntitlement(r,this._client))}async getDropsEntitlementById(e){var t;return(t=(await this.getDropsEntitlementsByIds([e]))[0])!==null&&t!==void 0?t:null}async getDropsEntitlementByIdBatched(e){return await this._getDropsEntitlementByIdBatcher.request(e)}async updateDropsEntitlements(e,t){let r=await this._client.callApi({type:"helix",url:"entitlements/drops",method:"PATCH",jsonBody:(0,Rh.createDropsEntitlementUpdateBody)(e,t)});return new Map(r.data.flatMap(n=>n.ids.map(a=>[a,n.status])))}};gn.HelixEntitlementApi=xl;Zg.__decorate([(0,Uh.Enumerable)(!1)],xl.prototype,"_getDropsEntitlementByIdBatcher",void 0);gn.HelixEntitlementApi=xl=Zg.__decorate([(0,Bh.rtfm)("api","HelixEntitlementApi")],xl)});var Yg=l(pe=>{"use strict";Object.defineProperty(pe,"__esModule",{value:!0});pe.createEventSubConduitShardsUpdateCondition=pe.createEventSubConduitUpdateCondition=pe.createEventSubConduitCondition=pe.createEventSubDropEntitlementGrantCondition=pe.createEventSubUserCondition=pe.createEventSubModeratorCondition=pe.createEventSubRewardCondition=pe.createEventSubBroadcasterCondition=void 0;var Xg=p();function RP(i){return{broadcaster_user_id:(0,Xg.extractUserId)(i)}}pe.createEventSubBroadcasterCondition=RP;function UP(i,e){return{broadcaster_user_id:(0,Xg.extractUserId)(i),reward_id:e}}pe.createEventSubRewardCondition=UP;function BP(i,e){return{broadcaster_user_id:i,moderator_user_id:e}}pe.createEventSubModeratorCondition=BP;function OP(i,e){return{broadcaster_user_id:i,user_id:e}}pe.createEventSubUserCondition=OP;function jP(i){return{organization_id:i.organizationId,category_id:i.categoryId,campaign_id:i.campaignId}}pe.createEventSubDropEntitlementGrantCondition=jP;function kP(i,e){return{conduit_id:i,status:e}}pe.createEventSubConduitCondition=kP;function MP(i,e){return{id:i,shard_count:e.toString()}}pe.createEventSubConduitUpdateCondition=MP;function LP(i,e){return{conduit_id:i,shards:e}}pe.createEventSubConduitShardsUpdateCondition=LP});var vl=l(bn=>{"use strict";Object.defineProperty(bn,"__esModule",{value:!0});bn.HelixEventSubSubscription=void 0;var eb=(y(),g(_)),FP=H(),Ge=p(),wl=class extends Ge.DataObject{constructor(e,t){super(e),this._client=t}get id(){return this[Ge.rawDataSymbol].id}get status(){return this[Ge.rawDataSymbol].status}get type(){return this[Ge.rawDataSymbol].type}get cost(){return this[Ge.rawDataSymbol].cost}get condition(){return this[Ge.rawDataSymbol].condition}get creationDate(){return new Date(this[Ge.rawDataSymbol].created_at)}get transportMethod(){return this[Ge.rawDataSymbol].transport.method}async unsubscribe(){await this._client.eventSub.deleteSubscription(this[Ge.rawDataSymbol].id)}get _transport(){return this[Ge.rawDataSymbol].transport}set _status(e){this[Ge.rawDataSymbol].status=e}};bn.HelixEventSubSubscription=wl;eb.__decorate([(0,FP.Enumerable)(!1)],wl.prototype,"_client",void 0);bn.HelixEventSubSubscription=wl=eb.__decorate([(0,Ge.rtfm)("api","HelixEventSubSubscription","id")],wl)});var kh=l(xn=>{"use strict";Object.defineProperty(xn,"__esModule",{value:!0});xn.HelixPaginatedEventSubSubscriptionsRequest=void 0;var NP=(y(),g(_)),QP=p(),GP=kr(),WP=vl(),jh=class extends GP.HelixPaginatedRequestWithTotal{constructor(e,t,r){super({url:"eventsub/subscriptions",userId:t,query:e},r,n=>new WP.HelixEventSubSubscription(n,r))}async getTotalCost(){var e;return((e=this._currentData)!==null&&e!==void 0?e:await this._fetchData({query:{after:void 0}})).total_cost}async getMaxTotalCost(){var e;return((e=this._currentData)!==null&&e!==void 0?e:await this._fetchData({query:{after:void 0}})).max_total_cost}};xn.HelixPaginatedEventSubSubscriptionsRequest=jh;xn.HelixPaginatedEventSubSubscriptionsRequest=jh=NP.__decorate([(0,QP.rtfm)("api","HelixPaginatedEventSubSubscriptionsRequest")],jh)});var Mh=l(wn=>{"use strict";Object.defineProperty(wn,"__esModule",{value:!0});wn.HelixEventSubConduit=void 0;var tb=(y(),g(_)),VP=H(),lr=p(),Sl=class extends lr.DataObject{constructor(e,t){super(e),this._client=t}get id(){return this[lr.rawDataSymbol].id}get shardCount(){return this[lr.rawDataSymbol].shard_count}async update(e){return await this._client.eventSub.updateConduit(this[lr.rawDataSymbol].id,e)}async delete(){await this._client.eventSub.deleteConduit(this[lr.rawDataSymbol].id)}async getShards(){return await this._client.eventSub.getConduitShards(this[lr.rawDataSymbol].id)}};wn.HelixEventSubConduit=Sl;tb.__decorate([(0,VP.Enumerable)(!1)],Sl.prototype,"_client",void 0);wn.HelixEventSubConduit=Sl=tb.__decorate([(0,lr.rtfm)("api","HelixEventSubConduit")],Sl)});var Fh=l(Sn=>{"use strict";Object.defineProperty(Sn,"__esModule",{value:!0});Sn.HelixEventSubConduitShard=void 0;var $P=(y(),g(_)),vn=p(),Lh=class extends vn.DataObject{get id(){return this[vn.rawDataSymbol].id}get status(){return this[vn.rawDataSymbol].status}get transportMethod(){return this[vn.rawDataSymbol].transport.method}};Sn.HelixEventSubConduitShard=Lh;Sn.HelixEventSubConduitShard=Lh=$P.__decorate([(0,vn.rtfm)("api","HelixEventSubConduitShard")],Lh)});var Wh=l(En=>{"use strict";Object.defineProperty(En,"__esModule",{value:!0});En.HelixEventSubApi=void 0;var zP=(y(),g(_)),KP=H(),R=p(),S=Yg(),Ze=Re(),JP=ne(),Hn=ue(),Cn=ae(),ZP=N(),qn=vl(),Hl=kh(),Nh=Mh(),Qh=Fh(),Gh=class extends ZP.BaseApi{async getSubscriptions(e){let t=await this._client.callApi({type:"helix",url:"eventsub/subscriptions",query:(0,Cn.createPaginationQuery)(e)});return{...(0,Hn.createPaginatedResultWithTotal)(t,qn.HelixEventSubSubscription,this._client),totalCost:t.total_cost,maxTotalCost:t.max_total_cost}}getSubscriptionsPaginated(){return new Hl.HelixPaginatedEventSubSubscriptionsRequest({},void 0,this._client)}async getSubscriptionsForStatus(e,t){let r=await this._client.callApi({type:"helix",url:"eventsub/subscriptions",query:{...(0,Cn.createPaginationQuery)(t),status:e}});return{...(0,Hn.createPaginatedResultWithTotal)(r,qn.HelixEventSubSubscription,this._client),totalCost:r.total_cost,maxTotalCost:r.max_total_cost}}getSubscriptionsForStatusPaginated(e){return new Hl.HelixPaginatedEventSubSubscriptionsRequest({status:e},void 0,this._client)}async getSubscriptionsForType(e,t){let r=await this._client.callApi({type:"helix",url:"eventsub/subscriptions",query:{...(0,Cn.createPaginationQuery)(t),type:e}});return{...(0,Hn.createPaginatedResultWithTotal)(r,qn.HelixEventSubSubscription,this._client),totalCost:r.total_cost,maxTotalCost:r.max_total_cost}}getSubscriptionsForTypePaginated(e){return new Hl.HelixPaginatedEventSubSubscriptionsRequest({type:e},void 0,this._client)}async getSubscriptionsForUser(e,t){let r=await this._client.callApi({type:"helix",url:"eventsub/subscriptions",userId:(0,R.extractUserId)(e),query:{...(0,Ze.createSingleKeyQuery)("user_id",(0,R.extractUserId)(e)),...(0,Cn.createPaginationQuery)(t)}});return{...(0,Hn.createPaginatedResultWithTotal)(r,qn.HelixEventSubSubscription,this._client),totalCost:r.total_cost,maxTotalCost:r.max_total_cost}}getSubscriptionsForUserPaginated(e){let t=(0,R.extractUserId)(e);return new Hl.HelixPaginatedEventSubSubscriptionsRequest((0,Ze.createSingleKeyQuery)("user_id",t),t,this._client)}async createSubscription(e,t,r,n,a,s,o,c){let d=n.method==="webhook"||n.method==="conduit",h=d?void 0:s;if(!d&&!a)throw new Error(`Transport ${n.method} can only handle subscriptions with user context`);let b={type:e,version:t,condition:r,transport:n};c&&(b.is_batching_enabled=!0);let q=await this._client.callApi({type:"helix",url:"eventsub/subscriptions",method:"POST",scopes:h,userId:(0,KP.mapOptional)(a,R.extractUserId),canOverrideScopedUserContext:o,forceType:d?"app":"user",jsonBody:b});return new qn.HelixEventSubSubscription(q.data[0],this._client)}async deleteSubscription(e){await this._client.callApi({type:"helix",url:"eventsub/subscriptions",method:"DELETE",query:{id:e}})}async deleteAllSubscriptions(){await this._deleteSubscriptionsWithCondition()}async deleteBrokenSubscriptions(){await this._deleteSubscriptionsWithCondition(e=>e.status!=="enabled"&&e.status!=="webhook_callback_verification_pending")}async subscribeToStreamOnlineEvents(e,t){return await this.createSubscription("stream.online","1",(0,S.createEventSubBroadcasterCondition)(e),t,e)}async subscribeToStreamOfflineEvents(e,t){return await this.createSubscription("stream.offline","1",(0,S.createEventSubBroadcasterCondition)(e),t,e)}async subscribeToChannelUpdateEvents(e,t){return await this.createSubscription("channel.update","2",(0,S.createEventSubBroadcasterCondition)(e),t,e)}async subscribeToChannelFollowEvents(e,t){let r=(0,R.extractUserId)(e);return await this.createSubscription("channel.follow","2",(0,S.createEventSubModeratorCondition)(r,this._getUserContextIdWithDefault(r)),t,r,["moderator:read:followers"],!0)}async subscribeToChannelSubscriptionEvents(e,t){return await this.createSubscription("channel.subscribe","1",(0,S.createEventSubBroadcasterCondition)(e),t,e,["channel:read:subscriptions"])}async subscribeToChannelSubscriptionGiftEvents(e,t){return await this.createSubscription("channel.subscription.gift","1",(0,S.createEventSubBroadcasterCondition)(e),t,e,["channel:read:subscriptions"])}async subscribeToChannelSubscriptionMessageEvents(e,t){return await this.createSubscription("channel.subscription.message","1",(0,S.createEventSubBroadcasterCondition)(e),t,e,["channel:read:subscriptions"])}async subscribeToChannelSubscriptionEndEvents(e,t){return await this.createSubscription("channel.subscription.end","1",(0,S.createEventSubBroadcasterCondition)(e),t,e,["channel:read:subscriptions"])}async subscribeToChannelCheerEvents(e,t){return await this.createSubscription("channel.cheer","1",(0,S.createEventSubBroadcasterCondition)(e),t,e,["bits:read"])}async subscribeToChannelCharityCampaignStartEvents(e,t){return await this.createSubscription("channel.charity_campaign.start","1",(0,S.createEventSubBroadcasterCondition)(e),t,e,["channel:read:charity"])}async subscribeToChannelCharityCampaignStopEvents(e,t){return await this.createSubscription("channel.charity_campaign.stop","1",(0,S.createEventSubBroadcasterCondition)(e),t,e,["channel:read:charity"])}async subscribeToChannelCharityDonationEvents(e,t){return await this.createSubscription("channel.charity_campaign.donate","1",(0,S.createEventSubBroadcasterCondition)(e),t,e,["channel:read:charity"])}async subscribeToChannelCharityCampaignProgressEvents(e,t){return await this.createSubscription("channel.charity_campaign.progress","1",(0,S.createEventSubBroadcasterCondition)(e),t,e,["channel:read:charity"])}async subscribeToChannelBanEvents(e,t){return await this.createSubscription("channel.ban","1",(0,S.createEventSubBroadcasterCondition)(e),t,e,["channel:moderate"])}async subscribeToChannelUnbanEvents(e,t){return await this.createSubscription("channel.unban","1",(0,S.createEventSubBroadcasterCondition)(e),t,e,["channel:moderate"])}async subscribeToChannelShieldModeBeginEvents(e,t){let r=(0,R.extractUserId)(e);return await this.createSubscription("channel.shield_mode.begin","1",(0,S.createEventSubModeratorCondition)(r,this._getUserContextIdWithDefault(r)),t,r,["moderator:read:shield_mode","moderator:manage:shield_mode"],!0)}async subscribeToChannelShieldModeEndEvents(e,t){let r=(0,R.extractUserId)(e);return await this.createSubscription("channel.shield_mode.end","1",(0,S.createEventSubModeratorCondition)(r,this._getUserContextIdWithDefault(r)),t,r,["moderator:read:shield_mode","moderator:manage:shield_mode"],!0)}async subscribeToChannelModeratorAddEvents(e,t){return await this.createSubscription("channel.moderator.add","1",(0,S.createEventSubBroadcasterCondition)(e),t,e,["moderation:read"])}async subscribeToChannelModeratorRemoveEvents(e,t){return await this.createSubscription("channel.moderator.remove","1",(0,S.createEventSubBroadcasterCondition)(e),t,e,["moderation:read"])}async subscribeToChannelRaidEventsFrom(e,t){return await this.createSubscription("channel.raid","1",(0,Ze.createSingleKeyQuery)("from_broadcaster_user_id",(0,R.extractUserId)(e)),t,e)}async subscribeToChannelRaidEventsTo(e,t){return await this.createSubscription("channel.raid","1",(0,Ze.createSingleKeyQuery)("to_broadcaster_user_id",(0,R.extractUserId)(e)),t,e)}async subscribeToChannelRewardAddEvents(e,t){return await this.createSubscription("channel.channel_points_custom_reward.add","1",(0,S.createEventSubBroadcasterCondition)(e),t,e,["channel:read:redemptions","channel:manage:redemptions"])}async subscribeToChannelRewardUpdateEvents(e,t){return await this.createSubscription("channel.channel_points_custom_reward.update","1",(0,S.createEventSubBroadcasterCondition)(e),t,e,["channel:read:redemptions","channel:manage:redemptions"])}async subscribeToChannelRewardUpdateEventsForReward(e,t,r){return await this.createSubscription("channel.channel_points_custom_reward.update","1",(0,S.createEventSubRewardCondition)(e,t),r,e,["channel:read:redemptions","channel:manage:redemptions"])}async subscribeToChannelRewardRemoveEvents(e,t){return await this.createSubscription("channel.channel_points_custom_reward.remove","1",(0,S.createEventSubBroadcasterCondition)(e),t,e,["channel:read:redemptions","channel:manage:redemptions"])}async subscribeToChannelRewardRemoveEventsForReward(e,t,r){return await this.createSubscription("channel.channel_points_custom_reward.remove","1",(0,S.createEventSubRewardCondition)(e,t),r,e,["channel:read:redemptions","channel:manage:redemptions"])}async subscribeToChannelRedemptionAddEvents(e,t){return await this.createSubscription("channel.channel_points_custom_reward_redemption.add","1",(0,S.createEventSubBroadcasterCondition)(e),t,e,["channel:read:redemptions","channel:manage:redemptions"])}async subscribeToChannelRedemptionAddEventsForReward(e,t,r){return await this.createSubscription("channel.channel_points_custom_reward_redemption.add","1",(0,S.createEventSubRewardCondition)(e,t),r,e,["channel:read:redemptions","channel:manage:redemptions"])}async subscribeToChannelRedemptionUpdateEvents(e,t){return await this.createSubscription("channel.channel_points_custom_reward_redemption.update","1",(0,S.createEventSubBroadcasterCondition)(e),t,e,["channel:read:redemptions","channel:manage:redemptions"])}async subscribeToChannelRedemptionUpdateEventsForReward(e,t,r){return await this.createSubscription("channel.channel_points_custom_reward_redemption.update","1",(0,S.createEventSubRewardCondition)(e,t),r,e,["channel:read:redemptions","channel:manage:redemptions"])}async subscribeToChannelAutomaticRewardRedemptionAddEvents(e,t){return await this.createSubscription("channel.channel_points_automatic_reward_redemption.add","1",(0,S.createEventSubBroadcasterCondition)(e),t,e,["channel:read:redemptions","channel:manage:redemptions"])}async subscribeToChannelPollBeginEvents(e,t){return await this.createSubscription("channel.poll.begin","1",(0,S.createEventSubBroadcasterCondition)(e),t,e,["channel:read:polls","channel:manage:polls"])}async subscribeToChannelPollProgressEvents(e,t){return await this.createSubscription("channel.poll.progress","1",(0,S.createEventSubBroadcasterCondition)(e),t,e,["channel:read:polls","channel:manage:polls"])}async subscribeToChannelPollEndEvents(e,t){return await this.createSubscription("channel.poll.end","1",(0,S.createEventSubBroadcasterCondition)(e),t,e,["channel:read:polls","channel:manage:polls"])}async subscribeToChannelPredictionBeginEvents(e,t){return await this.createSubscription("channel.prediction.begin","1",(0,S.createEventSubBroadcasterCondition)(e),t,e,["channel:read:predictions","channel:manage:predictions"])}async subscribeToChannelPredictionProgressEvents(e,t){return await this.createSubscription("channel.prediction.progress","1",(0,S.createEventSubBroadcasterCondition)(e),t,e,["channel:read:predictions","channel:manage:predictions"])}async subscribeToChannelPredictionLockEvents(e,t){return await this.createSubscription("channel.prediction.lock","1",(0,S.createEventSubBroadcasterCondition)(e),t,e,["channel:read:predictions","channel:manage:predictions"])}async subscribeToChannelPredictionEndEvents(e,t){return await this.createSubscription("channel.prediction.end","1",(0,S.createEventSubBroadcasterCondition)(e),t,e,["channel:read:predictions","channel:manage:predictions"])}async subscribeToChannelGoalBeginEvents(e,t){return await this.createSubscription("channel.goal.begin","1",(0,S.createEventSubBroadcasterCondition)(e),t,e,["channel:read:goals"])}async subscribeToChannelGoalProgressEvents(e,t){return await this.createSubscription("channel.goal.progress","1",(0,S.createEventSubBroadcasterCondition)(e),t,e,["channel:read:goals"])}async subscribeToChannelGoalEndEvents(e,t){return await this.createSubscription("channel.goal.end","1",(0,S.createEventSubBroadcasterCondition)(e),t,e,["channel:read:goals"])}async subscribeToChannelHypeTrainBeginEvents(e,t){return await this.createSubscription("channel.hype_train.begin","1",(0,S.createEventSubBroadcasterCondition)(e),t,e,["channel:read:hype_train"])}async subscribeToChannelHypeTrainProgressEvents(e,t){return await this.createSubscription("channel.hype_train.progress","1",(0,S.createEventSubBroadcasterCondition)(e),t,e,["channel:read:hype_train"])}async subscribeToChannelHypeTrainEndEvents(e,t){return await this.createSubscription("channel.hype_train.end","1",(0,S.createEventSubBroadcasterCondition)(e),t,e,["channel:read:hype_train"])}async subscribeToChannelShoutoutCreateEvents(e,t){let r=(0,R.extractUserId)(e);return await this.createSubscription("channel.shoutout.create","1",(0,S.createEventSubModeratorCondition)(r,this._getUserContextIdWithDefault(r)),t,r,["moderator:read:shoutouts","moderator:manage:shoutouts"],!0)}async subscribeToChannelShoutoutReceiveEvents(e,t){let r=(0,R.extractUserId)(e);return await this.createSubscription("channel.shoutout.receive","1",(0,S.createEventSubModeratorCondition)(r,this._getUserContextIdWithDefault(r)),t,r,["moderator:read:shoutouts","moderator:manage:shoutouts"],!0)}async subscribeToChannelAdBreakBeginEvents(e,t){return await this.createSubscription("channel.ad_break.begin","1",(0,S.createEventSubBroadcasterCondition)(e),t,e,["channel:read:ads"])}async subscribeToChannelChatClearEvents(e,t){let r=(0,R.extractUserId)(e);return await this.createSubscription("channel.chat.clear","1",(0,S.createEventSubUserCondition)(r,this._getUserContextIdWithDefault(r)),t,e,["user:read:chat"],!0)}async subscribeToChannelChatClearUserMessagesEvents(e,t){let r=(0,R.extractUserId)(e);return await this.createSubscription("channel.chat.clear_user_messages","1",(0,S.createEventSubUserCondition)(r,this._getUserContextIdWithDefault(r)),t,e,["user:read:chat"],!0)}async subscribeToChannelChatMessageDeleteEvents(e,t){let r=(0,R.extractUserId)(e);return await this.createSubscription("channel.chat.message_delete","1",(0,S.createEventSubUserCondition)(r,this._getUserContextIdWithDefault(r)),t,e,["user:read:chat"],!0)}async subscribeToChannelChatNotificationEvents(e,t){let r=(0,R.extractUserId)(e);return await this.createSubscription("channel.chat.notification","1",(0,S.createEventSubUserCondition)(r,this._getUserContextIdWithDefault(r)),t,e,["user:read:chat"],!0)}async subscribeToChannelChatMessageEvents(e,t){let r=(0,R.extractUserId)(e);return await this.createSubscription("channel.chat.message","1",(0,S.createEventSubUserCondition)(r,this._getUserContextIdWithDefault(r)),t,e,["user:read:chat"],!0)}async subscribeToChannelChatSettingsUpdateEvents(e,t){let r=(0,R.extractUserId)(e);return await this.createSubscription("channel.chat_settings.update","1",(0,S.createEventSubUserCondition)(r,this._getUserContextIdWithDefault(r)),t,e,["user:read:chat"],!0)}async subscribeToChannelUnbanRequestCreateEvents(e,t){let r=(0,R.extractUserId)(e);return await this.createSubscription("channel.unban_request.create","1",(0,S.createEventSubModeratorCondition)(r,this._getUserContextIdWithDefault(r)),t,e,["moderator:read:unban_requests","moderator:manage:unban_requests"],!0)}async subscribeToChannelUnbanRequestResolveEvents(e,t){let r=(0,R.extractUserId)(e);return await this.createSubscription("channel.unban_request.resolve","1",(0,S.createEventSubModeratorCondition)(r,this._getUserContextIdWithDefault(r)),t,e,["moderator:read:unban_requests","moderator:manage:unban_requests"],!0)}async subscribeToChannelModerateEvents(e,t){let r=(0,R.extractUserId)(e);return await this.createSubscription("channel.moderate","2",(0,S.createEventSubModeratorCondition)(r,this._getUserContextIdWithDefault(r)),t,e,[],!0)}async subscribeToChannelWarningAcknowledgeEvents(e,t){let r=(0,R.extractUserId)(e);return await this.createSubscription("channel.warning.acknowledge","1",(0,S.createEventSubModeratorCondition)(r,this._getUserContextIdWithDefault(r)),t,e,["moderator:read:warnings","moderator:manage:warnings"],!0)}async subscribeToChannelWarningSendEvents(e,t){let r=(0,R.extractUserId)(e);return await this.createSubscription("channel.warning.send","1",(0,S.createEventSubModeratorCondition)(r,this._getUserContextIdWithDefault(r)),t,e,["moderator:read:warnings","moderator:manage:warnings"],!0)}async subscribeToChannelVipAddEvents(e,t){return await this.createSubscription("channel.vip.add","1",(0,S.createEventSubBroadcasterCondition)(e),t,e,["channel:read:vips","channel:manage:vips"])}async subscribeToChannelVipRemoveEvents(e,t){return await this.createSubscription("channel.vip.remove","1",(0,S.createEventSubBroadcasterCondition)(e),t,e,["channel:read:vips","channel:manage:vips"])}async subscribeToExtensionBitsTransactionCreateEvents(e,t){return await this.createSubscription("extension.bits_transaction.create","1",(0,Ze.createSingleKeyQuery)("extension_client_id",e),t)}async subscribeToUserAuthorizationGrantEvents(e,t){return await this.createSubscription("user.authorization.grant","1",(0,Ze.createSingleKeyQuery)("client_id",e),t)}async subscribeToUserAuthorizationRevokeEvents(e,t){return await this.createSubscription("user.authorization.revoke","1",(0,Ze.createSingleKeyQuery)("client_id",e),t)}async subscribeToUserUpdateEvents(e,t,r){return await this.createSubscription("user.update","1",(0,Ze.createSingleKeyQuery)("user_id",(0,R.extractUserId)(e)),t,e,r?["user:read:email"]:void 0)}async subscribeToUserWhisperMessageEvents(e,t){return await this.createSubscription("user.whisper.message","1",(0,Ze.createSingleKeyQuery)("user_id",(0,R.extractUserId)(e)),t,e,["user:read:whispers","user:manage:whispers"])}async subscribeToDropEntitlementGrantEvents(e,t){return await this.createSubscription("drop.entitlement.grant","1",(0,S.createEventSubDropEntitlementGrantCondition)(e),t,void 0,void 0,!1,!0)}async subscribeToAutoModMessageHoldEvents(e,t){let r=(0,R.extractUserId)(e);return await this.createSubscription("automod.message.hold","1",(0,S.createEventSubModeratorCondition)(r,this._getUserContextIdWithDefault(r)),t,e,["moderator:manage:automod"],!0)}async subscribeToAutoModMessageUpdateEvents(e,t){let r=(0,R.extractUserId)(e);return await this.createSubscription("automod.message.update","1",(0,S.createEventSubModeratorCondition)(r,this._getUserContextIdWithDefault(r)),t,e,["moderator:manage:automod"],!0)}async subscribeToAutoModMessageHoldV2Events(e,t){let r=(0,R.extractUserId)(e);return await this.createSubscription("automod.message.hold","2",(0,S.createEventSubModeratorCondition)(r,this._getUserContextIdWithDefault(r)),t,e,["moderator:manage:automod"],!0)}async subscribeToAutoModMessageUpdateV2Events(e,t){let r=(0,R.extractUserId)(e);return await this.createSubscription("automod.message.update","2",(0,S.createEventSubModeratorCondition)(r,this._getUserContextIdWithDefault(r)),t,e,["moderator:manage:automod"],!0)}async subscribeToAutoModSettingsUpdateEvents(e,t){let r=(0,R.extractUserId)(e);return await this.createSubscription("automod.settings.update","1",(0,S.createEventSubModeratorCondition)(r,this._getUserContextIdWithDefault(r)),t,e,["moderator:read:automod_settings"],!0)}async subscribeToAutoModTermsUpdateEvents(e,t){let r=(0,R.extractUserId)(e);return await this.createSubscription("automod.terms.update","1",(0,S.createEventSubModeratorCondition)(r,this._getUserContextIdWithDefault(r)),t,e,["moderator:manage:automod"],!0)}async subscribeToChannelChatUserMessageHoldEvents(e,t){let r=(0,R.extractUserId)(e);return await this.createSubscription("channel.chat.user_message_hold","1",(0,S.createEventSubUserCondition)(r,this._getUserContextIdWithDefault(r)),t,e,["user:read:chat"],!0)}async subscribeToChannelChatUserMessageUpdateEvents(e,t){let r=(0,R.extractUserId)(e);return await this.createSubscription("channel.chat.user_message_update","1",(0,S.createEventSubUserCondition)(r,this._getUserContextIdWithDefault(r)),t,e,["user:read:chat"],!0)}async subscribeToChannelSuspiciousUserUpdateEvents(e,t){let r=(0,R.extractUserId)(e);return await this.createSubscription("channel.suspicious_user.update","1",(0,S.createEventSubModeratorCondition)(r,this._getUserContextIdWithDefault(r)),t,e,["moderator:read:suspicious_users"],!0)}async subscribeToChannelSuspiciousUserMessageEvents(e,t){let r=(0,R.extractUserId)(e);return await this.createSubscription("channel.suspicious_user.message","1",(0,S.createEventSubModeratorCondition)(r,this._getUserContextIdWithDefault(r)),t,e,["moderator:read:suspicious_users"],!0)}async subscribeToChannelSharedChatSessionBeginEvents(e,t){let r=(0,R.extractUserId)(e);return await this.createSubscription("channel.shared_chat.begin","1",(0,S.createEventSubBroadcasterCondition)(r),t,r)}async subscribeToChannelSharedChatSessionUpdateEvents(e,t){let r=(0,R.extractUserId)(e);return await this.createSubscription("channel.shared_chat.update","1",(0,S.createEventSubBroadcasterCondition)(r),t,r)}async subscribeToChannelSharedChatSessionEndEvents(e,t){let r=(0,R.extractUserId)(e);return await this.createSubscription("channel.shared_chat.end","1",(0,S.createEventSubBroadcasterCondition)(r),t,r)}async getConduits(){return(await this._client.callApi({type:"helix",url:"eventsub/conduits"})).data.map(t=>new Nh.HelixEventSubConduit(t,this._client))}async createConduit(e){let t=await this._client.callApi({type:"helix",url:"eventsub/conduits",method:"POST",query:{...(0,Ze.createSingleKeyQuery)("shard_count",e.toString())}});return new Nh.HelixEventSubConduit(t.data[0],this._client)}async updateConduit(e,t){let r=await this._client.callApi({type:"helix",url:"eventsub/conduits",method:"PATCH",query:(0,S.createEventSubConduitUpdateCondition)(e,t)});return new Nh.HelixEventSubConduit(r.data[0],this._client)}async deleteConduit(e){await this._client.callApi({type:"helix",url:"eventsub/conduits",method:"DELETE",query:{...(0,Ze.createSingleKeyQuery)("id",e)}})}async getConduitShards(e,t,r){let n=await this._client.callApi({type:"helix",url:"eventsub/conduits/shards",query:{...(0,S.createEventSubConduitCondition)(e,t),...(0,Cn.createPaginationQuery)(r)}});return{...(0,Hn.createPaginatedResult)(n,Qh.HelixEventSubConduitShard,this._client)}}getConduitShardsPaginated(e,t){return new JP.HelixPaginatedRequest({url:"eventsub/conduits/shards",query:(0,S.createEventSubConduitCondition)(e,t)},this._client,r=>new Qh.HelixEventSubConduitShard(r))}async updateConduitShards(e,t){return(await this._client.callApi({type:"helix",url:"eventsub/conduits/shards",method:"PATCH",jsonBody:(0,S.createEventSubConduitShardsUpdateCondition)(e,t)})).data.map(n=>new Qh.HelixEventSubConduitShard(n))}async _deleteSubscriptionsWithCondition(e){let t=this.getSubscriptionsPaginated();for await(let r of t)(!e||e(r))&&await r.unsubscribe()}};En.HelixEventSubApi=Gh;En.HelixEventSubApi=Gh=zP.__decorate([(0,R.rtfm)("api","HelixEventSubApi")],Gh)});var rb=l(Lt=>{"use strict";Object.defineProperty(Lt,"__esModule",{value:!0});Lt.createExtensionTransactionQuery=Lt.createExtensionProductBody=Lt.createReleasedExtensionFilter=void 0;function XP(i,e){return{extension_id:i,extension_version:e}}Lt.createReleasedExtensionFilter=XP;function YP(i){return{sku:i.sku,cost:{amount:i.cost,type:"bits"},display_name:i.displayName,in_development:i.inDevelopment,expiration:i.expirationDate,is_broadcast:i.broadcast}}Lt.createExtensionProductBody=YP;function eA(i,e){return{extension_id:i,id:e.transactionIds}}Lt.createExtensionTransactionQuery=eA});var Vh=l(Pn=>{"use strict";Object.defineProperty(Pn,"__esModule",{value:!0});Pn.HelixChannelReference=void 0;var ib=(y(),g(_)),tA=H(),Ae=p(),Cl=class extends Ae.DataObject{constructor(e,t){super(e),this._client=t}get id(){return this[Ae.rawDataSymbol].broadcaster_id}get displayName(){return this[Ae.rawDataSymbol].broadcaster_name}async getChannel(){return(0,Ae.checkRelationAssertion)(await this._client.channels.getChannelInfoById(this[Ae.rawDataSymbol].broadcaster_id))}async getBroadcaster(){return(0,Ae.checkRelationAssertion)(await this._client.users.getUserById(this[Ae.rawDataSymbol].broadcaster_id))}get gameId(){return this[Ae.rawDataSymbol].game_id}get gameName(){return this[Ae.rawDataSymbol].game_name}async getGame(){return this[Ae.rawDataSymbol].game_id?(0,Ae.checkRelationAssertion)(await this._client.games.getGameById(this[Ae.rawDataSymbol].game_id)):null}get title(){return this[Ae.rawDataSymbol].title}};Pn.HelixChannelReference=Cl;ib.__decorate([(0,tA.Enumerable)(!1)],Cl.prototype,"_client",void 0);Pn.HelixChannelReference=Cl=ib.__decorate([(0,Ae.rtfm)("api","HelixChannelReference","id")],Cl)});var zh=l(An=>{"use strict";Object.defineProperty(An,"__esModule",{value:!0});An.HelixExtensionBitsProduct=void 0;var rA=(y(),g(_)),iA=H(),Ft=p(),$h=class extends Ft.DataObject{get sku(){return this[Ft.rawDataSymbol].sku}get cost(){return this[Ft.rawDataSymbol].cost.amount}get displayName(){return this[Ft.rawDataSymbol].display_name}get inDevelopment(){return this[Ft.rawDataSymbol].in_development}get isBroadcast(){return this[Ft.rawDataSymbol].is_broadcast}get expirationDate(){return(0,iA.mapNullable)(this[Ft.rawDataSymbol].expiration,e=>new Date(e))}};An.HelixExtensionBitsProduct=$h;An.HelixExtensionBitsProduct=$h=rA.__decorate([(0,Ft.rtfm)("api","HelixExtensionBitsProduct","sku")],$h)});var Kh=l(Dn=>{"use strict";Object.defineProperty(Dn,"__esModule",{value:!0});Dn.HelixExtensionTransaction=void 0;var nb=(y(),g(_)),nA=H(),ce=p(),ql=class extends ce.DataObject{constructor(e,t){super(e),this._client=t}get id(){return this[ce.rawDataSymbol].id}get transactionDate(){return new Date(this[ce.rawDataSymbol].timestamp)}get broadcasterId(){return this[ce.rawDataSymbol].broadcaster_id}get broadcasterName(){return this[ce.rawDataSymbol].broadcaster_name}get broadcasterDisplayName(){return this[ce.rawDataSymbol].broadcaster_name}async getBroadcaster(){return(0,ce.checkRelationAssertion)(await this._client.users.getUserById(this[ce.rawDataSymbol].broadcaster_id))}get userId(){return this[ce.rawDataSymbol].user_id}get userName(){return this[ce.rawDataSymbol].user_login}get userDisplayName(){return this[ce.rawDataSymbol].user_name}async getUser(){return(0,ce.checkRelationAssertion)(await this._client.users.getUserById(this[ce.rawDataSymbol].user_id))}get productType(){return this[ce.rawDataSymbol].product_type}get productSku(){return this[ce.rawDataSymbol].product_data.sku}get productCost(){return this[ce.rawDataSymbol].product_data.cost.amount}get productDisplayName(){return this[ce.rawDataSymbol].product_data.displayName}get productInDevelopment(){return this[ce.rawDataSymbol].product_data.inDevelopment}};Dn.HelixExtensionTransaction=ql;nb.__decorate([(0,nA.Enumerable)(!1)],ql.prototype,"_client",void 0);Dn.HelixExtensionTransaction=ql=nb.__decorate([(0,ce.rtfm)("api","HelixExtensionTransaction","id")],ql)});var Xh=l(In=>{"use strict";Object.defineProperty(In,"__esModule",{value:!0});In.HelixExtensionsApi=void 0;var aA=(y(),g(_)),db=p(),El=rb(),Jh=Re(),ab=ne(),sb=ue(),ob=ae(),sA=N(),lb=Vh(),ub=zh(),cb=Kh(),Zh=class extends sA.BaseApi{async getReleasedExtension(e,t){let r=await this._client.callApi({type:"helix",url:"extensions/released",query:(0,El.createReleasedExtensionFilter)(e,t)});return new db.HelixExtension(r.data[0])}async getLiveChannelsWithExtension(e,t){let r=await this._client.callApi({type:"helix",url:"extensions/live",query:{...(0,Jh.createSingleKeyQuery)("extension_id",e),...(0,ob.createPaginationQuery)(t)}});return(0,sb.createPaginatedResult)(r,lb.HelixChannelReference,this._client)}getLiveChannelsWithExtensionPaginated(e){return new ab.HelixPaginatedRequest({url:"extensions/live",query:(0,Jh.createSingleKeyQuery)("extension_id",e)},this._client,t=>new lb.HelixChannelReference(t,this._client))}async getExtensionBitsProducts(e){return(await this._client.callApi({type:"helix",url:"bits/extensions",forceType:"app",query:(0,Jh.createSingleKeyQuery)("should_include_all",e?.toString())})).data.map(r=>new ub.HelixExtensionBitsProduct(r))}async putExtensionBitsProduct(e){let t=await this._client.callApi({type:"helix",url:"bits/extensions",method:"PUT",forceType:"app",jsonBody:(0,El.createExtensionProductBody)(e)});return new ub.HelixExtensionBitsProduct(t.data[0])}async getExtensionTransactions(e,t={}){let r=await this._client.callApi({type:"helix",url:"extensions/transactions",forceType:"app",query:{...(0,El.createExtensionTransactionQuery)(e,t),...(0,ob.createPaginationQuery)(t)}});return(0,sb.createPaginatedResult)(r,cb.HelixExtensionTransaction,this._client)}getExtensionTransactionsPaginated(e,t={}){return new ab.HelixPaginatedRequest({url:"extensions/transactions",forceType:"app",query:(0,El.createExtensionTransactionQuery)(e,t)},this._client,r=>new cb.HelixExtensionTransaction(r,this._client))}};In.HelixExtensionsApi=Zh;In.HelixExtensionsApi=Zh=aA.__decorate([(0,db.rtfm)("api","HelixExtensionsApi")],Zh)});var Al=l(Tn=>{"use strict";Object.defineProperty(Tn,"__esModule",{value:!0});Tn.HelixGame=void 0;var hb=(y(),g(_)),oA=H(),vt=p(),Pl=class extends vt.DataObject{constructor(e,t){super(e),this._client=t}get id(){return this[vt.rawDataSymbol].id}get name(){return this[vt.rawDataSymbol].name}get boxArtUrl(){return this[vt.rawDataSymbol].box_art_url}get igdbId(){return this[vt.rawDataSymbol].igdb_id||null}getBoxArtUrl(e,t){return this[vt.rawDataSymbol].box_art_url.replace("{width}",e.toString()).replace("{height}",t.toString())}async getStreams(e){return await this._client.streams.getStreams({...e,game:this[vt.rawDataSymbol].id})}getStreamsPaginated(){return this._client.streams.getStreamsPaginated({game:this[vt.rawDataSymbol].id})}};Tn.HelixGame=Pl;hb.__decorate([(0,oA.Enumerable)(!1)],Pl.prototype,"_client",void 0);Tn.HelixGame=Pl=hb.__decorate([(0,vt.rtfm)("api","HelixGame","id")],Pl)});var tp=l(Rn=>{"use strict";Object.defineProperty(Rn,"__esModule",{value:!0});Rn.HelixGameApi=void 0;var Dl=(y(),g(_)),ep=H(),lA=p(),Yh=Ut(),uA=ne(),cA=ue(),dA=ae(),hA=N(),Gr=Al(),Wr=class extends hA.BaseApi{constructor(){super(...arguments),this._getGameByIdBatcher=new Yh.HelixRequestBatcher({url:"games"},"id","id",this._client,e=>new Gr.HelixGame(e,this._client)),this._getGameByNameBatcher=new Yh.HelixRequestBatcher({url:"games"},"name","name",this._client,e=>new Gr.HelixGame(e,this._client)),this._getGameByIgdbIdBatcher=new Yh.HelixRequestBatcher({url:"games"},"igdb_id","igdb_id",this._client,e=>new Gr.HelixGame(e,this._client))}async getGamesByIds(e){return await this._getGames("id",e)}async getGamesByNames(e){return await this._getGames("name",e)}async getGamesByIgdbIds(e){return await this._getGames("igdb_id",e)}async getGameById(e){var t;return(t=(await this._getGames("id",[e]))[0])!==null&&t!==void 0?t:null}async getGameByName(e){var t;return(t=(await this._getGames("name",[e]))[0])!==null&&t!==void 0?t:null}async getGameByIgdbId(e){var t;return(t=(await this._getGames("igdb_id",[e]))[0])!==null&&t!==void 0?t:null}async getGameByIdBatched(e){return await this._getGameByIdBatcher.request(e)}async getGameByNameBatched(e){return await this._getGameByNameBatcher.request(e)}async getGameByIgdbIdBatched(e){return await this._getGameByIgdbIdBatcher.request(e)}async getTopGames(e){let t=await this._client.callApi({type:"helix",url:"games/top",query:(0,dA.createPaginationQuery)(e)});return(0,cA.createPaginatedResult)(t,Gr.HelixGame,this._client)}getTopGamesPaginated(){return new uA.HelixPaginatedRequest({url:"games/top"},this._client,e=>new Gr.HelixGame(e,this._client))}async _getGames(e,t){return t.length?(await this._client.callApi({type:"helix",url:"games",query:{[e]:t}})).data.map(n=>new Gr.HelixGame(n,this._client)):[]}};Rn.HelixGameApi=Wr;Dl.__decorate([(0,ep.Enumerable)(!1)],Wr.prototype,"_getGameByIdBatcher",void 0);Dl.__decorate([(0,ep.Enumerable)(!1)],Wr.prototype,"_getGameByNameBatcher",void 0);Dl.__decorate([(0,ep.Enumerable)(!1)],Wr.prototype,"_getGameByIgdbIdBatcher",void 0);Rn.HelixGameApi=Wr=Dl.__decorate([(0,lA.rtfm)("api","HelixGameApi")],Wr)});var rp=l(Un=>{"use strict";Object.defineProperty(Un,"__esModule",{value:!0});Un.HelixGoal=void 0;var pb=(y(),g(_)),pA=H(),Be=p(),Il=class extends Be.DataObject{constructor(e,t){super(e),this._client=t}get id(){return this[Be.rawDataSymbol].id}get broadcasterId(){return this[Be.rawDataSymbol].broadcaster_id}get broadcasterDisplayName(){return this[Be.rawDataSymbol].broadcaster_name}get broadcasterName(){return this[Be.rawDataSymbol].broadcaster_login}async getBroadcaster(){return(0,Be.checkRelationAssertion)(await this._client.users.getUserById(this[Be.rawDataSymbol].broadcaster_id))}get type(){return this[Be.rawDataSymbol].type}get description(){return this[Be.rawDataSymbol].description}get currentAmount(){return this[Be.rawDataSymbol].current_amount}get targetAmount(){return this[Be.rawDataSymbol].target_amount}get creationDate(){return this[Be.rawDataSymbol].created_at}};Un.HelixGoal=Il;pb.__decorate([(0,pA.Enumerable)(!1)],Il.prototype,"_client",void 0);Un.HelixGoal=Il=pb.__decorate([(0,Be.rtfm)("api","HelixGoal","id")],Il)});var np=l(Bn=>{"use strict";Object.defineProperty(Bn,"__esModule",{value:!0});Bn.HelixGoalApi=void 0;var mA=(y(),g(_)),_A=J(),mb=p(),yA=N(),fA=rp(),ip=class extends yA.BaseApi{async getGoals(e){return(await this._client.callApi({type:"helix",url:"goals",userId:(0,mb.extractUserId)(e),scopes:["channel:read:goals"],query:(0,_A.createBroadcasterQuery)(e)})).data.map(r=>new fA.HelixGoal(r,this._client))}};Bn.HelixGoalApi=ip;Bn.HelixGoalApi=ip=mA.__decorate([(0,mb.rtfm)("api","HelixGoalApi")],ip)});var ap=l(On=>{"use strict";Object.defineProperty(On,"__esModule",{value:!0});On.HelixHypeTrainContribution=void 0;var _b=(y(),g(_)),gA=H(),ur=p(),Tl=class extends ur.DataObject{constructor(e,t){super(e),this._client=t}get userId(){return this[ur.rawDataSymbol].user}async getUser(){return(0,ur.checkRelationAssertion)(await this._client.users.getUserById(this[ur.rawDataSymbol].user))}get type(){return this[ur.rawDataSymbol].type}get total(){return this[ur.rawDataSymbol].total}};On.HelixHypeTrainContribution=Tl;_b.__decorate([(0,gA.Enumerable)(!1)],Tl.prototype,"_client",void 0);On.HelixHypeTrainContribution=Tl=_b.__decorate([(0,ur.rtfm)("api","HelixHypeTrainContribution","userId")],Tl)});var sp=l(jn=>{"use strict";Object.defineProperty(jn,"__esModule",{value:!0});jn.HelixHypeTrainEvent=void 0;var fb=(y(),g(_)),bA=H(),me=p(),yb=ap(),Rl=class extends me.DataObject{constructor(e,t){super(e),this._client=t}get eventId(){return this[me.rawDataSymbol].id}get eventType(){return this[me.rawDataSymbol].event_type}get eventDate(){return new Date(this[me.rawDataSymbol].event_timestamp)}get eventVersion(){return this[me.rawDataSymbol].version}get id(){return this[me.rawDataSymbol].event_data.id}get broadcasterId(){return this[me.rawDataSymbol].event_data.broadcaster_id}async getBroadcaster(){return(0,me.checkRelationAssertion)(await this._client.users.getUserById(this[me.rawDataSymbol].event_data.broadcaster_id))}get level(){return this[me.rawDataSymbol].event_data.level}get startDate(){return new Date(this[me.rawDataSymbol].event_data.started_at)}get expiryDate(){return new Date(this[me.rawDataSymbol].event_data.expires_at)}get cooldownDate(){return new Date(this[me.rawDataSymbol].event_data.cooldown_end_time)}get total(){return this[me.rawDataSymbol].event_data.total}get goal(){return this[me.rawDataSymbol].event_data.goal}get lastContribution(){return new yb.HelixHypeTrainContribution(this[me.rawDataSymbol].event_data.last_contribution,this._client)}get topContributions(){return this[me.rawDataSymbol].event_data.top_contributions.map(e=>new yb.HelixHypeTrainContribution(e,this._client))}};jn.HelixHypeTrainEvent=Rl;fb.__decorate([(0,bA.Enumerable)(!1)],Rl.prototype,"_client",void 0);jn.HelixHypeTrainEvent=Rl=fb.__decorate([(0,me.rtfm)("api","HelixHypeTrainEvent","id")],Rl)});var lp=l(Ul=>{"use strict";Object.defineProperty(Ul,"__esModule",{value:!0});Ul.HelixHypeTrainApi=void 0;var gb=J(),bb=p(),xA=ne(),wA=ue(),vA=ae(),SA=N(),xb=sp(),op=class extends SA.BaseApi{async getHypeTrainEventsForBroadcaster(e,t){let r=await this._client.callApi({type:"helix",url:"hypetrain/events",userId:(0,bb.extractUserId)(e),scopes:["channel:read:hype_train"],query:{...(0,gb.createBroadcasterQuery)(e),...(0,vA.createPaginationQuery)(t)}});return(0,wA.createPaginatedResult)(r,xb.HelixHypeTrainEvent,this._client)}getHypeTrainEventsForBroadcasterPaginated(e){return new xA.HelixPaginatedRequest({url:"hypetrain/events",userId:(0,bb.extractUserId)(e),scopes:["channel:read:hype_train"],query:(0,gb.createBroadcasterQuery)(e)},this._client,t=>new xb.HelixHypeTrainEvent(t,this._client))}};Ul.HelixHypeTrainApi=op});var wb=l(oe=>{"use strict";Object.defineProperty(oe,"__esModule",{value:!0});oe.createWarnUserBody=oe.createCheckAutoModStatusBody=oe.createUpdateShieldModeStatusBody=oe.createBanUserBody=oe.createAutoModSettingsBody=oe.createAutoModProcessBody=oe.createResolveUnbanRequestQuery=oe.createModeratorModifyQuery=oe.createModerationUserListQuery=void 0;var Nt=p();function HA(i,e){return{broadcaster_id:(0,Nt.extractUserId)(i),user_id:e?.userId}}oe.createModerationUserListQuery=HA;function CA(i,e){return{broadcaster_id:(0,Nt.extractUserId)(i),user_id:(0,Nt.extractUserId)(e)}}oe.createModeratorModifyQuery=CA;function qA(i,e,t,r,n){return{unban_request_id:t,broadcaster_id:(0,Nt.extractUserId)(i),moderator_id:(0,Nt.extractUserId)(e),status:r?"approved":"denied",resolution_text:n}}oe.createResolveUnbanRequestQuery=qA;function EA(i,e,t){return{user_id:(0,Nt.extractUserId)(i),msg_id:e,action:t?"ALLOW":"DENY"}}oe.createAutoModProcessBody=EA;function PA(i){return{overall_level:i.overallLevel,aggression:i.aggression,bullying:i.bullying,disability:i.disability,misogyny:i.misogyny,race_ethnicity_or_religion:i.raceEthnicityOrReligion,sex_based_terms:i.sexBasedTerms,sexuality_sex_or_gender:i.sexualitySexOrGender,swearing:i.swearing}}oe.createAutoModSettingsBody=PA;function AA(i){return{data:{duration:i.duration,reason:i.reason,user_id:(0,Nt.extractUserId)(i.user)}}}oe.createBanUserBody=AA;function DA(i){return{is_active:i}}oe.createUpdateShieldModeStatusBody=DA;function IA(i){return{data:i.map(e=>({msg_id:e.messageId,msg_text:e.messageText}))}}oe.createCheckAutoModStatusBody=IA;function TA(i,e){return{data:{user_id:(0,Nt.extractUserId)(i),reason:e}}}oe.createWarnUserBody=TA});var vb=l(kn=>{"use strict";Object.defineProperty(kn,"__esModule",{value:!0});kn.HelixAutoModSettings=void 0;var RA=(y(),g(_)),De=p(),up=class extends De.DataObject{get broadcasterId(){return this[De.rawDataSymbol].broadcaster_id}get moderatorId(){return this[De.rawDataSymbol].moderator_id}get overallLevel(){return this[De.rawDataSymbol].overall_level?this[De.rawDataSymbol].overall_level:null}get disability(){return this[De.rawDataSymbol].disability}get aggression(){return this[De.rawDataSymbol].aggression}get sexualitySexOrGender(){return this[De.rawDataSymbol].sexuality_sex_or_gender}get misogyny(){return this[De.rawDataSymbol].misogyny}get bullying(){return this[De.rawDataSymbol].bullying}get swearing(){return this[De.rawDataSymbol].swearing}get raceEthnicityOrReligion(){return this[De.rawDataSymbol].race_ethnicity_or_religion}get sexBasedTerms(){return this[De.rawDataSymbol].sex_based_terms}};kn.HelixAutoModSettings=up;kn.HelixAutoModSettings=up=RA.__decorate([(0,De.rtfm)("api","HelixAutoModSettings","broadcasterId")],up)});var Sb=l(Mn=>{"use strict";Object.defineProperty(Mn,"__esModule",{value:!0});Mn.HelixAutoModStatus=void 0;var UA=(y(),g(_)),Bl=p(),cp=class extends Bl.DataObject{get messageId(){return this[Bl.rawDataSymbol].msg_id}get isPermitted(){return this[Bl.rawDataSymbol].is_permitted}};Mn.HelixAutoModStatus=cp;Mn.HelixAutoModStatus=cp=UA.__decorate([(0,Bl.rtfm)("api","HelixAutoModStatus","messageId")],cp)});var Ol=l(Fn=>{"use strict";Object.defineProperty(Fn,"__esModule",{value:!0});Fn.HelixBanUser=void 0;var dp=(y(),g(_)),hp=H(),St=p(),Ln=class extends St.DataObject{constructor(e,t,r){super(e),this._expiryTimestamp=t,this._client=r}get creationDate(){return new Date(this[St.rawDataSymbol].created_at)}get expiryDate(){return(0,hp.mapNullable)(this._expiryTimestamp,e=>new Date(e))}get moderatorId(){return this[St.rawDataSymbol].moderator_id}async getModerator(){return(0,St.checkRelationAssertion)(await this._client.users.getUserById(this[St.rawDataSymbol].moderator_id))}get userId(){return this[St.rawDataSymbol].user_id}async getUser(){return(0,St.checkRelationAssertion)(await this._client.users.getUserById(this[St.rawDataSymbol].user_id))}};Fn.HelixBanUser=Ln;dp.__decorate([(0,hp.Enumerable)(!1)],Ln.prototype,"_client",void 0);dp.__decorate([(0,hp.Enumerable)(!1)],Ln.prototype,"_expiryTimestamp",void 0);Fn.HelixBanUser=Ln=dp.__decorate([(0,St.rtfm)("api","HelixBanUser","userId")],Ln)});var mp=l(Nn=>{"use strict";Object.defineProperty(Nn,"__esModule",{value:!0});Nn.HelixBan=void 0;var BA=(y(),g(_)),Vr=p(),OA=Ol(),pp=class extends OA.HelixBanUser{constructor(e,t){super(e,e.expires_at||null,t)}get userName(){return this[Vr.rawDataSymbol].user_login}get userDisplayName(){return this[Vr.rawDataSymbol].user_name}get moderatorName(){return this[Vr.rawDataSymbol].moderator_login}get moderatorDisplayName(){return this[Vr.rawDataSymbol].moderator_name}get reason(){return this[Vr.rawDataSymbol].reason||null}};Nn.HelixBan=pp;Nn.HelixBan=pp=BA.__decorate([(0,Vr.rtfm)("api","HelixBan","userId")],pp)});var yp=l(Qn=>{"use strict";Object.defineProperty(Qn,"__esModule",{value:!0});Qn.HelixBlockedTerm=void 0;var jA=(y(),g(_)),dt=p(),_p=class extends dt.DataObject{get broadcasterId(){return this[dt.rawDataSymbol].broadcaster_id}get creationDate(){return new Date(this[dt.rawDataSymbol].created_at)}get expirationDate(){return this[dt.rawDataSymbol].expires_at?new Date(this[dt.rawDataSymbol].expires_at):null}get id(){return this[dt.rawDataSymbol].id}get moderatorId(){return this[dt.rawDataSymbol].moderator_id}get text(){return this[dt.rawDataSymbol].text}get updatedDate(){return new Date(this[dt.rawDataSymbol].updated_at)}};Qn.HelixBlockedTerm=_p;Qn.HelixBlockedTerm=_p=jA.__decorate([(0,dt.rtfm)("api","HelixBlockedTerm","id")],_p)});var fp=l(Gn=>{"use strict";Object.defineProperty(Gn,"__esModule",{value:!0});Gn.HelixModeratedChannel=void 0;var Hb=(y(),g(_)),kA=H(),Ht=p(),jl=class extends Ht.DataObject{constructor(e,t){super(e),this._client=t}get id(){return this[Ht.rawDataSymbol].broadcaster_id}get name(){return this[Ht.rawDataSymbol].broadcaster_login}get displayName(){return this[Ht.rawDataSymbol].broadcaster_name}async getChannel(){return(0,Ht.checkRelationAssertion)(await this._client.channels.getChannelInfoById(this[Ht.rawDataSymbol].broadcaster_id))}async getBroadcaster(){return(0,Ht.checkRelationAssertion)(await this._client.users.getUserById(this[Ht.rawDataSymbol].broadcaster_id))}};Gn.HelixModeratedChannel=jl;Hb.__decorate([(0,kA.Enumerable)(!1)],jl.prototype,"_client",void 0);Gn.HelixModeratedChannel=jl=Hb.__decorate([(0,Ht.rtfm)("api","HelixModeratedChannel","id")],jl)});var gp=l(Wn=>{"use strict";Object.defineProperty(Wn,"__esModule",{value:!0});Wn.HelixModerator=void 0;var Cb=(y(),g(_)),MA=H(),cr=p(),kl=class extends cr.DataObject{constructor(e,t){super(e),this._client=t}get userId(){return this[cr.rawDataSymbol].user_id}get userName(){return this[cr.rawDataSymbol].user_login}get userDisplayName(){return this[cr.rawDataSymbol].user_name}async getUser(){return(0,cr.checkRelationAssertion)(await this._client.users.getUserById(this[cr.rawDataSymbol].user_id))}};Wn.HelixModerator=kl;Cb.__decorate([(0,MA.Enumerable)(!1)],kl.prototype,"_client",void 0);Wn.HelixModerator=kl=Cb.__decorate([(0,cr.rtfm)("api","HelixModerator","userId")],kl)});var bp=l(Vn=>{"use strict";Object.defineProperty(Vn,"__esModule",{value:!0});Vn.HelixShieldModeStatus=void 0;var qb=(y(),g(_)),LA=H(),ht=p(),Ml=class extends ht.DataObject{constructor(e,t){super(e),this._client=t}get isActive(){return this[ht.rawDataSymbol].is_active}get moderatorId(){return this[ht.rawDataSymbol].moderator_id}get moderatorName(){return this[ht.rawDataSymbol].moderator_login}get moderatorDisplayName(){return this[ht.rawDataSymbol].moderator_name}async getModerator(){return(0,ht.checkRelationAssertion)(await this._client.users.getUserById(this[ht.rawDataSymbol].moderator_id))}get lastActivationDate(){return this[ht.rawDataSymbol].last_activated_at===""?null:new Date(this[ht.rawDataSymbol].last_activated_at)}};Vn.HelixShieldModeStatus=Ml;qb.__decorate([(0,LA.Enumerable)(!1)],Ml.prototype,"_client",void 0);Vn.HelixShieldModeStatus=Ml=qb.__decorate([(0,ht.rtfm)("api","HelixShieldModeStatus")],Ml)});var xp=l($n=>{"use strict";Object.defineProperty($n,"__esModule",{value:!0});$n.HelixUnbanRequest=void 0;var Eb=(y(),g(_)),Pb=H(),X=p(),Ll=class extends X.DataObject{constructor(e,t){super(e),this._client=t}get id(){return this[X.rawDataSymbol].id}get broadcasterId(){return this[X.rawDataSymbol].broadcaster_id}get broadcasterName(){return this[X.rawDataSymbol].broadcaster_id}get broadcasterDisplayName(){return this[X.rawDataSymbol].broadcaster_id}async getBroadcaster(){return(0,X.checkRelationAssertion)(await this._client.users.getUserById(this[X.rawDataSymbol].broadcaster_id))}get moderatorId(){return this[X.rawDataSymbol].moderator_id}get moderatorName(){return this[X.rawDataSymbol].moderator_login}get moderatorDisplayName(){return this[X.rawDataSymbol].moderator_name}async getModerator(){return(0,X.checkRelationAssertion)(await this._client.users.getUserById(this[X.rawDataSymbol].moderator_id))}get userId(){return this[X.rawDataSymbol].user_id}get userName(){return this[X.rawDataSymbol].user_login}get userDisplayName(){return this[X.rawDataSymbol].user_name}async getUser(){return(0,X.checkRelationAssertion)(await this._client.users.getUserById(this[X.rawDataSymbol].user_id))}get message(){return this[X.rawDataSymbol].text}get creationDate(){return new Date(this[X.rawDataSymbol].created_at)}get resolutionMessage(){return this[X.rawDataSymbol].resolution_text||null}get resolutionDate(){return(0,Pb.mapNullable)(this[X.rawDataSymbol].resolved_at,e=>new Date(e))}};$n.HelixUnbanRequest=Ll;Eb.__decorate([(0,Pb.Enumerable)(!1)],Ll.prototype,"_client",void 0);$n.HelixUnbanRequest=Ll=Eb.__decorate([(0,X.rtfm)("api","HelixUnbanRequest","id")],Ll)});var wp=l(zn=>{"use strict";Object.defineProperty(zn,"__esModule",{value:!0});zn.HelixWarning=void 0;var Ab=(y(),g(_)),FA=H(),We=p(),Fl=class extends We.DataObject{constructor(e,t){super(e),this._client=t}get broadcasterId(){return this[We.rawDataSymbol].user_id}async getBroadcaster(){return(0,We.checkRelationAssertion)(await this._client.users.getUserById(this[We.rawDataSymbol].broadcaster_id))}get moderatorId(){return this[We.rawDataSymbol].moderator_id}async getModerator(){return(0,We.checkRelationAssertion)(await this._client.users.getUserById(this[We.rawDataSymbol].moderator_id))}get userId(){return this[We.rawDataSymbol].user_id}async getUser(){return(0,We.checkRelationAssertion)(await this._client.users.getUserById(this[We.rawDataSymbol].user_id))}get reason(){return this[We.rawDataSymbol].reason}};zn.HelixWarning=Fl;Ab.__decorate([(0,FA.Enumerable)(!1)],Fl.prototype,"_client",void 0);zn.HelixWarning=Fl=Ab.__decorate([(0,We.rtfm)("api","HelixWarning","userId")],Fl)});var Cp=l(Zn=>{"use strict";Object.defineProperty(Zn,"__esModule",{value:!0});Zn.HelixModerationApi=void 0;var NA=(y(),g(_)),vp=J(),k=p(),dr=Re(),Xe=wb(),Nl=ne(),Kn=ue(),Jn=ae(),QA=N(),Db=vb(),GA=Sb(),Ib=mp(),WA=Ol(),Tb=yp(),Rb=fp(),Ub=gp(),Bb=bp(),Sp=xp(),VA=wp(),Hp=class extends QA.BaseApi{async getBannedUsers(e,t){let r=await this._client.callApi({type:"helix",url:"moderation/banned",userId:(0,k.extractUserId)(e),scopes:["moderation:read"],query:{...(0,Xe.createModerationUserListQuery)(e,t),...(0,Jn.createPaginationQuery)(t)}});return(0,Kn.createPaginatedResult)(r,Ib.HelixBan,this._client)}getBannedUsersPaginated(e){return new Nl.HelixPaginatedRequest({url:"moderation/banned",userId:(0,k.extractUserId)(e),scopes:["moderation:read"],query:(0,vp.createBroadcasterQuery)(e)},this._client,t=>new Ib.HelixBan(t,this._client),50)}async checkUserBan(e,t){let r=(0,k.extractUserId)(t);return(await this.getBannedUsers(e,{userId:r})).data.some(a=>a.userId===r)}async getModerators(e,t){let r=await this._client.callApi({type:"helix",url:"moderation/moderators",userId:(0,k.extractUserId)(e),scopes:["moderation:read","channel:manage:moderators"],query:{...(0,Xe.createModerationUserListQuery)(e,t),...(0,Jn.createPaginationQuery)(t)}});return(0,Kn.createPaginatedResult)(r,Ub.HelixModerator,this._client)}getModeratorsPaginated(e){return new Nl.HelixPaginatedRequest({url:"moderation/moderators",userId:(0,k.extractUserId)(e),scopes:["moderation:read","channel:manage:moderators"],query:(0,vp.createBroadcasterQuery)(e)},this._client,t=>new Ub.HelixModerator(t,this._client))}async getModeratedChannels(e,t){let r=(0,k.extractUserId)(e),n=await this._client.callApi({type:"helix",url:"moderation/channels",userId:r,scopes:["user:read:moderated_channels"],query:{...(0,dr.createSingleKeyQuery)("user_id",r),...(0,Jn.createPaginationQuery)(t)}});return(0,Kn.createPaginatedResult)(n,Rb.HelixModeratedChannel,this._client)}getModeratedChannelsPaginated(e){let t=(0,k.extractUserId)(e);return new Nl.HelixPaginatedRequest({url:"moderation/channels",userId:t,scopes:["user:read:moderated_channels"],query:(0,dr.createSingleKeyQuery)("user_id",t)},this._client,r=>new Rb.HelixModeratedChannel(r,this._client))}async checkUserMod(e,t){let r=(0,k.extractUserId)(t);return(await this.getModerators(e,{userId:r})).data.some(a=>a.userId===r)}async addModerator(e,t){await this._client.callApi({type:"helix",url:"moderation/moderators",method:"POST",userId:(0,k.extractUserId)(e),scopes:["channel:manage:moderators"],query:(0,Xe.createModeratorModifyQuery)(e,t)})}async removeModerator(e,t){await this._client.callApi({type:"helix",url:"moderation/moderators",method:"DELETE",userId:(0,k.extractUserId)(e),scopes:["channel:manage:moderators"],query:(0,Xe.createModeratorModifyQuery)(e,t)})}async checkAutoModStatus(e,t){return(await this._client.callApi({type:"helix",url:"moderation/enforcements/status",method:"POST",userId:(0,k.extractUserId)(e),scopes:["moderation:read"],query:(0,vp.createBroadcasterQuery)(e),jsonBody:(0,Xe.createCheckAutoModStatusBody)(t)})).data.map(n=>new GA.HelixAutoModStatus(n))}async processHeldAutoModMessage(e,t,r){await this._client.callApi({type:"helix",url:"moderation/automod/message",method:"POST",userId:(0,k.extractUserId)(e),scopes:["moderator:manage:automod"],jsonBody:(0,Xe.createAutoModProcessBody)(e,t,r)})}async getAutoModSettings(e){let t=(0,k.extractUserId)(e);return(await this._client.callApi({type:"helix",url:"moderation/automod/settings",userId:t,scopes:["moderator:read:automod_settings"],canOverrideScopedUserContext:!0,query:this._createModeratorActionQuery(t)})).data.map(n=>new Db.HelixAutoModSettings(n))}async updateAutoModSettings(e,t){let r=(0,k.extractUserId)(e);return(await this._client.callApi({type:"helix",url:"moderation/automod/settings",method:"PUT",userId:r,scopes:["moderator:manage:automod_settings"],canOverrideScopedUserContext:!0,query:this._createModeratorActionQuery(r),jsonBody:(0,Xe.createAutoModSettingsBody)(t)})).data.map(a=>new Db.HelixAutoModSettings(a))}async banUser(e,t){let r=(0,k.extractUserId)(e);return(await this._client.callApi({type:"helix",url:"moderation/bans",method:"POST",userId:r,scopes:["moderator:manage:banned_users"],canOverrideScopedUserContext:!0,query:this._createModeratorActionQuery(r),jsonBody:(0,Xe.createBanUserBody)(t)})).data.map(a=>new WA.HelixBanUser(a,a.end_time,this._client))}async unbanUser(e,t){let r=(0,k.extractUserId)(e);await this._client.callApi({type:"helix",url:"moderation/bans",method:"DELETE",userId:r,scopes:["moderator:manage:banned_users"],canOverrideScopedUserContext:!0,query:{...this._createModeratorActionQuery(r),...(0,dr.createSingleKeyQuery)("user_id",(0,k.extractUserId)(t))}})}async getBlockedTerms(e,t){let r=(0,k.extractUserId)(e),n=await this._client.callApi({type:"helix",url:"moderation/blocked_terms",userId:r,scopes:["moderator:read:blocked_terms"],canOverrideScopedUserContext:!0,query:{...this._createModeratorActionQuery(r),...(0,Jn.createPaginationQuery)(t)}});return(0,Kn.createPaginatedResult)(n,Tb.HelixBlockedTerm,this._client)}async addBlockedTerm(e,t){let r=(0,k.extractUserId)(e);return(await this._client.callApi({type:"helix",url:"moderation/blocked_terms",method:"POST",userId:r,scopes:["moderator:manage:blocked_terms"],canOverrideScopedUserContext:!0,query:this._createModeratorActionQuery(r),jsonBody:{text:t}})).data.map(a=>new Tb.HelixBlockedTerm(a))}async removeBlockedTerm(e,t,r){let n=(0,k.extractUserId)(e);await this._client.callApi({type:"helix",url:"moderation/blocked_terms",method:"DELETE",userId:n,scopes:["moderator:manage:blocked_terms"],canOverrideScopedUserContext:!0,query:{...this._createModeratorActionQuery(n),id:r}})}async deleteChatMessages(e,t){let r=(0,k.extractUserId)(e);await this._client.callApi({type:"helix",url:"moderation/chat",method:"DELETE",userId:r,scopes:["moderator:manage:chat_messages"],canOverrideScopedUserContext:!0,query:{...this._createModeratorActionQuery(r),...(0,dr.createSingleKeyQuery)("message_id",t)}})}async getShieldModeStatus(e){let t=(0,k.extractUserId)(e),r=await this._client.callApi({type:"helix",url:"moderation/shield_mode",method:"GET",userId:t,scopes:["moderator:read:shield_mode","moderator:manage:shield_mode"],canOverrideScopedUserContext:!0,query:this._createModeratorActionQuery(t)});return new Bb.HelixShieldModeStatus(r.data[0],this._client)}async updateShieldModeStatus(e,t){let r=(0,k.extractUserId)(e),n=await this._client.callApi({type:"helix",url:"moderation/shield_mode",method:"PUT",userId:r,scopes:["moderator:manage:shield_mode"],canOverrideScopedUserContext:!0,query:this._createModeratorActionQuery(r),jsonBody:(0,Xe.createUpdateShieldModeStatusBody)(t)});return new Bb.HelixShieldModeStatus(n.data[0],this._client)}async getUnbanRequests(e,t,r){let n=(0,k.extractUserId)(e),a=await this._client.callApi({type:"helix",url:"moderation/unban_requests",method:"GET",userId:n,scopes:["moderator:read:unban_requests","moderator:manage:unban_requests"],canOverrideScopedUserContext:!0,query:{...this._createModeratorActionQuery(n),...(0,dr.createSingleKeyQuery)("status",t),...(0,Jn.createPaginationQuery)(r)}});return(0,Kn.createPaginatedResult)(a,Sp.HelixUnbanRequest,this._client)}getUnbanRequestsPaginated(e,t){let r=(0,k.extractUserId)(e);return new Nl.HelixPaginatedRequest({url:"moderation/unban_requests",method:"GET",userId:r,scopes:["moderator:read:unban_requests","moderator:manage:unban_requests"],canOverrideScopedUserContext:!0,query:{...this._createModeratorActionQuery(r),...(0,dr.createSingleKeyQuery)("status",t)}},this._client,n=>new Sp.HelixUnbanRequest(n,this._client))}async resolveUnbanRequest(e,t,r,n){let a=(0,k.extractUserId)(e),s=await this._client.callApi({type:"helix",url:"moderation/unban_requests",method:"PATCH",userId:a,scopes:["moderator:manage:unban_requests"],canOverrideScopedUserContext:!0,query:(0,Xe.createResolveUnbanRequestQuery)(a,this._getUserContextIdWithDefault(a),t,r,n?.slice(0,500))});return new Sp.HelixUnbanRequest(s.data[0],this._client)}async warnUser(e,t,r){let n=(0,k.extractUserId)(e),a=await this._client.callApi({type:"helix",url:"moderation/warnings",method:"POST",userId:n,scopes:["moderator:manage:warnings"],canOverrideScopedUserContext:!0,query:this._createModeratorActionQuery(n),jsonBody:(0,Xe.createWarnUserBody)(t,r.slice(0,500))});return new VA.HelixWarning(a.data[0],this._client)}_createModeratorActionQuery(e){return(0,dr.createModeratorActionQuery)(e,this._getUserContextIdWithDefault(e))}};Zn.HelixModerationApi=Hp;Zn.HelixModerationApi=Hp=NA.__decorate([(0,k.rtfm)("api","HelixModerationApi")],Hp)});var jb=l($r=>{"use strict";Object.defineProperty($r,"__esModule",{value:!0});$r.createPollEndBody=$r.createPollBody=void 0;var Ob=p();function $A(i,e){var t;return{broadcaster_id:(0,Ob.extractUserId)(i),title:e.title,choices:e.choices.map(r=>({title:r})),duration:e.duration,channel_points_voting_enabled:e.channelPointsPerVote!=null,channel_points_per_vote:(t=e.channelPointsPerVote)!==null&&t!==void 0?t:0}}$r.createPollBody=$A;function zA(i,e,t){return{broadcaster_id:(0,Ob.extractUserId)(i),id:e,status:t?"TERMINATED":"ARCHIVED"}}$r.createPollEndBody=zA});var Ep=l(Xn=>{"use strict";Object.defineProperty(Xn,"__esModule",{value:!0});Xn.HelixPollChoice=void 0;var KA=(y(),g(_)),zr=p(),qp=class extends zr.DataObject{get id(){return this[zr.rawDataSymbol].id}get title(){return this[zr.rawDataSymbol].title}get totalVotes(){return this[zr.rawDataSymbol].votes}get channelPointsVotes(){return this[zr.rawDataSymbol].channel_points_votes}};Xn.HelixPollChoice=qp;Xn.HelixPollChoice=qp=KA.__decorate([(0,zr.rtfm)("api","HelixPollChoice","id")],qp)});var Pp=l(Yn=>{"use strict";Object.defineProperty(Yn,"__esModule",{value:!0});Yn.HelixPoll=void 0;var kb=(y(),g(_)),JA=H(),Se=p(),ZA=Ep(),Ql=class extends Se.DataObject{constructor(e,t){super(e),this._client=t}get id(){return this[Se.rawDataSymbol].id}get broadcasterId(){return this[Se.rawDataSymbol].broadcaster_id}get broadcasterName(){return this[Se.rawDataSymbol].broadcaster_login}get broadcasterDisplayName(){return this[Se.rawDataSymbol].broadcaster_name}async getBroadcaster(){return(0,Se.checkRelationAssertion)(await this._client.users.getUserById(this[Se.rawDataSymbol].broadcaster_id))}get title(){return this[Se.rawDataSymbol].title}get isChannelPointsVotingEnabled(){return this[Se.rawDataSymbol].channel_points_voting_enabled}get channelPointsPerVote(){return this[Se.rawDataSymbol].channel_points_per_vote}get status(){return this[Se.rawDataSymbol].status}get durationInSeconds(){return this[Se.rawDataSymbol].duration}get startDate(){return new Date(this[Se.rawDataSymbol].started_at)}get endDate(){return new Date(this.startDate.getTime()+this[Se.rawDataSymbol].duration*1e3)}get choices(){return this[Se.rawDataSymbol].choices.map(e=>new ZA.HelixPollChoice(e))}};Yn.HelixPoll=Ql;kb.__decorate([(0,JA.Enumerable)(!1)],Ql.prototype,"_client",void 0);Yn.HelixPoll=Ql=kb.__decorate([(0,Se.rtfm)("api","HelixPoll","id")],Ql)});var Dp=l(ta=>{"use strict";Object.defineProperty(ta,"__esModule",{value:!0});ta.HelixPollApi=void 0;var XA=(y(),g(_)),Mb=J(),Kr=p(),YA=Re(),Lb=jb(),eD=ne(),tD=ue(),rD=ae(),iD=N(),ea=Pp(),Ap=class extends iD.BaseApi{async getPolls(e,t){let r=await this._client.callApi({type:"helix",url:"polls",userId:(0,Kr.extractUserId)(e),scopes:["channel:read:polls","channel:manage:polls"],query:{...(0,Mb.createBroadcasterQuery)(e),...(0,rD.createPaginationQuery)(t)}});return(0,tD.createPaginatedResult)(r,ea.HelixPoll,this._client)}getPollsPaginated(e){return new eD.HelixPaginatedRequest({url:"polls",userId:(0,Kr.extractUserId)(e),scopes:["channel:read:polls","channel:manage:polls"],query:(0,Mb.createBroadcasterQuery)(e)},this._client,t=>new ea.HelixPoll(t,this._client),20)}async getPollsByIds(e,t){return t.length?(await this._client.callApi({type:"helix",url:"polls",userId:(0,Kr.extractUserId)(e),scopes:["channel:read:polls","channel:manage:polls"],query:(0,YA.createGetByIdsQuery)(e,t)})).data.map(n=>new ea.HelixPoll(n,this._client)):[]}async getPollById(e,t){let r=await this.getPollsByIds(e,[t]);return r.length?r[0]:null}async createPoll(e,t){let r=await this._client.callApi({type:"helix",url:"polls",method:"POST",userId:(0,Kr.extractUserId)(e),scopes:["channel:manage:polls"],jsonBody:(0,Lb.createPollBody)(e,t)});return new ea.HelixPoll(r.data[0],this._client)}async endPoll(e,t,r=!0){let n=await this._client.callApi({type:"helix",url:"polls",method:"PATCH",userId:(0,Kr.extractUserId)(e),scopes:["channel:manage:polls"],jsonBody:(0,Lb.createPollEndBody)(e,t,r)});return new ea.HelixPoll(n.data[0],this._client)}};ta.HelixPollApi=Ap;ta.HelixPollApi=Ap=XA.__decorate([(0,Kr.rtfm)("api","HelixPollApi")],Ap)});var Nb=l(Jr=>{"use strict";Object.defineProperty(Jr,"__esModule",{value:!0});Jr.createEndPredictionBody=Jr.createPredictionBody=void 0;var Fb=p();function nD(i,e){return{broadcaster_id:(0,Fb.extractUserId)(i),title:e.title,outcomes:e.outcomes.map(t=>({title:t})),prediction_window:e.autoLockAfter}}Jr.createPredictionBody=nD;function aD(i,e,t,r){return{broadcaster_id:(0,Fb.extractUserId)(i),id:e,status:t,winning_outcome_id:r}}Jr.createEndPredictionBody=aD});var Ip=l(ra=>{"use strict";Object.defineProperty(ra,"__esModule",{value:!0});ra.HelixPredictor=void 0;var Qb=(y(),g(_)),sD=H(),Qt=p(),Gl=class extends Qt.DataObject{constructor(e,t){super(e),this._client=t}get userId(){return this[Qt.rawDataSymbol].user_id}get userName(){return this[Qt.rawDataSymbol].user_login}get userDisplayName(){return this[Qt.rawDataSymbol].user_name}async getUser(){return await this._client.users.getUserById(this[Qt.rawDataSymbol].user_id)}get channelPointsUsed(){return this[Qt.rawDataSymbol].channel_points_used}get channelPointsWon(){return this[Qt.rawDataSymbol].channel_points_won}};ra.HelixPredictor=Gl;Qb.__decorate([(0,sD.Enumerable)(!1)],Gl.prototype,"_client",void 0);ra.HelixPredictor=Gl=Qb.__decorate([(0,Qt.rtfm)("api","HelixPredictor","userId")],Gl)});var Tp=l(ia=>{"use strict";Object.defineProperty(ia,"__esModule",{value:!0});ia.HelixPredictionOutcome=void 0;var Gb=(y(),g(_)),oD=H(),Gt=p(),lD=Ip(),Wl=class extends Gt.DataObject{constructor(e,t){super(e),this._client=t}get id(){return this[Gt.rawDataSymbol].id}get title(){return this[Gt.rawDataSymbol].title}get users(){return this[Gt.rawDataSymbol].users}get totalChannelPoints(){return this[Gt.rawDataSymbol].channel_points}get color(){return this[Gt.rawDataSymbol].color}get topPredictors(){var e,t;return(t=(e=this[Gt.rawDataSymbol].top_predictors)===null||e===void 0?void 0:e.map(r=>new lD.HelixPredictor(r,this._client)))!==null&&t!==void 0?t:[]}};ia.HelixPredictionOutcome=Wl;Gb.__decorate([(0,oD.Enumerable)(!1)],Wl.prototype,"_client",void 0);ia.HelixPredictionOutcome=Wl=Gb.__decorate([(0,Gt.rtfm)("api","HelixPredictionOutcome","id")],Wl)});var Rp=l(na=>{"use strict";Object.defineProperty(na,"__esModule",{value:!0});na.HelixPrediction=void 0;var Vb=(y(),g(_)),uD=H(),Y=p(),Wb=Tp(),Vl=class extends Y.DataObject{constructor(e,t){super(e),this._client=t}get id(){return this[Y.rawDataSymbol].id}get broadcasterId(){return this[Y.rawDataSymbol].broadcaster_id}get broadcasterName(){return this[Y.rawDataSymbol].broadcaster_login}get broadcasterDisplayName(){return this[Y.rawDataSymbol].broadcaster_name}async getBroadcaster(){return(0,Y.checkRelationAssertion)(await this._client.users.getUserById(this[Y.rawDataSymbol].broadcaster_id))}get title(){return this[Y.rawDataSymbol].title}get status(){return this[Y.rawDataSymbol].status}get autoLockAfter(){return this[Y.rawDataSymbol].prediction_window}get creationDate(){return new Date(this[Y.rawDataSymbol].created_at)}get endDate(){return this[Y.rawDataSymbol].ended_at?new Date(this[Y.rawDataSymbol].ended_at):null}get lockDate(){return this[Y.rawDataSymbol].locked_at?new Date(this[Y.rawDataSymbol].locked_at):null}get outcomes(){return this[Y.rawDataSymbol].outcomes.map(e=>new Wb.HelixPredictionOutcome(e,this._client))}get winningOutcomeId(){return this[Y.rawDataSymbol].winning_outcome_id||null}get winningOutcome(){if(!this[Y.rawDataSymbol].winning_outcome_id)return null;let e=this[Y.rawDataSymbol].outcomes.find(t=>t.id===this[Y.rawDataSymbol].winning_outcome_id);if(!e)throw new Y.HellFreezesOverError("Winning outcome not found in outcomes array");return new Wb.HelixPredictionOutcome(e,this._client)}};na.HelixPrediction=Vl;Vb.__decorate([(0,uD.Enumerable)(!1)],Vl.prototype,"_client",void 0);na.HelixPrediction=Vl=Vb.__decorate([(0,Y.rtfm)("api","HelixPrediction","id")],Vl)});var Bp=l(sa=>{"use strict";Object.defineProperty(sa,"__esModule",{value:!0});sa.HelixPredictionApi=void 0;var cD=(y(),g(_)),$b=J(),Zr=p(),dD=Re(),zb=Nb(),hD=ne(),pD=ue(),mD=ae(),_D=N(),aa=Rp(),Up=class extends _D.BaseApi{async getPredictions(e,t){let r=await this._client.callApi({type:"helix",url:"predictions",userId:(0,Zr.extractUserId)(e),scopes:["channel:read:predictions"],query:{...(0,$b.createBroadcasterQuery)(e),...(0,mD.createPaginationQuery)(t)}});return(0,pD.createPaginatedResult)(r,aa.HelixPrediction,this._client)}getPredictionsPaginated(e){return new hD.HelixPaginatedRequest({url:"predictions",userId:(0,Zr.extractUserId)(e),scopes:["channel:read:predictions"],query:(0,$b.createBroadcasterQuery)(e)},this._client,t=>new aa.HelixPrediction(t,this._client),20)}async getPredictionsByIds(e,t){return t.length?(await this._client.callApi({type:"helix",url:"predictions",userId:(0,Zr.extractUserId)(e),scopes:["channel:read:predictions"],query:(0,dD.createGetByIdsQuery)(e,t)})).data.map(n=>new aa.HelixPrediction(n,this._client)):[]}async getPredictionById(e,t){let r=await this.getPredictionsByIds(e,[t]);return r.length?r[0]:null}async createPrediction(e,t){let r=await this._client.callApi({type:"helix",url:"predictions",method:"POST",userId:(0,Zr.extractUserId)(e),scopes:["channel:manage:predictions"],jsonBody:(0,zb.createPredictionBody)(e,t)});return new aa.HelixPrediction(r.data[0],this._client)}async lockPrediction(e,t){return await this._endPrediction(e,t,"LOCKED")}async resolvePrediction(e,t,r){return await this._endPrediction(e,t,"RESOLVED",r)}async cancelPrediction(e,t){return await this._endPrediction(e,t,"CANCELED")}async _endPrediction(e,t,r,n){let a=await this._client.callApi({type:"helix",url:"predictions",method:"PATCH",userId:(0,Zr.extractUserId)(e),scopes:["channel:manage:predictions"],jsonBody:(0,zb.createEndPredictionBody)(e,t,r,n)});return new aa.HelixPrediction(a.data[0],this._client)}};sa.HelixPredictionApi=Up;sa.HelixPredictionApi=Up=cD.__decorate([(0,Zr.rtfm)("api","HelixPredictionApi")],Up)});var Jb=l($l=>{"use strict";Object.defineProperty($l,"__esModule",{value:!0});$l.createRaidStartQuery=void 0;var Kb=p();function yD(i,e){return{from_broadcaster_id:(0,Kb.extractUserId)(i),to_broadcaster_id:(0,Kb.extractUserId)(e)}}$l.createRaidStartQuery=yD});var jp=l(oa=>{"use strict";Object.defineProperty(oa,"__esModule",{value:!0});oa.HelixRaid=void 0;var fD=(y(),g(_)),zl=p(),Op=class extends zl.DataObject{get creationDate(){return new Date(this[zl.rawDataSymbol].created_at)}get targetIsMature(){return this[zl.rawDataSymbol].is_mature}};oa.HelixRaid=Op;oa.HelixRaid=Op=fD.__decorate([(0,zl.rtfm)("api","HelixRaid")],Op)});var Lp=l(la=>{"use strict";Object.defineProperty(la,"__esModule",{value:!0});la.HelixRaidApi=void 0;var gD=(y(),g(_)),bD=J(),kp=p(),xD=Jb(),wD=N(),vD=jp(),Mp=class extends wD.BaseApi{async startRaid(e,t){let r=await this._client.callApi({type:"helix",url:"raids",method:"POST",userId:(0,kp.extractUserId)(e),scopes:["channel:manage:raids"],query:(0,xD.createRaidStartQuery)(e,t)});return new vD.HelixRaid(r.data[0])}async cancelRaid(e){await this._client.callApi({type:"helix",url:"raids",method:"DELETE",userId:(0,kp.extractUserId)(e),scopes:["channel:manage:raids"],query:(0,bD.createBroadcasterQuery)(e)})}};la.HelixRaidApi=Mp;la.HelixRaidApi=Mp=gD.__decorate([(0,kp.rtfm)("api","HelixRaidApi")],Mp)});var Fp=l(Ve=>{"use strict";Object.defineProperty(Ve,"__esModule",{value:!0});Ve.createScheduleSegmentUpdateBody=Ve.createScheduleSegmentModifyQuery=Ve.createScheduleSegmentBody=Ve.createScheduleSettingsUpdateQuery=Ve.createScheduleQuery=void 0;var Kl=p();function SD(i,e){var t;return{broadcaster_id:(0,Kl.extractUserId)(i),start_time:e?.startDate,utc_offset:(t=e?.utcOffset)===null||t===void 0?void 0:t.toString()}}Ve.createScheduleQuery=SD;function HD(i,e){return e.vacation?{broadcaster_id:(0,Kl.extractUserId)(i),is_vacation_enabled:"true",vacation_start_time:e.vacation.startDate,vacation_end_time:e.vacation.endDate,timezone:e.vacation.timezone}:{broadcaster_id:(0,Kl.extractUserId)(i),is_vacation_enabled:"false"}}Ve.createScheduleSettingsUpdateQuery=HD;function CD(i){return{start_time:i.startDate,timezone:i.timezone,is_recurring:i.isRecurring,duration:i.duration,category_id:i.categoryId,title:i.title}}Ve.createScheduleSegmentBody=CD;function qD(i,e){return{broadcaster_id:(0,Kl.extractUserId)(i),id:e}}Ve.createScheduleSegmentModifyQuery=qD;function ED(i){return{start_time:i.startDate,timezone:i.timezone,is_canceled:i.isCanceled,duration:i.duration,category_id:i.categoryId,title:i.title}}Ve.createScheduleSegmentUpdateBody=ED});var ca=l(ua=>{"use strict";Object.defineProperty(ua,"__esModule",{value:!0});ua.HelixScheduleSegment=void 0;var Zb=(y(),g(_)),Xb=H(),Ye=p(),Jl=class extends Ye.DataObject{constructor(e,t){super(e),this._client=t}get id(){return this[Ye.rawDataSymbol].id}get startDate(){return new Date(this[Ye.rawDataSymbol].start_time)}get endDate(){return new Date(this[Ye.rawDataSymbol].end_time)}get title(){return this[Ye.rawDataSymbol].title}get cancelEndDate(){return(0,Xb.mapNullable)(this[Ye.rawDataSymbol].canceled_until,e=>new Date(e))}get categoryId(){var e,t;return(t=(e=this[Ye.rawDataSymbol].category)===null||e===void 0?void 0:e.id)!==null&&t!==void 0?t:null}get categoryName(){var e,t;return(t=(e=this[Ye.rawDataSymbol].category)===null||e===void 0?void 0:e.name)!==null&&t!==void 0?t:null}async getCategory(){var e;let t=(e=this[Ye.rawDataSymbol].category)===null||e===void 0?void 0:e.id;return t?await this._client.games.getGameById(t):null}get isRecurring(){return this[Ye.rawDataSymbol].is_recurring}};ua.HelixScheduleSegment=Jl;Zb.__decorate([(0,Xb.Enumerable)(!1)],Jl.prototype,"_client",void 0);ua.HelixScheduleSegment=Jl=Zb.__decorate([(0,Ye.rtfm)("api","HelixScheduleSegment","id")],Jl)});var Qp=l(da=>{"use strict";Object.defineProperty(da,"__esModule",{value:!0});da.HelixPaginatedScheduleSegmentRequest=void 0;var PD=(y(),g(_)),AD=p(),DD=Fp(),ID=ne(),TD=ca(),Np=class extends ID.HelixPaginatedRequest{constructor(e,t,r){super({url:"schedule",query:(0,DD.createScheduleQuery)(e,r)},t,n=>new TD.HelixScheduleSegment(n,t),25)}async _fetchData(e={}){var t;let r=await super._fetchData(e);return{data:(t=r.data.segments)!==null&&t!==void 0?t:[],pagination:r.pagination}}};da.HelixPaginatedScheduleSegmentRequest=Np;da.HelixPaginatedScheduleSegmentRequest=Np=PD.__decorate([(0,AD.rtfm)("api","HelixPaginatedScheduleSegmentRequest")],Np)});var Gp=l(ha=>{"use strict";Object.defineProperty(ha,"__esModule",{value:!0});ha.HelixSchedule=void 0;var Yb=(y(),g(_)),RD=H(),pt=p(),UD=ca(),Zl=class extends pt.DataObject{constructor(e,t){super(e),this._client=t}get segments(){var e,t;return(t=(e=this[pt.rawDataSymbol].segments)===null||e===void 0?void 0:e.map(r=>new UD.HelixScheduleSegment(r,this._client)))!==null&&t!==void 0?t:[]}get broadcasterId(){return this[pt.rawDataSymbol].broadcaster_id}get broadcasterName(){return this[pt.rawDataSymbol].broadcaster_login}get broadcasterDisplayName(){return this[pt.rawDataSymbol].broadcaster_name}async getBroadcaster(){return(0,pt.checkRelationAssertion)(await this._client.users.getUserById(this[pt.rawDataSymbol].broadcaster_id))}get vacationStartDate(){var e;let t=(e=this[pt.rawDataSymbol].vacation)===null||e===void 0?void 0:e.start_time;return t?new Date(t):null}get vacationEndDate(){var e;let t=(e=this[pt.rawDataSymbol].vacation)===null||e===void 0?void 0:e.end_time;return t?new Date(t):null}};ha.HelixSchedule=Zl;Yb.__decorate([(0,RD.Enumerable)(!1)],Zl.prototype,"_client",void 0);ha.HelixSchedule=Zl=Yb.__decorate([(0,pt.rtfm)("api","HelixSchedule","broadcasterId")],Zl)});var $p=l(Xl=>{"use strict";Object.defineProperty(Xl,"__esModule",{value:!0});Xl.HelixScheduleApi=void 0;var ex=J(),Xr=p(),BD=Re(),Yr=Fp(),OD=ae(),jD=N(),kD=Qp(),MD=Gp(),Wp=ca(),Vp=class extends jD.BaseApi{async getSchedule(e,t){let r=await this._client.callApi({type:"helix",url:"schedule",userId:(0,Xr.extractUserId)(e),query:{...(0,Yr.createScheduleQuery)(e,t),...(0,OD.createPaginationQuery)(t)}});return{data:new MD.HelixSchedule(r.data,this._client),cursor:r.pagination.cursor}}getScheduleSegmentsPaginated(e,t){return new kD.HelixPaginatedScheduleSegmentRequest(e,this._client,t)}async getScheduleSegmentsByIds(e,t){var r,n;return(n=(r=(await this._client.callApi({type:"helix",url:"schedule",userId:(0,Xr.extractUserId)(e),query:(0,BD.createGetByIdsQuery)(e,t)})).data.segments)===null||r===void 0?void 0:r.map(s=>new Wp.HelixScheduleSegment(s,this._client)))!==null&&n!==void 0?n:[]}async getScheduleSegmentById(e,t){let r=await this.getScheduleSegmentsByIds(e,[t]);return r.length?r[0]:null}async getScheduleAsIcal(e){return await this._client.callApi({type:"helix",url:"schedule/icalendar",query:(0,ex.createBroadcasterQuery)(e)})}async updateScheduleSettings(e,t){await this._client.callApi({type:"helix",url:"schedule/settings",method:"PATCH",userId:(0,Xr.extractUserId)(e),scopes:["channel:manage:schedule"],query:(0,Yr.createScheduleSettingsUpdateQuery)(e,t)})}async createScheduleSegment(e,t){let r=await this._client.callApi({type:"helix",url:"schedule/segment",method:"POST",userId:(0,Xr.extractUserId)(e),scopes:["channel:manage:schedule"],query:(0,ex.createBroadcasterQuery)(e),jsonBody:(0,Yr.createScheduleSegmentBody)(t)});return new Wp.HelixScheduleSegment(r.data.segments[0],this._client)}async updateScheduleSegment(e,t,r){let n=await this._client.callApi({type:"helix",url:"schedule/segment",method:"PATCH",userId:(0,Xr.extractUserId)(e),scopes:["channel:manage:schedule"],query:(0,Yr.createScheduleSegmentModifyQuery)(e,t),jsonBody:(0,Yr.createScheduleSegmentUpdateBody)(r)});return new Wp.HelixScheduleSegment(n.data.segments[0],this._client)}async deleteScheduleSegment(e,t){await this._client.callApi({type:"helix",url:"schedule/segment",method:"DELETE",userId:(0,Xr.extractUserId)(e),scopes:["channel:manage:schedule"],query:(0,Yr.createScheduleSegmentModifyQuery)(e,t)})}};Xl.HelixScheduleApi=Vp});var tx=l(Yl=>{"use strict";Object.defineProperty(Yl,"__esModule",{value:!0});Yl.createSearchChannelsQuery=void 0;function LD(i,e){var t;return{query:i,live_only:(t=e.liveOnly)===null||t===void 0?void 0:t.toString()}}Yl.createSearchChannelsQuery=LD});var zp=l(pa=>{"use strict";Object.defineProperty(pa,"__esModule",{value:!0});pa.HelixChannelSearchResult=void 0;var rx=(y(),g(_)),FD=H(),_e=p(),eu=class extends _e.DataObject{constructor(e,t){super(e),this._client=t}get language(){return this[_e.rawDataSymbol].broadcaster_language}get id(){return this[_e.rawDataSymbol].id}get name(){return this[_e.rawDataSymbol].broadcaster_login}get displayName(){return this[_e.rawDataSymbol].display_name}async getUser(){return(0,_e.checkRelationAssertion)(await this._client.users.getUserById(this[_e.rawDataSymbol].id))}get gameId(){return this[_e.rawDataSymbol].game_id}get gameName(){return this[_e.rawDataSymbol].game_name}async getGame(){return this[_e.rawDataSymbol].game_id?(0,_e.checkRelationAssertion)(await this._client.games.getGameById(this[_e.rawDataSymbol].game_id)):null}get isLive(){return this[_e.rawDataSymbol].is_live}get tags(){return this[_e.rawDataSymbol].tags}get thumbnailUrl(){return this[_e.rawDataSymbol].thumbnail_url}get startDate(){return this[_e.rawDataSymbol].is_live?new Date(this[_e.rawDataSymbol].started_at):null}};pa.HelixChannelSearchResult=eu;rx.__decorate([(0,FD.Enumerable)(!1)],eu.prototype,"_client",void 0);pa.HelixChannelSearchResult=eu=rx.__decorate([(0,_e.rtfm)("api","HelixChannelSearchResult","id")],eu)});var Jp=l(ma=>{"use strict";Object.defineProperty(ma,"__esModule",{value:!0});ma.HelixSearchApi=void 0;var ND=(y(),g(_)),QD=p(),ix=tx(),nx=ne(),ax=ue(),sx=ae(),GD=N(),ox=Al(),lx=zp(),Kp=class extends GD.BaseApi{async searchCategories(e,t){let r=await this._client.callApi({type:"helix",url:"search/categories",query:{query:e,...(0,sx.createPaginationQuery)(t)}});return(0,ax.createPaginatedResult)(r,ox.HelixGame,this._client)}searchCategoriesPaginated(e){return new nx.HelixPaginatedRequest({url:"search/categories",query:{query:e}},this._client,t=>new ox.HelixGame(t,this._client))}async searchChannels(e,t={}){let r=await this._client.callApi({type:"helix",url:"search/channels",query:{...(0,ix.createSearchChannelsQuery)(e,t),...(0,sx.createPaginationQuery)(t)}});return(0,ax.createPaginatedResult)(r,lx.HelixChannelSearchResult,this._client)}searchChannelsPaginated(e,t={}){return new nx.HelixPaginatedRequest({url:"search/channels",query:(0,ix.createSearchChannelsQuery)(e,t)},this._client,r=>new lx.HelixChannelSearchResult(r,this._client))}};ma.HelixSearchApi=Kp;ma.HelixSearchApi=Kp=ND.__decorate([(0,QD.rtfm)("api","HelixSearchApi")],Kp)});var Xp=l(tu=>{"use strict";Object.defineProperty(tu,"__esModule",{value:!0});tu.StreamNotLiveError=void 0;var WD=p(),Zp=class extends WD.CustomError{constructor(e){super("Your stream needs to be live to do this",e)}};tu.StreamNotLiveError=Zp});var ux=l(Wt=>{"use strict";Object.defineProperty(Wt,"__esModule",{value:!0});Wt.createVideoQuery=Wt.createStreamMarkerBody=Wt.createStreamQuery=void 0;var VD=p();function $D(i){return{game_id:i.game,language:i.language,type:i.type,user_id:i.userId,user_login:i.userName}}Wt.createStreamQuery=$D;function zD(i,e){return{user_id:(0,VD.extractUserId)(i),description:e}}Wt.createStreamMarkerBody=zD;function KD(i){return{video_id:i}}Wt.createVideoQuery=KD});var Yp=l(_a=>{"use strict";Object.defineProperty(_a,"__esModule",{value:!0});_a.HelixStream=void 0;var cx=(y(),g(_)),JD=H(),ee=p(),ru=class extends ee.DataObject{constructor(e,t){super(e),this._client=t}get id(){return this[ee.rawDataSymbol].id}get userId(){return this[ee.rawDataSymbol].user_id}get userName(){return this[ee.rawDataSymbol].user_login}get userDisplayName(){return this[ee.rawDataSymbol].user_name}async getUser(){return(0,ee.checkRelationAssertion)(await this._client.users.getUserById(this[ee.rawDataSymbol].user_id))}get gameId(){return this[ee.rawDataSymbol].game_id}get gameName(){return this[ee.rawDataSymbol].game_name}async getGame(){return this[ee.rawDataSymbol].game_id?(0,ee.checkRelationAssertion)(await this._client.games.getGameById(this[ee.rawDataSymbol].game_id)):null}get type(){return this[ee.rawDataSymbol].type}get title(){return this[ee.rawDataSymbol].title}get viewers(){return this[ee.rawDataSymbol].viewer_count}get startDate(){return new Date(this[ee.rawDataSymbol].started_at)}get language(){return this[ee.rawDataSymbol].language}get thumbnailUrl(){return this[ee.rawDataSymbol].thumbnail_url}getThumbnailUrl(e,t){return this[ee.rawDataSymbol].thumbnail_url.replace("{width}",e.toString()).replace("{height}",t.toString())}get tags(){return this[ee.rawDataSymbol].tags}get isMature(){return this[ee.rawDataSymbol].is_mature}};_a.HelixStream=ru;cx.__decorate([(0,JD.Enumerable)(!1)],ru.prototype,"_client",void 0);_a.HelixStream=ru=cx.__decorate([(0,ee.rtfm)("api","HelixStream","id")],ru)});var nu=l(ya=>{"use strict";Object.defineProperty(ya,"__esModule",{value:!0});ya.HelixStreamMarker=void 0;var dx=(y(),g(_)),ZD=H(),ei=p(),iu=class extends ei.DataObject{constructor(e,t){super(e),this._client=t}get id(){return this[ei.rawDataSymbol].id}get creationDate(){return new Date(this[ei.rawDataSymbol].created_at)}get description(){return this[ei.rawDataSymbol].description}get positionInSeconds(){return this[ei.rawDataSymbol].position_seconds}};ya.HelixStreamMarker=iu;dx.__decorate([(0,ZD.Enumerable)(!1)],iu.prototype,"_client",void 0);ya.HelixStreamMarker=iu=dx.__decorate([(0,ei.rtfm)("api","HelixStreamMarker","id")],iu)});var rm=l(fa=>{"use strict";Object.defineProperty(fa,"__esModule",{value:!0});fa.HelixStreamMarkerWithVideo=void 0;var XD=(y(),g(_)),em=p(),YD=nu(),tm=class extends YD.HelixStreamMarker{constructor(e,t,r){super(e,r),this._videoId=t}get url(){return this[em.rawDataSymbol].URL}get videoId(){return this._videoId}async getVideo(){return(0,em.checkRelationAssertion)(await this._client.videos.getVideoById(this._videoId))}};fa.HelixStreamMarkerWithVideo=tm;fa.HelixStreamMarkerWithVideo=tm=XD.__decorate([(0,em.rtfm)("api","HelixStreamMarkerWithVideo","id")],tm)});var nm=l(xa=>{"use strict";var ri;Object.defineProperty(xa,"__esModule",{value:!0});xa.HelixStreamApi=void 0;var im=(y(),g(_)),ga=H(),hx=J(),Ie=p(),e1=Xp(),au=Re(),ti=ux(),px=Ut(),su=ne(),mx=ue(),ou=ae(),t1=N(),hr=Yp(),r1=nu(),i1=rm(),ba=ri=class extends t1.BaseApi{constructor(){super(...arguments),this._getStreamByUserIdBatcher=new px.HelixRequestBatcher({url:"streams"},"user_id","user_id",this._client,e=>new hr.HelixStream(e,this._client)),this._getStreamByUserNameBatcher=new px.HelixRequestBatcher({url:"streams"},"user_login","user_login",this._client,e=>new hr.HelixStream(e,this._client))}async getStreams(e={}){let t=await this._client.callApi({url:"streams",type:"helix",query:{...(0,ti.createStreamQuery)(e),...(0,ou.createPaginationQuery)(e)}});return(0,mx.createPaginatedResult)(t,hr.HelixStream,this._client)}getStreamsPaginated(e={}){return new su.HelixPaginatedRequest({url:"streams",query:(0,ti.createStreamQuery)(e)},this._client,t=>new hr.HelixStream(t,this._client))}async getStreamsByUserNames(e){return(await this.getStreams({userName:e.map(Ie.extractUserName)})).data}async getStreamByUserName(e){var t;return(t=(await this.getStreamsByUserNames([e]))[0])!==null&&t!==void 0?t:null}async getStreamByUserNameBatched(e){return await this._getStreamByUserNameBatcher.request((0,Ie.extractUserName)(e))}async getStreamsByUserIds(e){return(await this.getStreams({userId:e.map(Ie.extractUserId)})).data}async getStreamByUserId(e){let t=(0,Ie.extractUserId)(e),r=await this._client.callApi({url:"streams",type:"helix",userId:t,query:(0,ti.createStreamQuery)({userId:t})});return(0,ga.mapNullable)(r.data[0],n=>new hr.HelixStream(n,this._client))}async getStreamByUserIdBatched(e){return await this._getStreamByUserIdBatcher.request((0,Ie.extractUserId)(e))}async getStreamMarkersForUser(e,t){var r;let n=await this._client.callApi({url:"streams/markers",type:"helix",query:{...(0,au.createUserQuery)(e),...(0,ou.createPaginationQuery)(t)},userId:(0,Ie.extractUserId)(e),scopes:["user:read:broadcast"],canOverrideScopedUserContext:!0});return{data:(0,ga.flatten)(n.data.map(a=>ri._mapGetStreamMarkersResult(a,this._client))),cursor:(r=n.pagination)===null||r===void 0?void 0:r.cursor}}getStreamMarkersForUserPaginated(e){return new su.HelixPaginatedRequest({url:"streams/markers",query:(0,au.createUserQuery)(e),userId:(0,Ie.extractUserId)(e),scopes:["user:read:broadcast"],canOverrideScopedUserContext:!0},this._client,t=>ri._mapGetStreamMarkersResult(t,this._client))}async getStreamMarkersForVideo(e,t,r){var n;let a=await this._client.callApi({url:"streams/markers",type:"helix",query:{...(0,ti.createVideoQuery)(t),...(0,ou.createPaginationQuery)(r)},userId:(0,Ie.extractUserId)(e),scopes:["user:read:broadcast"],canOverrideScopedUserContext:!0});return{data:(0,ga.flatten)(a.data.map(s=>ri._mapGetStreamMarkersResult(s,this._client))),cursor:(n=a.pagination)===null||n===void 0?void 0:n.cursor}}getStreamMarkersForVideoPaginated(e,t){return new su.HelixPaginatedRequest({url:"streams/markers",query:(0,ti.createVideoQuery)(t),userId:(0,Ie.extractUserId)(e),scopes:["user:read:broadcast"],canOverrideScopedUserContext:!0},this._client,r=>ri._mapGetStreamMarkersResult(r,this._client))}async createStreamMarker(e,t){try{let r=await this._client.callApi({url:"streams/markers",method:"POST",type:"helix",userId:(0,Ie.extractUserId)(e),scopes:["channel:manage:broadcast"],canOverrideScopedUserContext:!0,jsonBody:(0,ti.createStreamMarkerBody)(e,t)});return new r1.HelixStreamMarker(r.data[0],this._client)}catch(r){throw r instanceof hx.HttpStatusCodeError&&r.statusCode===404?new e1.StreamNotLiveError({cause:r}):r}}async getStreamKey(e){let t=(0,Ie.extractUserId)(e);return(await this._client.callApi({type:"helix",url:"streams/key",userId:t,scopes:["channel:read:stream_key"],query:(0,hx.createBroadcasterQuery)(e)})).data[0].stream_key}async getFollowedStreams(e,t){let r=(0,Ie.extractUserId)(e),n=await this._client.callApi({type:"helix",url:"streams/followed",userId:r,scopes:["user:read:follows"],query:{...(0,au.createSingleKeyQuery)("user_id",r),...(0,ou.createPaginationQuery)(t)}});return(0,mx.createPaginatedResult)(n,hr.HelixStream,this._client)}getFollowedStreamsPaginated(e){let t=(0,Ie.extractUserId)(e);return new su.HelixPaginatedRequest({url:"streams/followed",userId:t,scopes:["user:read:follows"],query:(0,au.createSingleKeyQuery)("user_id",t)},this._client,r=>new hr.HelixStream(r,this._client))}static _mapGetStreamMarkersResult(e,t){return e.videos.reduce((r,n)=>[...r,...n.markers.map(a=>new i1.HelixStreamMarkerWithVideo(a,n.video_id,t))],[])}};xa.HelixStreamApi=ba;im.__decorate([(0,ga.Enumerable)(!1)],ba.prototype,"_getStreamByUserIdBatcher",void 0);im.__decorate([(0,ga.Enumerable)(!1)],ba.prototype,"_getStreamByUserNameBatcher",void 0);xa.HelixStreamApi=ba=ri=im.__decorate([(0,Ie.rtfm)("api","HelixStreamApi")],ba)});var yx=l(lu=>{"use strict";Object.defineProperty(lu,"__esModule",{value:!0});lu.createSubscriptionCheckQuery=void 0;var _x=p();function n1(i,e){return{broadcaster_id:(0,_x.extractUserId)(i),user_id:(0,_x.extractUserId)(e)}}lu.createSubscriptionCheckQuery=n1});var cu=l(wa=>{"use strict";Object.defineProperty(wa,"__esModule",{value:!0});wa.HelixUserSubscription=void 0;var fx=(y(),g(_)),a1=H(),Vt=p(),uu=class extends Vt.DataObject{constructor(e,t){super(e),this._client=t}get broadcasterId(){return this[Vt.rawDataSymbol].broadcaster_id}get broadcasterName(){return this[Vt.rawDataSymbol].broadcaster_login}get broadcasterDisplayName(){return this[Vt.rawDataSymbol].broadcaster_name}async getBroadcaster(){return await this._client.users.getUserById(this[Vt.rawDataSymbol].broadcaster_id)}get isGift(){return this[Vt.rawDataSymbol].is_gift}get tier(){return this[Vt.rawDataSymbol].tier}};wa.HelixUserSubscription=uu;fx.__decorate([(0,a1.Enumerable)(!1)],uu.prototype,"_client",void 0);wa.HelixUserSubscription=uu=fx.__decorate([(0,Vt.rtfm)("api","HelixUserSubscription","broadcasterId")],uu)});var du=l(va=>{"use strict";Object.defineProperty(va,"__esModule",{value:!0});va.HelixSubscription=void 0;var s1=(y(),g(_)),le=p(),o1=cu(),am=class extends o1.HelixUserSubscription{get broadcasterId(){return this[le.rawDataSymbol].broadcaster_id}get broadcasterName(){return this[le.rawDataSymbol].broadcaster_login}get broadcasterDisplayName(){return this[le.rawDataSymbol].broadcaster_name}async getBroadcaster(){return(0,le.checkRelationAssertion)(await this._client.users.getUserById(this[le.rawDataSymbol].broadcaster_id))}get gifterId(){return this[le.rawDataSymbol].is_gift?this[le.rawDataSymbol].gifter_id:null}get gifterName(){return this[le.rawDataSymbol].is_gift?this[le.rawDataSymbol].gifter_login:null}get gifterDisplayName(){return this[le.rawDataSymbol].is_gift?this[le.rawDataSymbol].gifter_name:null}async getGifter(){return this[le.rawDataSymbol].is_gift?(0,le.checkRelationAssertion)(await this._client.users.getUserById(this[le.rawDataSymbol].gifter_id)):null}get userId(){return this[le.rawDataSymbol].user_id}get userName(){return this[le.rawDataSymbol].user_login}get userDisplayName(){return this[le.rawDataSymbol].user_name}async getUser(){return(0,le.checkRelationAssertion)(await this._client.users.getUserById(this[le.rawDataSymbol].user_id))}};va.HelixSubscription=am;va.HelixSubscription=am=s1.__decorate([(0,le.rtfm)("api","HelixSubscription","userId")],am)});var om=l(Sa=>{"use strict";Object.defineProperty(Sa,"__esModule",{value:!0});Sa.HelixPaginatedSubscriptionsRequest=void 0;var l1=(y(),g(_)),u1=J(),gx=p(),c1=kr(),d1=du(),sm=class extends c1.HelixPaginatedRequestWithTotal{constructor(e,t){super({url:"subscriptions",scopes:["channel:read:subscriptions"],userId:(0,gx.extractUserId)(e),query:(0,u1.createBroadcasterQuery)(e)},t,r=>new d1.HelixSubscription(r,t))}async getPoints(){var e;return((e=this._currentData)!==null&&e!==void 0?e:await this._fetchData({query:{after:void 0}})).points}};Sa.HelixPaginatedSubscriptionsRequest=sm;Sa.HelixPaginatedSubscriptionsRequest=sm=l1.__decorate([(0,gx.rtfm)("api","HelixPaginatedSubscriptionsRequest")],sm)});var um=l(Ha=>{"use strict";Object.defineProperty(Ha,"__esModule",{value:!0});Ha.HelixSubscriptionApi=void 0;var h1=(y(),g(_)),bx=J(),hu=p(),p1=Re(),m1=yx(),_1=ue(),y1=ae(),f1=N(),g1=om(),xx=du(),b1=cu(),lm=class extends f1.BaseApi{async getSubscriptions(e,t){let r=await this._client.callApi({url:"subscriptions",scopes:["channel:read:subscriptions"],type:"helix",userId:(0,hu.extractUserId)(e),query:{...(0,bx.createBroadcasterQuery)(e),...(0,y1.createPaginationQuery)(t)}});return{...(0,_1.createPaginatedResultWithTotal)(r,xx.HelixSubscription,this._client),points:r.points}}getSubscriptionsPaginated(e){return new g1.HelixPaginatedSubscriptionsRequest(e,this._client)}async getSubscriptionsForUsers(e,t){return(await this._client.callApi({type:"helix",url:"subscriptions",userId:(0,hu.extractUserId)(e),scopes:["channel:read:subscriptions"],query:(0,p1.createChannelUsersCheckQuery)(e,t)})).data.map(n=>new xx.HelixSubscription(n,this._client))}async getSubscriptionForUser(e,t){let r=await this.getSubscriptionsForUsers(e,[t]);return r.length?r[0]:null}async checkUserSubscription(e,t){try{let r=await this._client.callApi({type:"helix",url:"subscriptions/user",userId:(0,hu.extractUserId)(e),scopes:["user:read:subscriptions"],query:(0,m1.createSubscriptionCheckQuery)(t,e)});return new b1.HelixUserSubscription(r.data[0],this._client)}catch(r){if(r instanceof bx.HttpStatusCodeError&&r.statusCode===404)return null;throw r}}};Ha.HelixSubscriptionApi=lm;Ha.HelixSubscriptionApi=lm=h1.__decorate([(0,hu.rtfm)("api","HelixSubscriptionApi")],lm)});var mu=l(Ca=>{"use strict";Object.defineProperty(Ca,"__esModule",{value:!0});Ca.HelixTeam=void 0;var wx=(y(),g(_)),x1=H(),et=p(),pu=class extends et.DataObject{constructor(e,t){super(e),this._client=t}get id(){return this[et.rawDataSymbol].id}get name(){return this[et.rawDataSymbol].team_name}get displayName(){return this[et.rawDataSymbol].team_display_name}get backgroundImageUrl(){return this[et.rawDataSymbol].background_image_url}get bannerUrl(){return this[et.rawDataSymbol].banner}get creationDate(){return new Date(this[et.rawDataSymbol].created_at)}get updateDate(){return new Date(this[et.rawDataSymbol].updated_at)}get info(){return this[et.rawDataSymbol].info}get logoThumbnailUrl(){return this[et.rawDataSymbol].thumbnail_url}async getUserRelations(){return(await this._client.teams.getTeamById(this.id)).userRelations}};Ca.HelixTeam=pu;wx.__decorate([(0,x1.Enumerable)(!1)],pu.prototype,"_client",void 0);Ca.HelixTeam=pu=wx.__decorate([(0,et.rtfm)("api","HelixTeam","id")],pu)});var dm=l(qa=>{"use strict";Object.defineProperty(qa,"__esModule",{value:!0});qa.HelixTeamWithUsers=void 0;var w1=(y(),g(_)),vx=p(),v1=ko(),S1=mu(),cm=class extends S1.HelixTeam{get userRelations(){return this[vx.rawDataSymbol].users.map(e=>new v1.HelixUserRelation(e,this._client))}};qa.HelixTeamWithUsers=cm;qa.HelixTeamWithUsers=cm=w1.__decorate([(0,vx.rtfm)("api","HelixTeamWithUsers","id")],cm)});var mm=l(Ea=>{"use strict";Object.defineProperty(Ea,"__esModule",{value:!0});Ea.HelixTeamApi=void 0;var H1=(y(),g(_)),hm=J(),Hx=p(),C1=N(),q1=mu(),Sx=dm(),pm=class extends C1.BaseApi{async getTeamsForBroadcaster(e){var t,r;return(r=(t=(await this._client.callApi({type:"helix",url:"teams/channel",userId:(0,Hx.extractUserId)(e),query:(0,hm.createBroadcasterQuery)(e)})).data)===null||t===void 0?void 0:t.map(a=>new q1.HelixTeam(a,this._client)))!==null&&r!==void 0?r:[]}async getTeamById(e){try{let t=await this._client.callApi({type:"helix",url:"teams",query:{id:e}});return new Sx.HelixTeamWithUsers(t.data[0],this._client)}catch(t){if(t instanceof hm.HttpStatusCodeError&&t.statusCode===500)return null;throw t}}async getTeamByName(e){try{let t=await this._client.callApi({type:"helix",url:"teams",query:{name:e}});return new Sx.HelixTeamWithUsers(t.data[0],this._client)}catch(t){if(t instanceof hm.HttpStatusCodeError&&t.statusCode===404)return null;throw t}}};Ea.HelixTeamApi=pm;Ea.HelixTeamApi=pm=H1.__decorate([(0,Hx.rtfm)("api","HelixTeamApi")],pm)});var qx=l(ii=>{"use strict";Object.defineProperty(ii,"__esModule",{value:!0});ii.createUserBlockDeleteQuery=ii.createUserBlockCreateQuery=void 0;var Cx=p();function E1(i,e){return{target_user_id:(0,Cx.extractUserId)(i),source_context:e.sourceContext,reason:e.reason}}ii.createUserBlockCreateQuery=E1;function P1(i){return{target_user_id:(0,Cx.extractUserId)(i)}}ii.createUserBlockDeleteQuery=P1});var fu=l(yu=>{"use strict";Object.defineProperty(yu,"__esModule",{value:!0});yu.HelixBaseExtension=void 0;var _u=p(),_m=class extends _u.DataObject{get id(){return this[_u.rawDataSymbol].id}get version(){return this[_u.rawDataSymbol].version}get name(){return this[_u.rawDataSymbol].name}};yu.HelixBaseExtension=_m});var fm=l(Pa=>{"use strict";Object.defineProperty(Pa,"__esModule",{value:!0});Pa.HelixInstalledExtension=void 0;var A1=(y(),g(_)),D1=p(),I1=fu(),ym=class extends I1.HelixBaseExtension{constructor(e,t,r){super(r),this._slotType=e,this._slotId=t}get slotType(){return this._slotType}get slotId(){return this._slotId}};Pa.HelixInstalledExtension=ym;Pa.HelixInstalledExtension=ym=A1.__decorate([(0,D1.rtfm)("api","HelixInstalledExtension","id")],ym)});var xm=l(Da=>{"use strict";Object.defineProperty(Da,"__esModule",{value:!0});Da.HelixInstalledExtensionList=void 0;var T1=(y(),g(_)),Aa=p(),gm=fm(),bm=class extends Aa.DataObject{getExtensionAtSlot(e,t){let r=this[Aa.rawDataSymbol][e][t];return r.active?new gm.HelixInstalledExtension(e,t,r):null}getExtensionsForSlotType(e){return[...Object.entries(this[Aa.rawDataSymbol][e])].filter(t=>t[1].active).map(([t,r])=>new gm.HelixInstalledExtension(e,t,r))}getAllExtensions(){return[...Object.entries(this[Aa.rawDataSymbol])].flatMap(([e,t])=>[...Object.entries(t)].filter(r=>r[1].active).map(([r,n])=>new gm.HelixInstalledExtension(e,r,n)))}};Da.HelixInstalledExtensionList=bm;Da.HelixInstalledExtensionList=bm=T1.__decorate([(0,Aa.rtfm)("api","HelixInstalledExtensionList")],bm)});var Sm=l(Ia=>{"use strict";Object.defineProperty(Ia,"__esModule",{value:!0});Ia.HelixUserExtension=void 0;var R1=(y(),g(_)),wm=p(),U1=fu(),vm=class extends U1.HelixBaseExtension{get canActivate(){return this[wm.rawDataSymbol].can_activate}get types(){return this[wm.rawDataSymbol].type}};Ia.HelixUserExtension=vm;Ia.HelixUserExtension=vm=R1.__decorate([(0,wm.rtfm)("api","HelixUserExtension","id")],vm)});var bu=l(Ta=>{"use strict";Object.defineProperty(Ta,"__esModule",{value:!0});Ta.HelixUser=void 0;var Ex=(y(),g(_)),B1=H(),tt=p(),gu=class extends tt.DataObject{constructor(e,t){super(e),this._client=t}get id(){return this[tt.rawDataSymbol].id}get name(){return this[tt.rawDataSymbol].login}get displayName(){return this[tt.rawDataSymbol].display_name}get description(){return this[tt.rawDataSymbol].description}get type(){return this[tt.rawDataSymbol].type}get broadcasterType(){return this[tt.rawDataSymbol].broadcaster_type}get profilePictureUrl(){return this[tt.rawDataSymbol].profile_image_url}get offlinePlaceholderUrl(){return this[tt.rawDataSymbol].offline_image_url}get creationDate(){return new Date(this[tt.rawDataSymbol].created_at)}async getStream(){return await this._client.streams.getStreamByUserId(this)}async getFollowedChannels(){return await this._client.channels.getFollowedChannels(this)}async getFollowedChannel(e){var t;return(t=(await this._client.channels.getFollowedChannels(this,e)).data[0])!==null&&t!==void 0?t:null}async follows(e){return await this.getFollowedChannel(e)!==null}async getChannelFollowers(){return await this._client.channels.getChannelFollowers(this)}async getChannelFollower(e){var t;return(t=(await this._client.channels.getChannelFollowers(this,e)).data[0])!==null&&t!==void 0?t:null}async isFollowedBy(e){return await this.getChannelFollower(e)!==null}async getSubscriptionTo(e){return await this._client.subscriptions.checkUserSubscription(this,e)}async isSubscribedTo(e){return await this.getSubscriptionTo(e)!==null}async getSubscriber(e){return await this._client.subscriptions.getSubscriptionForUser(this,e)}async hasSubscriber(e){return await this.getSubscriber(e)!==null}};Ta.HelixUser=gu;Ex.__decorate([(0,B1.Enumerable)(!1)],gu.prototype,"_client",void 0);Ta.HelixUser=gu=Ex.__decorate([(0,tt.rtfm)("api","HelixUser","id")],gu)});var Cm=l(Ra=>{"use strict";Object.defineProperty(Ra,"__esModule",{value:!0});Ra.HelixPrivilegedUser=void 0;var O1=(y(),g(_)),Px=p(),j1=bu(),Hm=class extends j1.HelixUser{get email(){return this[Px.rawDataSymbol].email}async setDescription(e){return await this._client.users.updateAuthenticatedUser(this,{description:e})}};Ra.HelixPrivilegedUser=Hm;Ra.HelixPrivilegedUser=Hm=O1.__decorate([(0,Px.rtfm)("api","HelixPrivilegedUser","id")],Hm)});var qm=l(Ua=>{"use strict";Object.defineProperty(Ua,"__esModule",{value:!0});Ua.HelixUserBlock=void 0;var Ax=(y(),g(_)),k1=H(),pr=p(),xu=class extends pr.DataObject{constructor(e,t){super(e),this._client=t}get userId(){return this[pr.rawDataSymbol].user_id}get userName(){return this[pr.rawDataSymbol].user_login}get userDisplayName(){return this[pr.rawDataSymbol].display_name}async getUser(){return(0,pr.checkRelationAssertion)(await this._client.users.getUserById(this[pr.rawDataSymbol].user_id))}};Ua.HelixUserBlock=xu;Ax.__decorate([(0,k1.Enumerable)(!1)],xu.prototype,"_client",void 0);Ua.HelixUserBlock=xu=Ax.__decorate([(0,pr.rtfm)("api","HelixUserBlock","userId")],xu)});var Am=l(Oa=>{"use strict";Object.defineProperty(Oa,"__esModule",{value:!0});Oa.HelixUserApi=void 0;var Em=(y(),g(_)),Pm=H(),Dx=J(),ge=p(),M1=Re(),Ix=qx(),Tx=Ut(),L1=ne(),F1=ue(),N1=ae(),Q1=N(),Rx=xm(),G1=Sm(),Ux=Cm(),wu=bu(),Bx=qm(),Ba=class extends Q1.BaseApi{constructor(){super(...arguments),this._getUserByIdBatcher=new Tx.HelixRequestBatcher({url:"users"},"id","id",this._client,e=>new wu.HelixUser(e,this._client)),this._getUserByNameBatcher=new Tx.HelixRequestBatcher({url:"users"},"login","login",this._client,e=>new wu.HelixUser(e,this._client))}async getUsersByIds(e){return await this._getUsers("id",e.map(ge.extractUserId))}async getUsersByNames(e){return await this._getUsers("login",e.map(ge.extractUserName))}async getUserById(e){let t=(0,ge.extractUserId)(e),r=await this._client.callApi({type:"helix",url:"users",userId:t,query:{id:t}});return(0,Pm.mapNullable)(r.data[0],n=>new wu.HelixUser(n,this._client))}async getUserByIdBatched(e){return await this._getUserByIdBatcher.request((0,ge.extractUserId)(e))}async getUserByName(e){let t=await this._getUsers("login",[(0,ge.extractUserName)(e)]);return t.length?t[0]:null}async getUserByNameBatched(e){return await this._getUserByNameBatcher.request((0,ge.extractUserName)(e))}async getAuthenticatedUser(e,t=!1){var r;let n=await this._client.callApi({type:"helix",url:"users",forceType:"user",userId:(0,ge.extractUserId)(e),scopes:t?["user:read:email"]:void 0});if(!(!((r=n.data)===null||r===void 0)&&r.length))throw new ge.HellFreezesOverError("Could not get authenticated user");return new Ux.HelixPrivilegedUser(n.data[0],this._client)}async updateAuthenticatedUser(e,t){let r=await this._client.callApi({type:"helix",url:"users",method:"PUT",userId:(0,ge.extractUserId)(e),scopes:["user:edit"],query:{description:t.description}});return new Ux.HelixPrivilegedUser(r.data[0],this._client)}async getBlocks(e,t){let r=await this._client.callApi({type:"helix",url:"users/blocks",userId:(0,ge.extractUserId)(e),scopes:["user:read:blocked_users"],query:{...(0,Dx.createBroadcasterQuery)(e),...(0,N1.createPaginationQuery)(t)}});return(0,F1.createPaginatedResult)(r,Bx.HelixUserBlock,this._client)}getBlocksPaginated(e){return new L1.HelixPaginatedRequest({url:"users/blocks",userId:(0,ge.extractUserId)(e),scopes:["user:read:blocked_users"],query:(0,Dx.createBroadcasterQuery)(e)},this._client,t=>new Bx.HelixUserBlock(t,this._client))}async createBlock(e,t,r={}){await this._client.callApi({type:"helix",url:"users/blocks",method:"PUT",userId:(0,ge.extractUserId)(e),scopes:["user:manage:blocked_users"],query:(0,Ix.createUserBlockCreateQuery)(t,r)})}async deleteBlock(e,t){await this._client.callApi({type:"helix",url:"users/blocks",method:"DELETE",userId:(0,ge.extractUserId)(e),scopes:["user:manage:blocked_users"],query:(0,Ix.createUserBlockDeleteQuery)(t)})}async getExtensionsForAuthenticatedUser(e,t=!1){return(await this._client.callApi({type:"helix",url:"users/extensions/list",userId:(0,ge.extractUserId)(e),scopes:t?["channel:manage:extensions"]:["user:read:broadcast","channel:manage:extensions"]})).data.map(n=>new G1.HelixUserExtension(n))}async getActiveExtensions(e,t=!1){let r=(0,ge.extractUserId)(e),n=await this._client.callApi({type:"helix",url:"users/extensions",userId:r,scopes:t?["user:read:broadcast","channel:manage:extensions"]:void 0,query:(0,M1.createSingleKeyQuery)("user_id",r)});return new Rx.HelixInstalledExtensionList(n.data)}async updateActiveExtensionsForAuthenticatedUser(e,t){let r=await this._client.callApi({type:"helix",url:"users/extensions",method:"PUT",userId:(0,ge.extractUserId)(e),scopes:["channel:manage:extensions"],jsonBody:{data:t}});return new Rx.HelixInstalledExtensionList(r.data)}async _getUsers(e,t){if(t.length===0)return[];let r={[e]:t};return(await this._client.callApi({type:"helix",url:"users",query:r})).data.map(a=>new wu.HelixUser(a,this._client))}};Oa.HelixUserApi=Ba;Em.__decorate([(0,Pm.Enumerable)(!1)],Ba.prototype,"_getUserByIdBatcher",void 0);Em.__decorate([(0,Pm.Enumerable)(!1)],Ba.prototype,"_getUserByNameBatcher",void 0);Oa.HelixUserApi=Ba=Em.__decorate([(0,ge.rtfm)("api","HelixUserApi")],Ba)});var Im=l(ka=>{"use strict";Object.defineProperty(ka,"__esModule",{value:!0});ka.HelixVideo=void 0;var Dm=(y(),g(_)),Ox=fi(),W1=H(),B=p(),ja=class extends B.DataObject{constructor(e,t){super(e),this._client=t}get id(){return this[B.rawDataSymbol].id}get userId(){return this[B.rawDataSymbol].user_id}get userName(){return this[B.rawDataSymbol].user_login}get userDisplayName(){return this[B.rawDataSymbol].user_name}async getUser(){return(0,B.checkRelationAssertion)(await this._client.users.getUserById(this[B.rawDataSymbol].user_id))}get title(){return this[B.rawDataSymbol].title}get description(){return this[B.rawDataSymbol].description}get creationDate(){return new Date(this[B.rawDataSymbol].created_at)}get publishDate(){return new Date(this[B.rawDataSymbol].published_at)}get url(){return this[B.rawDataSymbol].url}get thumbnailUrl(){return this[B.rawDataSymbol].thumbnail_url}getThumbnailUrl(e,t){return this[B.rawDataSymbol].thumbnail_url.replace("%{width}",e.toString()).replace("%{height}",t.toString())}get isPublic(){return this[B.rawDataSymbol].viewable==="public"}get views(){return this[B.rawDataSymbol].view_count}get language(){return this[B.rawDataSymbol].language}get type(){return this[B.rawDataSymbol].type}get duration(){return this[B.rawDataSymbol].duration}get durationInSeconds(){let e=this[B.rawDataSymbol].duration.match(/\d+[hms]/g);if(!e)throw new B.HellFreezesOverError(`Could not parse duration string: ${this[B.rawDataSymbol].duration}`);return e.map(t=>{let r=/(\d+)([hms])/.exec(t);if(!r)throw new B.HellFreezesOverError(`Could not parse partial duration string: ${t}`);let[,n,a]=r;return parseInt(n,10)*{h:3600,m:60,s:1}[a]}).reduce((t,r)=>t+r)}get streamId(){return this[B.rawDataSymbol].stream_id}get mutedSegmentData(){var e,t;return(t=(e=this[B.rawDataSymbol].muted_segments)===null||e===void 0?void 0:e.slice())!==null&&t!==void 0?t:[]}isMutedAt(e,t,r=!1){if(this[B.rawDataSymbol].muted_segments===null)return!1;if(t==null)return this[B.rawDataSymbol].muted_segments.some(a=>a.offset<=e&&e<=a.offset+a.duration);let n=e+t;return r?this[B.rawDataSymbol].muted_segments.some(a=>{let s=a.offset+a.duration;return e<s&&a.offset<n}):this[B.rawDataSymbol].muted_segments.some(a=>{let s=a.offset+a.duration;return a.offset<=e&&n<=s})}};ka.HelixVideo=ja;Dm.__decorate([(0,W1.Enumerable)(!1)],ja.prototype,"_client",void 0);Dm.__decorate([(0,Ox.CachedGetter)()],ja.prototype,"durationInSeconds",null);ka.HelixVideo=ja=Dm.__decorate([Ox.Cacheable,(0,B.rtfm)("api","HelixVideo","id")],ja)});var Rm=l(Ma=>{"use strict";var vu;Object.defineProperty(Ma,"__esModule",{value:!0});Ma.HelixVideoApi=void 0;var jx=(y(),g(_)),V1=H(),Su=p(),$1=Ut(),z1=ne(),K1=ue(),J1=ae(),Z1=N(),Tm=Im(),Hu=vu=class extends Z1.BaseApi{constructor(){super(...arguments),this._getVideoByIdBatcher=new $1.HelixRequestBatcher({url:"videos"},"id","id",this._client,e=>new Tm.HelixVideo(e,this._client))}async getVideosByIds(e){return(await this._getVideos("id",e)).data}async getVideoById(e){let t=await this.getVideosByIds([e]);return t.length?t[0]:null}async getVideoByIdBatched(e){return await this._getVideoByIdBatcher.request(e)}async getVideosByUser(e,t={}){let r=(0,Su.extractUserId)(e);return await this._getVideos("user_id",[r],t)}getVideosByUserPaginated(e,t={}){let r=(0,Su.extractUserId)(e);return this._getVideosPaginated("user_id",[r],t)}async getVideosByGame(e,t={}){return await this._getVideos("game_id",[e],t)}getVideosByGamePaginated(e,t={}){return this._getVideosPaginated("game_id",[e],t)}async deleteVideosByIds(e,t){await this._client.callApi({type:"helix",url:"videos",method:"DELETE",scopes:["channel:manage:videos"],userId:(0,Su.extractUserId)(e),query:{id:t}})}async _getVideos(e,t,r={}){if(!t.length)return{data:[]};let n=await this._client.callApi({type:"helix",url:"videos",userId:e==="user_id"?t[0]:void 0,query:{...vu._makeVideosQuery(e,t,r),...(0,J1.createPaginationQuery)(r)}});return(0,K1.createPaginatedResult)(n,Tm.HelixVideo,this._client)}_getVideosPaginated(e,t,r={}){return new z1.HelixPaginatedRequest({url:"videos",userId:e==="user_id"?t[0]:void 0,query:vu._makeVideosQuery(e,t,r)},this._client,n=>new Tm.HelixVideo(n,this._client))}static _makeVideosQuery(e,t,r={}){let{language:n,period:a,orderBy:s,type:o}=r;return{[e]:t,language:n,period:a,sort:s,type:o}}};Ma.HelixVideoApi=Hu;jx.__decorate([(0,V1.Enumerable)(!1)],Hu.prototype,"_getVideoByIdBatcher",void 0);Ma.HelixVideoApi=Hu=vu=jx.__decorate([(0,Su.rtfm)("api","HelixVideoApi")],Hu)});var Mx=l(Cu=>{"use strict";Object.defineProperty(Cu,"__esModule",{value:!0});Cu.createWhisperQuery=void 0;var kx=p();function X1(i,e){return{from_user_id:(0,kx.extractUserId)(i),to_user_id:(0,kx.extractUserId)(e)}}Cu.createWhisperQuery=X1});var Bm=l(La=>{"use strict";Object.defineProperty(La,"__esModule",{value:!0});La.HelixWhisperApi=void 0;var Y1=(y(),g(_)),Lx=p(),eI=Mx(),tI=N(),Um=class extends tI.BaseApi{async sendWhisper(e,t,r){await this._client.callApi({type:"helix",url:"whispers",method:"POST",userId:(0,Lx.extractUserId)(e),scopes:["user:manage:whispers"],query:(0,eI.createWhisperQuery)(e,t),jsonBody:{message:r}})}};La.HelixWhisperApi=Um;La.HelixWhisperApi=Um=Y1.__decorate([(0,Lx.rtfm)("api","HelixWhisperApi")],Um)});var jm=l(qu=>{"use strict";Object.defineProperty(qu,"__esModule",{value:!0});qu.ApiReportedRequest=void 0;var Om=class{constructor(e,t,r){this._options=e,this._httpStatus=t,this._resolvedUserId=r}get options(){return this._options}get httpStatus(){return this._httpStatus}get resolvedUserId(){return this._resolvedUserId}};qu.ApiReportedRequest=Om});var Pu=l(Fa=>{"use strict";Object.defineProperty(Fa,"__esModule",{value:!0});Fa.BaseApiClient=void 0;var Q=(y(),g(_)),G=fi(),rI=Zs(),iI=H(),nI=ad(),ni=J(),Eu=Sd(),Fx=p(),aI=tg(),sI=Id(),oI=Wd(),lI=Kd(),uI=th(),cI=Sh(),dI=Eh(),hI=Ih(),pI=Oh(),mI=Wh(),_I=Xh(),yI=tp(),fI=np(),gI=lp(),bI=Cp(),xI=Dp(),wI=Bp(),vI=Lp(),SI=$p(),HI=Jp(),CI=nm(),qI=um(),EI=mm(),PI=Am(),AI=Rm(),DI=Bm(),II=jm(),M=class extends nI.EventEmitter{constructor(e,t,r){super(),this.onRequest=this.registerEvent(),this._config=e,this._logger=t,this._rateLimiter=r}async requestScopesForUser(e,t){await this._config.authProvider.getAccessTokenForUser(e,...t.map(r=>[r]))}async getTokenInfo(){try{let e=await this.callApi({type:"auth",url:"validate"});return new Eu.TokenInfo(e)}catch(e){throw e instanceof ni.HttpStatusCodeError&&e.statusCode===401?new Eu.InvalidTokenError({cause:e}):e}}async callApi(e){var t;let{authProvider:r}=this._config;if(!((t=e.auth)!==null&&t!==void 0?t:!0))return await(0,ni.callTwitchApi)(e,r.clientId,void 0,void 0,this._config.fetchOptions);let a=!1;if(e.forceType)switch(e.forceType){case"app":{if(!r.getAppAccessToken)throw new Error("Tried to make an API call that requires an app access token but your auth provider does not support that");let c=await r.getAppAccessToken();return await this._callApiUsingInitialToken(e,c)}case"user":{a=!0;break}default:throw new Fx.HellFreezesOverError(`Unknown forced token type: ${e.forceType}`)}if(e.scopes&&(a=!0),a){let c=e.canOverrideScopedUserContext?this._getUserIdFromRequestContext(e.userId):e.userId;if(!c)throw new Error("Tried to make an API call with a user context but no context user ID");let d=await r.getAccessTokenForUser(c,e.scopes);if(!d)throw new Error(`Tried to make an API call with a user context for user ID ${c} but no token was found`);if((0,Eu.accessTokenIsExpired)(d)&&r.refreshAccessTokenForUser){let h=await r.refreshAccessTokenForUser(c);return await this._callApiUsingInitialToken(e,h,!0)}return await this._callApiUsingInitialToken(e,d)}let s=this._getUserIdFromRequestContext(e.userId),o=s===null?await r.getAnyAccessToken():await r.getAnyAccessToken(s??e.userId);if((0,Eu.accessTokenIsExpired)(o)&&o.userId&&r.refreshAccessTokenForUser){let c=await r.refreshAccessTokenForUser(o.userId);return await this._callApiUsingInitialToken(e,c,!0)}return await this._callApiUsingInitialToken(e,o)}get bits(){return new sI.HelixBitsApi(this)}get channels(){return new oI.HelixChannelApi(this)}get channelPoints(){return new lI.HelixChannelPointsApi(this)}get charity(){return new uI.HelixCharityApi(this)}get chat(){return new cI.HelixChatApi(this)}get clips(){return new dI.HelixClipApi(this)}get contentClassificationLabels(){return new hI.HelixContentClassificationLabelApi(this)}get entitlements(){return new pI.HelixEntitlementApi(this)}get eventSub(){return new mI.HelixEventSubApi(this)}get extensions(){return new _I.HelixExtensionsApi(this)}get games(){return new yI.HelixGameApi(this)}get hypeTrain(){return new gI.HelixHypeTrainApi(this)}get goals(){return new fI.HelixGoalApi(this)}get moderation(){return new bI.HelixModerationApi(this)}get polls(){return new xI.HelixPollApi(this)}get predictions(){return new wI.HelixPredictionApi(this)}get raids(){return new vI.HelixRaidApi(this)}get schedule(){return new SI.HelixScheduleApi(this)}get search(){return new HI.HelixSearchApi(this)}get streams(){return new CI.HelixStreamApi(this)}get subscriptions(){return new qI.HelixSubscriptionApi(this)}get teams(){return new EI.HelixTeamApi(this)}get users(){return new PI.HelixUserApi(this)}get videos(){return new AI.HelixVideoApi(this)}get whispers(){return new DI.HelixWhisperApi(this)}get rateLimiterStats(){return this._rateLimiter instanceof rI.ResponseBasedRateLimiter?this._rateLimiter.stats:null}get _authProvider(){return this._config.authProvider}get _mockServerPort(){return this._config.mockServerPort}get _batchDelay(){var e;return(e=this._config.batchDelay)!==null&&e!==void 0?e:0}_getUserIdFromRequestContext(e){return e}async _callApiUsingInitialToken(e,t,r=!1){var n;let{authProvider:a}=this._config,{authorizationType:s}=a,o=await this._callApiInternal(e,a.clientId,t.accessToken,s);if(o.status===401&&!r){if(t.userId){if(a.refreshAccessTokenForUser){let c=await a.refreshAccessTokenForUser(t.userId);o=await this._callApiInternal(e,a.clientId,c.accessToken,s)}}else if(a.getAppAccessToken){let c=await a.getAppAccessToken(!0);o=await this._callApiInternal(e,a.clientId,c.accessToken,s)}}return this.emit(this.onRequest,new II.ApiReportedRequest(e,o.status,(n=t.userId)!==null&&n!==void 0?n:null)),await(0,ni.handleTwitchApiResponseError)(o,e),await(0,ni.transformTwitchApiResponse)(o)}async _callApiInternal(e,t,r,n){var a,s,o;let{fetchOptions:c,mockServerPort:d}=this._config,h=(a=e.type)!==null&&a!==void 0?a:"helix";this._logger.debug(`Calling ${h} API: ${(s=e.method)!==null&&s!==void 0?s:"GET"} ${e.url}`),this._logger.trace(`Query: ${JSON.stringify(e.query)}`),e.jsonBody&&this._logger.trace(`Request body: ${JSON.stringify(e.jsonBody)}`);let b=aI.operation({retries:3,minTimeout:500,factor:2}),{promise:q,resolve:C,reject:x}=(0,iI.promiseWithResolvers)();b.attempt(async()=>{try{let w=h==="helix"?await this._rateLimiter.request({options:e,clientId:t,accessToken:r,authorizationType:n,fetchOptions:c,mockServerPort:d}):await(0,ni.callTwitchApiRaw)(e,t,r,n,c,d);!w.ok&&w.status>=500&&w.status<600&&await(0,ni.handleTwitchApiResponseError)(w,e),C(w)}catch(w){if(b.retry(w))return;x(b.mainError())}});let E=await q;return this._logger.debug(`Called ${h} API: ${(o=e.method)!==null&&o!==void 0?o:"GET"} ${e.url} - result: ${E.status}`),E}};Fa.BaseApiClient=M;Q.__decorate([(0,G.CachedGetter)()],M.prototype,"bits",null);Q.__decorate([(0,G.CachedGetter)()],M.prototype,"channels",null);Q.__decorate([(0,G.CachedGetter)()],M.prototype,"channelPoints",null);Q.__decorate([(0,G.CachedGetter)()],M.prototype,"charity",null);Q.__decorate([(0,G.CachedGetter)()],M.prototype,"chat",null);Q.__decorate([(0,G.CachedGetter)()],M.prototype,"clips",null);Q.__decorate([(0,G.CachedGetter)()],M.prototype,"contentClassificationLabels",null);Q.__decorate([(0,G.CachedGetter)()],M.prototype,"entitlements",null);Q.__decorate([(0,G.CachedGetter)()],M.prototype,"eventSub",null);Q.__decorate([(0,G.CachedGetter)()],M.prototype,"extensions",null);Q.__decorate([(0,G.CachedGetter)()],M.prototype,"games",null);Q.__decorate([(0,G.CachedGetter)()],M.prototype,"hypeTrain",null);Q.__decorate([(0,G.CachedGetter)()],M.prototype,"goals",null);Q.__decorate([(0,G.CachedGetter)()],M.prototype,"moderation",null);Q.__decorate([(0,G.CachedGetter)()],M.prototype,"polls",null);Q.__decorate([(0,G.CachedGetter)()],M.prototype,"predictions",null);Q.__decorate([(0,G.CachedGetter)()],M.prototype,"raids",null);Q.__decorate([(0,G.CachedGetter)()],M.prototype,"schedule",null);Q.__decorate([(0,G.CachedGetter)()],M.prototype,"search",null);Q.__decorate([(0,G.CachedGetter)()],M.prototype,"streams",null);Q.__decorate([(0,G.CachedGetter)()],M.prototype,"subscriptions",null);Q.__decorate([(0,G.CachedGetter)()],M.prototype,"teams",null);Q.__decorate([(0,G.CachedGetter)()],M.prototype,"users",null);Q.__decorate([(0,G.CachedGetter)()],M.prototype,"videos",null);Q.__decorate([(0,G.CachedGetter)()],M.prototype,"whispers",null);Fa.BaseApiClient=M=Q.__decorate([G.Cacheable,(0,Fx.rtfm)("api","ApiClient")],M)});var Nx=l(Na=>{"use strict";Object.defineProperty(Na,"__esModule",{value:!0});Na.NoContextApiClient=void 0;var TI=(y(),g(_)),RI=p(),UI=Pu(),km=class extends UI.BaseApiClient{_getUserIdFromRequestContext(){return null}};Na.NoContextApiClient=km;Na.NoContextApiClient=km=TI.__decorate([(0,RI.rtfm)("api","ApiClient")],km)});var Qx=l(Qa=>{"use strict";Object.defineProperty(Qa,"__esModule",{value:!0});Qa.UserContextApiClient=void 0;var BI=(y(),g(_)),OI=p(),jI=Pu(),Mm=class extends jI.BaseApiClient{constructor(e,t,r,n){super(e,t,r),this._userId=n}_getUserIdFromRequestContext(){return this._userId}};Qa.UserContextApiClient=Mm;Qa.UserContextApiClient=Mm=BI.__decorate([(0,OI.rtfm)("api","ApiClient")],Mm)});var $x=l(Ga=>{"use strict";Object.defineProperty(Ga,"__esModule",{value:!0});Ga.ApiClient=void 0;var kI=(y(),g(_)),MI=ui(),LI=di(),Gx=Zs(),FI=J(),Vx=p(),NI=ed(),QI=Tf(),GI=Pu(),WI=Nx(),Wx=Qx(),Lm=class extends GI.BaseApiClient{constructor(e){if(!e.authProvider)throw new NI.ConfigError("No auth provider given. Please supply the `authProvider` option.");let t={name:"twurple:api:rate-limiter",...e.logger};super(e,(0,LI.createLogger)({name:"twurple:api:client",...e.logger}),MI.isNode?new Gx.PartitionedRateLimiter({getPartitionKey:r=>{var n;return(n=r.userId)!==null&&n!==void 0?n:null},createChild:()=>new QI.HelixRateLimiter({logger:t})}):new Gx.PartitionedTimeBasedRateLimiter({logger:t,bucketSize:800,timeFrame:64e3,doRequest:async({options:r,clientId:n,accessToken:a,authorizationType:s,fetchOptions:o,mockServerPort:c})=>await(0,FI.callTwitchApiRaw)(r,n,a,s,o,c),getPartitionKey:r=>{var n;return(n=r.userId)!==null&&n!==void 0?n:null}}))}async asUser(e,t){let r=new Wx.UserContextApiClient(this._config,this._logger,this._rateLimiter,(0,Vx.extractUserId)(e));return await t(r)}async asIntent(e,t){if(!this._authProvider.getAccessTokenForIntent)throw new Error("Trying to use intents with an auth provider that does not support them");for(let r of e){let n=await this._authProvider.getAccessTokenForIntent(r);if(n){let a=new Wx.UserContextApiClient(this._config,this._logger,this._rateLimiter,n.userId);return await t(a)}}throw new Error(`Intents [${e.join(", ")}] not found in auth provider`)}async withoutUser(e){let t=new WI.NoContextApiClient(this._config,this._logger,this._rateLimiter);return await e(t)}};Ga.ApiClient=Lm;Ga.ApiClient=Lm=kI.__decorate([(0,Vx.rtfm)("api","ApiClient")],Lm)});var Kx=l(Wa=>{"use strict";Object.defineProperty(Wa,"__esModule",{value:!0});Wa.HelixFollow=void 0;var zx=(y(),g(_)),VI=H(),Oe=p(),Au=class extends Oe.DataObject{constructor(e,t){super(e),this._client=t}get userId(){return this[Oe.rawDataSymbol].from_id}get userName(){return this[Oe.rawDataSymbol].from_login}get userDisplayName(){return this[Oe.rawDataSymbol].from_name}async getUser(){return(0,Oe.checkRelationAssertion)(await this._client.users.getUserById(this[Oe.rawDataSymbol].from_id))}get followedUserId(){return this[Oe.rawDataSymbol].to_id}get followedUserName(){return this[Oe.rawDataSymbol].to_login}get followedUserDisplayName(){return this[Oe.rawDataSymbol].to_name}async getFollowedUser(){return(0,Oe.checkRelationAssertion)(await this._client.users.getUserById(this[Oe.rawDataSymbol].to_id))}get followDate(){return new Date(this[Oe.rawDataSymbol].followed_at)}};Wa.HelixFollow=Au;zx.__decorate([(0,VI.Enumerable)(!1)],Au.prototype,"_client",void 0);Wa.HelixFollow=Au=zx.__decorate([(0,Oe.rtfm)("api","HelixFollow")],Au)});var Jx=l(u=>{"use strict";Object.defineProperty(u,"__esModule",{value:!0});u.HelixGoal=u.HelixGoalApi=u.HelixGame=u.HelixGameApi=u.HelixExtensionTransaction=u.HelixExtensionBitsProduct=u.HelixExtensionsApi=u.HelixPaginatedEventSubSubscriptionsRequest=u.HelixEventSubSubscription=u.HelixEventSubConduitShard=u.HelixEventSubConduit=u.HelixEventSubApi=u.HelixDropsEntitlement=u.HelixEntitlementApi=u.HelixContentClassificationLabel=u.HelixContentClassificationLabelApi=u.HelixClip=u.HelixClipApi=u.HelixSharedChatSession=u.HelixSharedChatSessionParticipant=u.HelixSentChatMessage=u.HelixPrivilegedChatSettings=u.HelixUserEmote=u.HelixEmoteFromSet=u.HelixChannelEmote=u.HelixEmote=u.HelixChatChatter=u.HelixChatSettings=u.HelixChatBadgeVersion=u.HelixChatBadgeSet=u.HelixChatApi=u.HelixCharityCampaignAmount=u.HelixCharityCampaignDonation=u.HelixCharityCampaign=u.HelixCharityApi=u.HelixCustomRewardRedemption=u.HelixCustomReward=u.HelixChannelPointsApi=u.HelixChannelReference=u.HelixFollowedChannel=u.HelixChannelFollower=u.HelixChannelEditor=u.HelixChannel=u.HelixAdSchedule=u.HelixChannelApi=u.HelixCheermoteList=u.HelixBitsLeaderboardEntry=u.HelixBitsLeaderboard=u.HelixBitsApi=u.ApiClient=void 0;u.HelixVideo=u.HelixVideoApi=u.HelixUserExtension=u.HelixInstalledExtensionList=u.HelixInstalledExtension=u.HelixBaseExtension=u.HelixUser=u.HelixPrivilegedUser=u.HelixFollow=u.HelixUserBlock=u.HelixUserApi=u.HelixTeamWithUsers=u.HelixTeam=u.HelixTeamApi=u.HelixUserSubscription=u.HelixSubscription=u.HelixSubscriptionApi=u.HelixPaginatedSubscriptionsRequest=u.HelixStreamMarkerWithVideo=u.HelixStreamMarker=u.HelixStream=u.HelixStreamApi=u.HelixChannelSearchResult=u.HelixSearchApi=u.HelixPaginatedScheduleSegmentRequest=u.HelixScheduleSegment=u.HelixSchedule=u.HelixScheduleApi=u.HelixUserRelation=u.HelixRaid=u.HelixRaidApi=u.HelixPredictor=u.HelixPredictionOutcome=u.HelixPrediction=u.HelixPredictionApi=u.HelixPollChoice=u.HelixPoll=u.HelixPollApi=u.HelixWarning=u.HelixUnbanRequest=u.HelixShieldModeStatus=u.HelixBlockedTerm=u.HelixBanUser=u.HelixModeratedChannel=u.HelixModerator=u.HelixBan=u.HelixModerationApi=u.HelixHypeTrainEvent=u.HelixHypeTrainContribution=u.HelixHypeTrainApi=void 0;u.HellFreezesOverError=u.HelixExtension=u.extractUserName=u.extractUserId=u.HelixPaginatedRequestWithTotal=u.HelixPaginatedRequest=u.ApiReportedRequest=u.StreamNotLiveError=u.ConfigError=u.HelixWhisperApi=void 0;var $I=$x();Object.defineProperty(u,"ApiClient",{enumerable:!0,get:function(){return $I.ApiClient}});var zI=Id();Object.defineProperty(u,"HelixBitsApi",{enumerable:!0,get:function(){return zI.HelixBitsApi}});var KI=qd();Object.defineProperty(u,"HelixBitsLeaderboard",{enumerable:!0,get:function(){return KI.HelixBitsLeaderboard}});var JI=Hd();Object.defineProperty(u,"HelixBitsLeaderboardEntry",{enumerable:!0,get:function(){return JI.HelixBitsLeaderboardEntry}});var ZI=Pd();Object.defineProperty(u,"HelixCheermoteList",{enumerable:!0,get:function(){return ZI.HelixCheermoteList}});var XI=Wd();Object.defineProperty(u,"HelixChannelApi",{enumerable:!0,get:function(){return XI.HelixChannelApi}});var YI=Ld();Object.defineProperty(u,"HelixAdSchedule",{enumerable:!0,get:function(){return YI.HelixAdSchedule}});var eT=Bd();Object.defineProperty(u,"HelixChannel",{enumerable:!0,get:function(){return eT.HelixChannel}});var tT=Od();Object.defineProperty(u,"HelixChannelEditor",{enumerable:!0,get:function(){return tT.HelixChannelEditor}});var rT=jd();Object.defineProperty(u,"HelixChannelFollower",{enumerable:!0,get:function(){return rT.HelixChannelFollower}});var iT=kd();Object.defineProperty(u,"HelixFollowedChannel",{enumerable:!0,get:function(){return iT.HelixFollowedChannel}});var nT=Vh();Object.defineProperty(u,"HelixChannelReference",{enumerable:!0,get:function(){return nT.HelixChannelReference}});var aT=Kd();Object.defineProperty(u,"HelixChannelPointsApi",{enumerable:!0,get:function(){return aT.HelixChannelPointsApi}});var sT=Vd();Object.defineProperty(u,"HelixCustomReward",{enumerable:!0,get:function(){return sT.HelixCustomReward}});var oT=$d();Object.defineProperty(u,"HelixCustomRewardRedemption",{enumerable:!0,get:function(){return oT.HelixCustomRewardRedemption}});var lT=th();Object.defineProperty(u,"HelixCharityApi",{enumerable:!0,get:function(){return lT.HelixCharityApi}});var uT=Zd();Object.defineProperty(u,"HelixCharityCampaign",{enumerable:!0,get:function(){return uT.HelixCharityCampaign}});var cT=Xd();Object.defineProperty(u,"HelixCharityCampaignDonation",{enumerable:!0,get:function(){return cT.HelixCharityCampaignDonation}});var dT=el();Object.defineProperty(u,"HelixCharityCampaignAmount",{enumerable:!0,get:function(){return dT.HelixCharityCampaignAmount}});var hT=Sh();Object.defineProperty(u,"HelixChatApi",{enumerable:!0,get:function(){return hT.HelixChatApi}});var pT=uh();Object.defineProperty(u,"HelixChatBadgeSet",{enumerable:!0,get:function(){return pT.HelixChatBadgeSet}});var mT=lh();Object.defineProperty(u,"HelixChatBadgeVersion",{enumerable:!0,get:function(){return mT.HelixChatBadgeVersion}});var _T=ll();Object.defineProperty(u,"HelixChatSettings",{enumerable:!0,get:function(){return _T.HelixChatSettings}});var yT=ch();Object.defineProperty(u,"HelixChatChatter",{enumerable:!0,get:function(){return yT.HelixChatChatter}});var fT=Xi();Object.defineProperty(u,"HelixEmote",{enumerable:!0,get:function(){return fT.HelixEmote}});var gT=sh();Object.defineProperty(u,"HelixChannelEmote",{enumerable:!0,get:function(){return gT.HelixChannelEmote}});var bT=hh();Object.defineProperty(u,"HelixEmoteFromSet",{enumerable:!0,get:function(){return bT.HelixEmoteFromSet}});var xT=ph();Object.defineProperty(u,"HelixUserEmote",{enumerable:!0,get:function(){return xT.HelixUserEmote}});var wT=yh();Object.defineProperty(u,"HelixPrivilegedChatSettings",{enumerable:!0,get:function(){return wT.HelixPrivilegedChatSettings}});var vT=gh();Object.defineProperty(u,"HelixSentChatMessage",{enumerable:!0,get:function(){return vT.HelixSentChatMessage}});var ST=bh();Object.defineProperty(u,"HelixSharedChatSessionParticipant",{enumerable:!0,get:function(){return ST.HelixSharedChatSessionParticipant}});var HT=xh();Object.defineProperty(u,"HelixSharedChatSession",{enumerable:!0,get:function(){return HT.HelixSharedChatSession}});var CT=Eh();Object.defineProperty(u,"HelixClipApi",{enumerable:!0,get:function(){return CT.HelixClipApi}});var qT=Hh();Object.defineProperty(u,"HelixClip",{enumerable:!0,get:function(){return qT.HelixClip}});var ET=Ih();Object.defineProperty(u,"HelixContentClassificationLabelApi",{enumerable:!0,get:function(){return ET.HelixContentClassificationLabelApi}});var PT=Ah();Object.defineProperty(u,"HelixContentClassificationLabel",{enumerable:!0,get:function(){return PT.HelixContentClassificationLabel}});var AT=Oh();Object.defineProperty(u,"HelixEntitlementApi",{enumerable:!0,get:function(){return AT.HelixEntitlementApi}});var DT=Th();Object.defineProperty(u,"HelixDropsEntitlement",{enumerable:!0,get:function(){return DT.HelixDropsEntitlement}});var IT=Wh();Object.defineProperty(u,"HelixEventSubApi",{enumerable:!0,get:function(){return IT.HelixEventSubApi}});var TT=Mh();Object.defineProperty(u,"HelixEventSubConduit",{enumerable:!0,get:function(){return TT.HelixEventSubConduit}});var RT=Fh();Object.defineProperty(u,"HelixEventSubConduitShard",{enumerable:!0,get:function(){return RT.HelixEventSubConduitShard}});var UT=vl();Object.defineProperty(u,"HelixEventSubSubscription",{enumerable:!0,get:function(){return UT.HelixEventSubSubscription}});var BT=kh();Object.defineProperty(u,"HelixPaginatedEventSubSubscriptionsRequest",{enumerable:!0,get:function(){return BT.HelixPaginatedEventSubSubscriptionsRequest}});var OT=Xh();Object.defineProperty(u,"HelixExtensionsApi",{enumerable:!0,get:function(){return OT.HelixExtensionsApi}});var jT=zh();Object.defineProperty(u,"HelixExtensionBitsProduct",{enumerable:!0,get:function(){return jT.HelixExtensionBitsProduct}});var kT=Kh();Object.defineProperty(u,"HelixExtensionTransaction",{enumerable:!0,get:function(){return kT.HelixExtensionTransaction}});var MT=tp();Object.defineProperty(u,"HelixGameApi",{enumerable:!0,get:function(){return MT.HelixGameApi}});var LT=Al();Object.defineProperty(u,"HelixGame",{enumerable:!0,get:function(){return LT.HelixGame}});var FT=np();Object.defineProperty(u,"HelixGoalApi",{enumerable:!0,get:function(){return FT.HelixGoalApi}});var NT=rp();Object.defineProperty(u,"HelixGoal",{enumerable:!0,get:function(){return NT.HelixGoal}});var QT=lp();Object.defineProperty(u,"HelixHypeTrainApi",{enumerable:!0,get:function(){return QT.HelixHypeTrainApi}});var GT=ap();Object.defineProperty(u,"HelixHypeTrainContribution",{enumerable:!0,get:function(){return GT.HelixHypeTrainContribution}});var WT=sp();Object.defineProperty(u,"HelixHypeTrainEvent",{enumerable:!0,get:function(){return WT.HelixHypeTrainEvent}});var VT=Cp();Object.defineProperty(u,"HelixModerationApi",{enumerable:!0,get:function(){return VT.HelixModerationApi}});var $T=mp();Object.defineProperty(u,"HelixBan",{enumerable:!0,get:function(){return $T.HelixBan}});var zT=gp();Object.defineProperty(u,"HelixModerator",{enumerable:!0,get:function(){return zT.HelixModerator}});var KT=fp();Object.defineProperty(u,"HelixModeratedChannel",{enumerable:!0,get:function(){return KT.HelixModeratedChannel}});var JT=Ol();Object.defineProperty(u,"HelixBanUser",{enumerable:!0,get:function(){return JT.HelixBanUser}});var ZT=yp();Object.defineProperty(u,"HelixBlockedTerm",{enumerable:!0,get:function(){return ZT.HelixBlockedTerm}});var XT=bp();Object.defineProperty(u,"HelixShieldModeStatus",{enumerable:!0,get:function(){return XT.HelixShieldModeStatus}});var YT=xp();Object.defineProperty(u,"HelixUnbanRequest",{enumerable:!0,get:function(){return YT.HelixUnbanRequest}});var eR=wp();Object.defineProperty(u,"HelixWarning",{enumerable:!0,get:function(){return eR.HelixWarning}});var tR=Dp();Object.defineProperty(u,"HelixPollApi",{enumerable:!0,get:function(){return tR.HelixPollApi}});var rR=Pp();Object.defineProperty(u,"HelixPoll",{enumerable:!0,get:function(){return rR.HelixPoll}});var iR=Ep();Object.defineProperty(u,"HelixPollChoice",{enumerable:!0,get:function(){return iR.HelixPollChoice}});var nR=Bp();Object.defineProperty(u,"HelixPredictionApi",{enumerable:!0,get:function(){return nR.HelixPredictionApi}});var aR=Rp();Object.defineProperty(u,"HelixPrediction",{enumerable:!0,get:function(){return aR.HelixPrediction}});var sR=Tp();Object.defineProperty(u,"HelixPredictionOutcome",{enumerable:!0,get:function(){return sR.HelixPredictionOutcome}});var oR=Ip();Object.defineProperty(u,"HelixPredictor",{enumerable:!0,get:function(){return oR.HelixPredictor}});var lR=Lp();Object.defineProperty(u,"HelixRaidApi",{enumerable:!0,get:function(){return lR.HelixRaidApi}});var uR=jp();Object.defineProperty(u,"HelixRaid",{enumerable:!0,get:function(){return uR.HelixRaid}});var cR=ko();Object.defineProperty(u,"HelixUserRelation",{enumerable:!0,get:function(){return cR.HelixUserRelation}});var dR=$p();Object.defineProperty(u,"HelixScheduleApi",{enumerable:!0,get:function(){return dR.HelixScheduleApi}});var hR=Gp();Object.defineProperty(u,"HelixSchedule",{enumerable:!0,get:function(){return hR.HelixSchedule}});var pR=ca();Object.defineProperty(u,"HelixScheduleSegment",{enumerable:!0,get:function(){return pR.HelixScheduleSegment}});var mR=Qp();Object.defineProperty(u,"HelixPaginatedScheduleSegmentRequest",{enumerable:!0,get:function(){return mR.HelixPaginatedScheduleSegmentRequest}});var _R=Jp();Object.defineProperty(u,"HelixSearchApi",{enumerable:!0,get:function(){return _R.HelixSearchApi}});var yR=zp();Object.defineProperty(u,"HelixChannelSearchResult",{enumerable:!0,get:function(){return yR.HelixChannelSearchResult}});var fR=nm();Object.defineProperty(u,"HelixStreamApi",{enumerable:!0,get:function(){return fR.HelixStreamApi}});var gR=Yp();Object.defineProperty(u,"HelixStream",{enumerable:!0,get:function(){return gR.HelixStream}});var bR=nu();Object.defineProperty(u,"HelixStreamMarker",{enumerable:!0,get:function(){return bR.HelixStreamMarker}});var xR=rm();Object.defineProperty(u,"HelixStreamMarkerWithVideo",{enumerable:!0,get:function(){return xR.HelixStreamMarkerWithVideo}});var wR=om();Object.defineProperty(u,"HelixPaginatedSubscriptionsRequest",{enumerable:!0,get:function(){return wR.HelixPaginatedSubscriptionsRequest}});var vR=um();Object.defineProperty(u,"HelixSubscriptionApi",{enumerable:!0,get:function(){return vR.HelixSubscriptionApi}});var SR=du();Object.defineProperty(u,"HelixSubscription",{enumerable:!0,get:function(){return SR.HelixSubscription}});var HR=cu();Object.defineProperty(u,"HelixUserSubscription",{enumerable:!0,get:function(){return HR.HelixUserSubscription}});var CR=mm();Object.defineProperty(u,"HelixTeamApi",{enumerable:!0,get:function(){return CR.HelixTeamApi}});var qR=mu();Object.defineProperty(u,"HelixTeam",{enumerable:!0,get:function(){return qR.HelixTeam}});var ER=dm();Object.defineProperty(u,"HelixTeamWithUsers",{enumerable:!0,get:function(){return ER.HelixTeamWithUsers}});var PR=Am();Object.defineProperty(u,"HelixUserApi",{enumerable:!0,get:function(){return PR.HelixUserApi}});var AR=qm();Object.defineProperty(u,"HelixUserBlock",{enumerable:!0,get:function(){return AR.HelixUserBlock}});var DR=Kx();Object.defineProperty(u,"HelixFollow",{enumerable:!0,get:function(){return DR.HelixFollow}});var IR=Cm();Object.defineProperty(u,"HelixPrivilegedUser",{enumerable:!0,get:function(){return IR.HelixPrivilegedUser}});var TR=bu();Object.defineProperty(u,"HelixUser",{enumerable:!0,get:function(){return TR.HelixUser}});var RR=fu();Object.defineProperty(u,"HelixBaseExtension",{enumerable:!0,get:function(){return RR.HelixBaseExtension}});var UR=fm();Object.defineProperty(u,"HelixInstalledExtension",{enumerable:!0,get:function(){return UR.HelixInstalledExtension}});var BR=xm();Object.defineProperty(u,"HelixInstalledExtensionList",{enumerable:!0,get:function(){return BR.HelixInstalledExtensionList}});var OR=Sm();Object.defineProperty(u,"HelixUserExtension",{enumerable:!0,get:function(){return OR.HelixUserExtension}});var jR=Rm();Object.defineProperty(u,"HelixVideoApi",{enumerable:!0,get:function(){return jR.HelixVideoApi}});var kR=Im();Object.defineProperty(u,"HelixVideo",{enumerable:!0,get:function(){return kR.HelixVideo}});var MR=Bm();Object.defineProperty(u,"HelixWhisperApi",{enumerable:!0,get:function(){return MR.HelixWhisperApi}});var LR=ed();Object.defineProperty(u,"ConfigError",{enumerable:!0,get:function(){return LR.ConfigError}});var FR=Xp();Object.defineProperty(u,"StreamNotLiveError",{enumerable:!0,get:function(){return FR.StreamNotLiveError}});var NR=jm();Object.defineProperty(u,"ApiReportedRequest",{enumerable:!0,get:function(){return NR.ApiReportedRequest}});var QR=ne();Object.defineProperty(u,"HelixPaginatedRequest",{enumerable:!0,get:function(){return QR.HelixPaginatedRequest}});var GR=kr();Object.defineProperty(u,"HelixPaginatedRequestWithTotal",{enumerable:!0,get:function(){return GR.HelixPaginatedRequestWithTotal}});var Du=p();Object.defineProperty(u,"extractUserId",{enumerable:!0,get:function(){return Du.extractUserId}});Object.defineProperty(u,"extractUserName",{enumerable:!0,get:function(){return Du.extractUserName}});Object.defineProperty(u,"HelixExtension",{enumerable:!0,get:function(){return Du.HelixExtension}});Object.defineProperty(u,"HellFreezesOverError",{enumerable:!0,get:function(){return Du.HellFreezesOverError}})});var iw=l((HL,rw)=>{var Zx=Bu(),WR=ku(),Xx=za(),$t=Ct(),Yx=Lu(),ew=Nu(),tw=Gu(),Iu=j_(),{ApiClient:VR}=Jx(),{AppTokenAuthProvider:$R}=Sd(),Fm=class{constructor(e,t,r){if(r&&r.apiClient)this.apiClient=r.apiClient;else if(e!==void 0&&t!==void 0){let n=new $R(e,t);this.apiClient=new VR({authProvider:n})}this.emotes=new Xx,this.channels=new Xx,this.ffzModifiersFetched=!1}get globalChannel(){return this.channels.get(null)}_setupChannel(e,t=null){let r=this.channels.get(e);return r||(r=new WR(this,e),this.channels.set(e,r)),t&&(r.format=t),r}_getRawTwitchEmotes(e){if(!this.apiClient)throw new Error("Client id or client secret not provided.");return e?this.apiClient.chat.getChannelEmotes(e):this.apiClient.chat.getGlobalEmotes()}_cacheTwitchEmote(e,t,r=null){let n=this._setupChannel(e),a=r||new tw(n,t.id,t);return this.emotes.set(a.code,a),n.emotes.set(a.code,a),a}_getRawBTTVEmotes(e){let t=e?$t.BTTV.Channel(e):$t.BTTV.Global;return Iu.get(t).then(r=>r.data instanceof Array?r.data:[...r.data.channelEmotes,...r.data.sharedEmotes])}_cacheBTTVEmote(e,t,r=null){let n=this._setupChannel(e),a=r||new Zx(n,t.id,t);return this.emotes.set(a.code,a),n.emotes.set(a.code,a),a}_getRawFFZEmoteSet(e){let t=$t.FFZ.Set(e);return Iu.get(t).then(r=>r.data.set.emoticons)}_getRawFFZEmotes(e){let t=$t.FFZ.Channel(e);return Iu.get(t).then(r=>{let n=[];for(let a of Object.keys(r.data.sets)){let s=r.data.sets[a];n.push(...s.emoticons)}return n})}_cacheFFZEmote(e,t,r=null){let n=this._setupChannel(e),a=r||new Yx(n,t.id,t);return this.emotes.set(a.code,a),n.emotes.set(a.code,a),a}_getRawSevenTVEmotes(e){let t=e?$t.SevenTV.Channel(e):$t.SevenTV.Global;return Iu.get(t).then(r=>r.data)}_cacheSevenTVEmote(e,t,r,n=null){let a=this._setupChannel(e,r),s=n||new ew(a,t.id,t);return this.emotes.set(s.code,s),a.emotes.set(s.code,s),s}fetchTwitchEmotes(e=null){return this._getRawTwitchEmotes(e).then(t=>{for(let r of t)this._cacheTwitchEmote(e,{code:r.name,id:r.id,formats:r.formats});return this.channels.get(e).emotes.filter(r=>r.type==="twitch")})}fetchBTTVEmotes(e=null){return this._getRawBTTVEmotes(e).then(t=>{for(let r of t)this._cacheBTTVEmote(e,r);return this.channels.get(e).emotes.filter(r=>r.type==="bttv")})}async fetchFFZEmotes(e=null){return this.ffzModifiersFetched||(this.ffzModifiersFetched=!0,await this._getRawFFZEmoteSet($t.FFZ.sets.Modifiers).then(t=>{for(let r of t)this._cacheFFZEmote(null,r)})),e?this._getRawFFZEmotes(e).then(t=>{for(let r of t)this._cacheFFZEmote(e,r);return this.channels.get(e).emotes.filter(r=>r.type==="ffz")}):this._getRawFFZEmoteSet($t.FFZ.sets.Global).then(t=>{for(let r of t)this._cacheFFZEmote(e,r);return this.channels.get(e).emotes.filter(r=>r.type==="ffz")})}fetchSevenTVEmotes(e=null,t="webp"){return this._getRawSevenTVEmotes(e).then(r=>{if("emotes"in r)for(let n of r.emotes)this._cacheSevenTVEmote(e,n,t);else for(let n of r.emote_set.emotes)this._cacheSevenTVEmote(e,n,t);return this.channels.get(e).emotes.filter(n=>n.type==="7tv")})}fromObject(e){let t=[],r={bttv:{class:Zx,cache:(n,a,s)=>this._cacheBTTVEmote(a,null,s)},ffz:{class:Yx,cache:(n,a,s)=>this._cacheFFZEmote(a,null,s)},"7tv":{class:ew,cache:(n,a,s)=>this._cacheSevenTVEmote(a,null,n.imageType,s)},twitch:{class:tw,cache:(n,a,s)=>this._cacheTwitchEmote(a,null,s)}};for(let n of e){let{type:a}=n;if(!Object.keys(r).includes(a))throw new TypeError(`Unknown type: ${a}`);let s=r[a].class;this._setupChannel(n.channel_id,a==="7tv"?n.imageType:null);let o=s.fromObject(n,this.channels.get(n.channel_id));r[a].cache(n,n.channel_id,o),t.push(o)}return t}};rw.exports=Fm});var aw=l((CL,nw)=>{var zR=Ct(),Nm=class{constructor(e,t={}){this.fetcher=e,this.options=Object.assign({template:"",type:"markdown",match:/:(.+?):/g},t),this._validateOptions(this.options)}_validateOptions(e){if(e.template&&typeof e.template!="string")throw new TypeError("Template must be a string");if(!["markdown","html","bbcode","plain"].includes(e.type))throw new TypeError("Parse type must be one of `markdown`, `html`, `bbcode`, or `plain`");if(!(e.match instanceof RegExp)||!e.match.global)throw new TypeError("Match must be a global RegExp.")}parse(e,t=0){return e.replace(this.options.match,(n,a)=>{let s=this.fetcher.emotes.get(a);if(!s)return n;if(s.modifier)return"";let o=this.options.template||zR.Templates[this.options.type],c=s.toLink(t);return o.replace(/{link}/g,c).replace(/{name}/g,s.code).replace(/{size}/g,t).replace(/{creator}/g,s.ownerName||"global")})}};nw.exports=Nm});var ow=l((qL,sw)=>{sw.exports={BTTVEmote:Bu(),Channel:ku(),Collection:za(),Constants:Ct(),Emote:yr(),EmoteFetcher:iw(),EmoteParser:aw(),FFZEmote:Lu(),SevenTVEmote:Nu(),TwitchEmote:Gu()}});var lw=yw(ow()),{EmoteFetcher:KR,EmoteParser:JR}=lw.default;async function ZR(){let i=new KR,e=new JR(i,{template:'<img class="emote" alt="{name}" src="{link}">',match:/(\w+)+?/g});await i.fetchSevenTVEmotes(53268737,"avif");let t=document.querySelector(".css-175oi2r");new MutationObserver(n=>{for(let a of n)a.addedNodes.forEach(s=>{let o=s.childNodes[0];if(o){let c=o.childNodes[o.childNodes.length-1],d=e.parse(c.textContent);c.textContent=d}})}).observe(t,{childList:!0,subtree:!0})}ZR();})();
/*! Bundled license information:

axios/dist/browser/axios.cjs:
  (*! Axios v1.9.0 Copyright (c) 2025 Matt Zabriskie and contributors *)
*/
